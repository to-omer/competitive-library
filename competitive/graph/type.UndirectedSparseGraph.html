<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `UndirectedSparseGraph` type in crate `competitive`."><title>UndirectedSparseGraph in competitive::graph - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-47e7ab555ef2818a.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="competitive" data-themes="" data-resource-suffix="" data-rustdoc-version="1.74.0-nightly (b4e54c6e3 2023-09-11)" data-channel="nightly" data-search-js="search-5d3eaacf19ebf04f.js" data-settings-js="settings-74424d7eec62a23e.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-f194925aa375ae96.css" data-theme-dark-css="dark-1dd4d1ce031e15de.css" data-theme-ayu-css="ayu-49e58d069f567085.css" ><script src="../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-8d035c8cea6edbc4.js"></script><script defer src="../../static.files/scrape-examples-ef1e698c1d417c0c.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-f194925aa375ae96.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1dd4d1ce031e15de.css"><link rel="stylesheet" href="../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
  integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"
  integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"
  integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false }
      ]
    });
  });
</script>
</head><body class="rustdoc type"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../competitive/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../competitive/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">UndirectedSparseGraph</a></h2><div class="sidebar-elems"><section><h3><a href="#aliased-type">Aliased type</a></h3><h3><a href="#fields">Fields</a></h3><ul class="block"><li><a href="#structfield.edges">edges</a></li><li><a href="#structfield.elist">elist</a></li><li><a href="#structfield.start">start</a></li></ul><h3><a href="#implementations">Methods</a></h3><ul class="block"><li><a href="#method.adjacencies">adjacencies</a></li><li><a href="#method.bfs_order">bfs_order</a></li><li><a href="#method.builder">builder</a></li><li><a href="#method.builder_with_esize">builder_with_esize</a></li><li><a href="#method.dfs_order">dfs_order</a></li><li><a href="#method.dfs_tree">dfs_tree</a></li><li><a href="#method.edges_size">edges_size</a></li><li><a href="#method.for_each_connected_components">for_each_connected_components</a></li><li><a href="#method.from_edges">from_edges</a></li><li><a href="#method.to_graphvis">to_graphvis</a></li><li><a href="#method.topological_sort">topological_sort</a></li><li><a href="#method.tree_center">tree_center</a></li><li><a href="#method.tree_depth">tree_depth</a></li><li><a href="#method.tree_dp_bottom_up">tree_dp_bottom_up</a></li><li><a href="#method.tree_dp_top_down">tree_dp_top_down</a></li><li><a href="#method.tree_order">tree_order</a></li><li><a href="#method.tree_size">tree_size</a></li><li><a href="#method.vertices">vertices</a></li><li><a href="#method.vertices_size">vertices_size</a></li><li><a href="#method.weighted_tree_depth">weighted_tree_depth</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block"><li><a href="#impl-Adjacencies%3C'g%3E-for-SparseGraph%3CD%3E">Adjacencies&lt;&#x27;g&gt;</a></li><li><a href="#impl-AdjacenciesWithEindex%3C'g%3E-for-SparseGraph%3CD%3E">AdjacenciesWithEindex&lt;&#x27;g&gt;</a></li><li><a href="#impl-AdjacencyView%3C'g,+'a,+M,+T%3E-for-SparseGraph%3CD%3E">AdjacencyView&lt;&#x27;g, &#x27;a, M, T&gt;</a></li><li><a href="#impl-Clone-for-SparseGraph%3CD%3E">Clone</a></li><li><a href="#impl-Debug-for-SparseGraph%3CD%3E">Debug</a></li><li><a href="#impl-EIndexedGraph%3C'_%3E-for-SparseGraph%3CD%3E">EIndexedGraph&lt;&#x27;_&gt;</a></li><li><a href="#impl-EdgeMap%3C'_,+T%3E-for-SparseGraph%3CD%3E">EdgeMap&lt;&#x27;_, T&gt;</a></li><li><a href="#impl-EdgeSize%3C'_%3E-for-SparseGraph%3CD%3E">EdgeSize&lt;&#x27;_&gt;</a></li><li><a href="#impl-EdgeView%3C'_,+Vec%3CT,+Global%3E,+T%3E-for-SparseGraph%3CD%3E">EdgeView&lt;&#x27;_, Vec&lt;T, Global&gt;, T&gt;</a></li><li><a href="#impl-EdgeView%3C'_,+%5BT%5D,+T%3E-for-SparseGraph%3CD%3E">EdgeView&lt;&#x27;_, [T], T&gt;</a></li><li><a href="#impl-GraphBase%3C'_%3E-for-SparseGraph%3CD%3E">GraphBase&lt;&#x27;_&gt;</a></li><li><a href="#impl-VertexMap%3C'_,+T%3E-for-SparseGraph%3CD%3E">VertexMap&lt;&#x27;_, T&gt;</a></li><li><a href="#impl-VertexSize%3C'_%3E-for-SparseGraph%3CD%3E">VertexSize&lt;&#x27;_&gt;</a></li><li><a href="#impl-VertexView%3C'_,+Vec%3CT,+Global%3E,+T%3E-for-SparseGraph%3CD%3E">VertexView&lt;&#x27;_, Vec&lt;T, Global&gt;, T&gt;</a></li><li><a href="#impl-VertexView%3C'_,+%5BT%5D,+T%3E-for-SparseGraph%3CD%3E">VertexView&lt;&#x27;_, [T], T&gt;</a></li><li><a href="#impl-Vertices%3C'_%3E-for-SparseGraph%3CD%3E">Vertices&lt;&#x27;_&gt;</a></li></ul></section><h2><a href="index.html">In competitive::graph</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Type Alias <a href="../index.html">competitive</a>::<wbr><a href="index.html">graph</a>::<wbr><a class="type" href="#">UndirectedSparseGraph</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/competitive/graph/sparse_graph.rs.html#161">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub type UndirectedSparseGraph = <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;<a class="enum" href="enum.UndirectedEdge.html" title="enum competitive::graph::UndirectedEdge">UndirectedEdge</a>&gt;;</code></pre><h2 id="aliased-type" class="small-section-header">Aliased Type<a href="#aliased-type" class="anchor">§</a></h2><pre class="rust item-decl"><code>struct UndirectedSparseGraph {
    pub start: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;,
    pub elist: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.Adjacency.html" title="struct competitive::graph::Adjacency">Adjacency</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;,
    pub edges: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>), <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;,
    /* private fields */
}</code></pre><h2 id="fields" class="fields small-section-header">Fields<a href="#fields" class="anchor">§</a></h2><span id="structfield.start" class="structfield small-section-header"><a href="#structfield.start" class="anchor field">§</a><code>start: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;</code></span><span id="structfield.elist" class="structfield small-section-header"><a href="#structfield.elist" class="anchor field">§</a><code>elist: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.Adjacency.html" title="struct competitive::graph::Adjacency">Adjacency</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;</code></span><span id="structfield.edges" class="structfield small-section-header"><a href="#structfield.edges" class="anchor field">§</a><code>edges: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>), <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;</code></span><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-UndirectedSparseGraph" class="impl"><a class="src rightside" href="../../src/competitive/graph/graphvis.rs.html#27-46">source</a><a href="#impl-UndirectedSparseGraph" class="anchor">§</a><h3 class="code-header">impl <a class="type" href="type.UndirectedSparseGraph.html" title="type competitive::graph::UndirectedSparseGraph">UndirectedSparseGraph</a></h3></section></summary><div class="impl-items"><section id="method.to_graphvis" class="method"><a class="src rightside" href="../../src/competitive/graph/graphvis.rs.html#28-45">source</a><h4 class="code-header">pub fn <a href="#method.to_graphvis" class="fn">to_graphvis</a>&lt;N, NA, E, EA&gt;(&amp;self, node_attr: N, edge_attr: E) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a><span class="where fmt-newline">where
    N: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; NA,
    E: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; EA,
    NA: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Display.html" title="trait core::fmt::Display">Display</a>,
    EA: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Display.html" title="trait core::fmt::Display">Display</a>,</span></h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-UndirectedSparseGraph-1" class="impl"><a class="src rightside" href="../../src/competitive/tree/depth.rs.html#5-17">source</a><a href="#impl-UndirectedSparseGraph-1" class="anchor">§</a><h3 class="code-header">impl <a class="type" href="type.UndirectedSparseGraph.html" title="type competitive::graph::UndirectedSparseGraph">UndirectedSparseGraph</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.tree_depth" class="method"><a class="src rightside" href="../../src/competitive/tree/depth.rs.html#12-16">source</a><h4 class="code-header">pub fn <a href="#method.tree_depth" class="fn">tree_depth</a>(&amp;self, root: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;</h4></section></summary><div class="docblock scraped-example-list"><span></span><h5 id="scraped-examples"><a href="#scraped-examples">Examples found in repository</a><a class="scrape-help" href="../../scrape-examples-help.html">?</a></h5><div class="scraped-example expanded" data-locs="[[[1,1],&quot;../../src/competitive/tree/euler_tour.rs.html#142&quot;,&quot;line 142&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/euler_tour.rs (<a href="../../src/competitive/tree/euler_tour.rs.html#142">line 142</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>141</span>
<span>142</span>
<span>143</span>
<span>144</span>
<span>145</span>
</pre></div><pre class="rust"><code>    <span class="kw">pub fn </span>gen_lca&lt;D: LcaMonoidDispatch&gt;(<span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span><span class="self">self</span>) -&gt; LowestCommonAncestor&lt;<span class="lifetime">&#39;a</span>, D&gt; {
        D::set_depth(<span class="self">self</span>.graph.<span class="highlight focus">tree_depth</span>(<span class="self">self</span>.root));
        <span class="kw">let </span>dst = DisjointSparseTable::&lt;LcaMonoid&lt;D&gt;&gt;::new(<span class="self">self</span>.vtrace.clone());
        LowestCommonAncestor { euler: <span class="self">self</span>, dst }
    }</code></pre></div></div></div></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-UndirectedSparseGraph-2" class="impl"><a class="src rightside" href="../../src/competitive/tree/depth.rs.html#20-47">source</a><a href="#impl-UndirectedSparseGraph-2" class="anchor">§</a><h3 class="code-header">impl <a class="type" href="type.UndirectedSparseGraph.html" title="type competitive::graph::UndirectedSparseGraph">UndirectedSparseGraph</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.weighted_tree_depth" class="method"><a class="src rightside" href="../../src/competitive/tree/depth.rs.html#38-46">source</a><h4 class="code-header">pub fn <a href="#method.weighted_tree_depth" class="fn">weighted_tree_depth</a>&lt;M: <a class="trait" href="../algebra/trait.Monoid.html" title="trait competitive::algebra::Monoid">Monoid</a>, F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; M::<a class="associatedtype" href="../algebra/trait.Magma.html#associatedtype.T" title="type competitive::algebra::Magma::T">T</a>&gt;(
    &amp;self,
    root: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,
    weight: F
) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;M::<a class="associatedtype" href="../algebra/trait.Magma.html#associatedtype.T" title="type competitive::algebra::Magma::T">T</a>&gt;</h4></section></summary><div class="docblock scraped-example-list"><span></span><h5 id="scraped-examples-1"><a href="#scraped-examples-1">Examples found in repository</a><a class="scrape-help" href="../../scrape-examples-help.html">?</a></h5><div class="scraped-example " data-locs="[[[4,4],&quot;../../src/aizu_online_judge/grl/grl_5_a.rs.html#10&quot;,&quot;line 10&quot;],[[7,7],&quot;../../src/aizu_online_judge/grl/grl_5_a.rs.html#13&quot;,&quot;line 13&quot;]]"><div class="scraped-example-title">crates/aizu_online_judge/src/grl/grl_5_a.rs (<a href="../../src/aizu_online_judge/grl/grl_5_a.rs.html#10">line 10</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button><span class="kw">pub fn </span>grl_5_a(reader: <span class="kw">impl </span>Read, <span class="kw-2">mut </span>writer: <span class="kw">impl </span>Write) {
    <span class="kw">let </span>s = read_all_unchecked(reader);
    <span class="kw">let </span><span class="kw-2">mut </span>scanner = Scanner::new(<span class="kw-2">&amp;</span>s);
    <span class="macro">scan!</span>(scanner, n, (graph, w): @TreeGraphScanner::&lt;usize, u64&gt;::new(n));
    <span class="kw">let </span>d = graph.<span class="highlight focus">weighted_tree_depth::</span>&lt;AdditiveOperation&lt;<span class="kw">_</span>&gt;, <span class="kw">_</span>&gt;(<span class="number">0</span>, |eid| w[eid]);
    <span class="kw">let </span>r = (<span class="number">0</span>..n).max_by_key(|<span class="kw-2">&amp;</span>u| d[u]).unwrap();
    <span class="kw">let </span>ans = graph
        .<span class="highlight">weighted_tree_depth::</span>&lt;AdditiveOperation&lt;<span class="kw">_</span>&gt;, <span class="kw">_</span>&gt;(r, |eid| w[eid])
        .into_iter()
        .max()
        .unwrap();
    <span class="macro">writeln!</span>(writer, <span class="string">&quot;{}&quot;</span>, ans).ok();
}</code></pre></div></div></div></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-UndirectedSparseGraph-3" class="impl"><a class="src rightside" href="../../src/competitive/tree/depth.rs.html#50-63">source</a><a href="#impl-UndirectedSparseGraph-3" class="anchor">§</a><h3 class="code-header">impl <a class="type" href="type.UndirectedSparseGraph.html" title="type competitive::graph::UndirectedSparseGraph">UndirectedSparseGraph</a></h3></section></summary><div class="impl-items"><section id="method.tree_size" class="method"><a class="src rightside" href="../../src/competitive/tree/depth.rs.html#58-62">source</a><h4 class="code-header">pub fn <a href="#method.tree_size" class="fn">tree_size</a>(&amp;self, root: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>&gt;</h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-UndirectedSparseGraph-4" class="impl"><a class="src rightside" href="../../src/competitive/tree/tree_center.rs.html#10-55">source</a><a href="#impl-UndirectedSparseGraph-4" class="anchor">§</a><h3 class="code-header">impl <a class="type" href="type.UndirectedSparseGraph.html" title="type competitive::graph::UndirectedSparseGraph">UndirectedSparseGraph</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.tree_center" class="method"><a class="src rightside" href="../../src/competitive/tree/tree_center.rs.html#12-54">source</a><h4 class="code-header">pub fn <a href="#method.tree_center" class="fn">tree_center</a>(&amp;self) -&gt; <a class="enum" href="../tree/enum.TreeCenter.html" title="enum competitive::tree::TreeCenter">TreeCenter</a></h4></section></summary><div class="docblock"><p>tree center</p>
</div><div class="docblock scraped-example-list"><span></span><h5 id="scraped-examples-2"><a href="#scraped-examples-2">Examples found in repository</a><a class="scrape-help" href="../../scrape-examples-help.html">?</a></h5><div class="scraped-example expanded" data-locs="[[[1,1],&quot;../../src/competitive/tree/tree_hash.rs.html#51&quot;,&quot;line 51&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/tree_hash.rs (<a href="../../src/competitive/tree/tree_hash.rs.html#51">line 51</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
</pre></div><pre class="rust"><code>    <span class="kw">pub fn </span>hash(<span class="kw-2">&amp;mut </span><span class="self">self</span>, g: <span class="kw-2">&amp;</span>UndirectedSparseGraph) -&gt; u64 {
        <span class="kw">match </span>g.<span class="highlight focus">tree_center</span>() {
            TreeCenter::One(u) =&gt; <span class="self">self</span>.hash_rec(g, u, !<span class="number">0</span>, <span class="number">0</span>),
            TreeCenter::Two(u, v) =&gt; {
                <span class="self">Self</span>::mersenne_mul_mod(<span class="self">self</span>.hash_rooted(g, u, v), <span class="self">self</span>.hash_rooted(g, v, u))
            }
        }
    }</code></pre></div></div></div></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-UndirectedSparseGraph-5" class="impl"><a class="src rightside" href="../../src/competitive/tree/tree_dp.rs.html#4-43">source</a><a href="#impl-UndirectedSparseGraph-5" class="anchor">§</a><h3 class="code-header">impl <a class="type" href="type.UndirectedSparseGraph.html" title="type competitive::graph::UndirectedSparseGraph">UndirectedSparseGraph</a></h3></section></summary><div class="impl-items"><section id="method.tree_dp_bottom_up" class="method"><a class="src rightside" href="../../src/competitive/tree/tree_dp.rs.html#5-23">source</a><h4 class="code-header">pub fn <a href="#method.tree_dp_bottom_up" class="fn">tree_dp_bottom_up</a>&lt;T, F&gt;(&amp;self, root: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, dp: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[T]</a>, f: F)<span class="where fmt-newline">where
    F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut T</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;T</a>),</span></h4></section><section id="method.tree_dp_top_down" class="method"><a class="src rightside" href="../../src/competitive/tree/tree_dp.rs.html#24-42">source</a><h4 class="code-header">pub fn <a href="#method.tree_dp_top_down" class="fn">tree_dp_top_down</a>&lt;T, F&gt;(&amp;self, root: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, dp: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[T]</a>, f: F)<span class="where fmt-newline">where
    F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut T</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;T</a>),</span></h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/order.rs.html#4-22">source</a><a href="#impl-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="method.bfs_order" class="method"><a class="src rightside" href="../../src/competitive/graph/order.rs.html#5-21">source</a><h4 class="code-header">pub fn <a href="#method.bfs_order" class="fn">bfs_order</a>(&amp;self, root: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;</h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-SparseGraph%3CD%3E-1" class="impl"><a class="src rightside" href="../../src/competitive/graph/order.rs.html#25-42">source</a><a href="#impl-SparseGraph%3CD%3E-1" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="method.dfs_order" class="method"><a class="src rightside" href="../../src/competitive/graph/order.rs.html#26-41">source</a><h4 class="code-header">pub fn <a href="#method.dfs_order" class="fn">dfs_order</a>(&amp;self, root: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;</h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-SparseGraph%3CD%3E-2" class="impl"><a class="src rightside" href="../../src/competitive/graph/order.rs.html#45-62">source</a><a href="#impl-SparseGraph%3CD%3E-2" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="method.dfs_tree" class="method"><a class="src rightside" href="../../src/competitive/graph/order.rs.html#46-61">source</a><h4 class="code-header">pub fn <a href="#method.dfs_tree" class="fn">dfs_tree</a>(&amp;self, root: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>&gt;</h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-SparseGraph%3CD%3E-3" class="impl"><a class="src rightside" href="../../src/competitive/graph/order.rs.html#65-93">source</a><a href="#impl-SparseGraph%3CD%3E-3" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.for_each_connected_components" class="method"><a class="src rightside" href="../../src/competitive/graph/order.rs.html#67-92">source</a><h4 class="code-header">pub fn <a href="#method.for_each_connected_components" class="fn">for_each_connected_components</a>&lt;F&gt;(&amp;self, f: F)<span class="where fmt-newline">where
    F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;Self</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, &amp;[(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>)]),</span></h4></section></summary><div class="docblock"><p>f: |g, root, ord: [vertex, parent]| {}</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-SparseGraph%3CD%3E-4" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#37-60">source</a><a href="#impl-SparseGraph%3CD%3E-4" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.vertices_size" class="method"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#39-41">source</a><h4 class="code-header">pub fn <a href="#method.vertices_size" class="fn">vertices_size</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Return the number of vertices.</p>
</div><div class="docblock scraped-example-list"><span></span><h5 id="scraped-examples-3"><a href="#scraped-examples-3">Examples found in repository</a><a class="scrape-help" href="../../scrape-examples-help.html">?</a></h5><div class="scraped-example expanded" data-locs="[[[1,1],&quot;../../src/competitive/graph/sparse_graph.rs.html#48&quot;,&quot;line 48&quot;]]"><div class="scraped-example-title">crates/competitive/src/graph/sparse_graph.rs (<a href="../../src/competitive/graph/sparse_graph.rs.html#48">line 48</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>47</span>
<span>48</span>
<span>49</span>
</pre></div><pre class="rust"><code>    <span class="kw">pub fn </span>vertices(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; ops::Range&lt;usize&gt; {
        <span class="number">0</span>..<span class="self">self</span>.<span class="highlight focus">vertices_size</span>()
    }</code></pre></div></div></div><details class="toggle more-examples-toggle"><summary class="hideme"><span>More examples</span></summary><div class="hide-more">Hide additional examples</div><div class="more-scraped-examples"><div class="toggle-line"><div class="toggle-line-inner"></div></div><div class="scraped-example " data-locs="[[[1,1],&quot;../../src/competitive/tree/depth.rs.html#13&quot;,&quot;line 13&quot;],[[2,2],&quot;../../src/competitive/tree/depth.rs.html#14&quot;,&quot;line 14&quot;],[[31,31],&quot;../../src/competitive/tree/depth.rs.html#43&quot;,&quot;line 43&quot;],[[47,47],&quot;../../src/competitive/tree/depth.rs.html#59&quot;,&quot;line 59&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/depth.rs (<a href="../../src/competitive/tree/depth.rs.html#13">line 13</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
<span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
<span>58</span>
<span>59</span>
<span>60</span>
<span>61</span>
<span>62</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>tree_depth(<span class="kw-2">&amp;</span><span class="self">self</span>, root: usize) -&gt; Vec&lt;u64&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>depth = <span class="macro">vec!</span>[<span class="number">0</span>; <span class="self">self</span>.<span class="highlight focus">vertices_size</span>()];
        <span class="self">self</span>.depth_dfs(root, <span class="self">self</span>.<span class="highlight">vertices_size</span>(), <span class="number">0</span>, <span class="kw-2">&amp;mut </span>depth);
        depth
    }
}

<span class="attr">#[codesnip::entry(<span class="string">&quot;weighted_tree_depth&quot;</span>, include(<span class="string">&quot;algebra&quot;</span>, <span class="string">&quot;SparseGraph&quot;</span>))]
</span><span class="kw">impl </span>UndirectedSparseGraph {
    <span class="kw">fn </span>weighted_depth_dfs&lt;M, F&gt;(
        <span class="kw-2">&amp;</span><span class="self">self</span>,
        u: usize,
        p: usize,
        d: M::T,
        depth: <span class="kw-2">&amp;mut </span>Vec&lt;M::T&gt;,
        weight: <span class="kw-2">&amp;</span>F,
    ) <span class="kw">where
        </span>M: Monoid,
        F: Fn(usize) -&gt; M::T,
    {
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.adjacencies(u).filter(|a| a.to != p) {
            <span class="kw">let </span>nd = M::operate(<span class="kw-2">&amp;</span>d, <span class="kw-2">&amp;</span>weight(a.id));
            <span class="self">self</span>.weighted_depth_dfs::&lt;M, <span class="kw">_</span>&gt;(a.to, u, nd, depth, weight);
        }
        depth[u] = d;
    }
    <span class="kw">pub fn </span>weighted_tree_depth&lt;M: Monoid, F: Fn(usize) -&gt; M::T&gt;(
        <span class="kw-2">&amp;</span><span class="self">self</span>,
        root: usize,
        weight: F,
    ) -&gt; Vec&lt;M::T&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>depth = <span class="macro">vec!</span>[M::unit(); <span class="self">self</span>.<span class="highlight">vertices_size</span>()];
        <span class="self">self</span>.weighted_depth_dfs::&lt;M, <span class="kw">_</span>&gt;(root, usize::MAX, M::unit(), <span class="kw-2">&amp;mut </span>depth, <span class="kw-2">&amp;</span>weight);
        depth
    }
}

<span class="attr">#[codesnip::entry(<span class="string">&quot;tree_size&quot;</span>, include(<span class="string">&quot;SparseGraph&quot;</span>))]
</span><span class="kw">impl </span>UndirectedSparseGraph {
    <span class="kw">fn </span>size_dfs(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, p: usize, size: <span class="kw-2">&amp;mut </span>Vec&lt;u64&gt;) {
        size[u] = <span class="number">1</span>;
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.adjacencies(u).filter(|a| a.to != p) {
            <span class="self">self</span>.size_dfs(a.to, u, size);
            size[u] += size[a.to];
        }
    }
    <span class="kw">pub fn </span>tree_size(<span class="kw-2">&amp;</span><span class="self">self</span>, root: usize) -&gt; Vec&lt;u64&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>size = <span class="macro">vec!</span>[<span class="number">0</span>; <span class="self">self</span>.<span class="highlight">vertices_size</span>()];
        <span class="self">self</span>.size_dfs(root, usize::MAX, <span class="kw-2">&amp;mut </span>size);
        size
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[3,3],&quot;../../src/competitive/tree/euler_tour.rs.html#18&quot;,&quot;line 18&quot;],[[4,4],&quot;../../src/competitive/tree/euler_tour.rs.html#19&quot;,&quot;line 19&quot;],[[37,37],&quot;../../src/competitive/tree/euler_tour.rs.html#52&quot;,&quot;line 52&quot;],[[97,97],&quot;../../src/competitive/tree/euler_tour.rs.html#112&quot;,&quot;line 112&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/euler_tour.rs (<a href="../../src/competitive/tree/euler_tour.rs.html#18">line 18</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
<span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
<span>58</span>
<span>59</span>
<span>60</span>
<span>61</span>
<span>62</span>
<span>63</span>
<span>64</span>
<span>65</span>
<span>66</span>
<span>67</span>
<span>68</span>
<span>69</span>
<span>70</span>
<span>71</span>
<span>72</span>
<span>73</span>
<span>74</span>
<span>75</span>
<span>76</span>
<span>77</span>
<span>78</span>
<span>79</span>
<span>80</span>
<span>81</span>
<span>82</span>
<span>83</span>
<span>84</span>
<span>85</span>
<span>86</span>
<span>87</span>
<span>88</span>
<span>89</span>
<span>90</span>
<span>91</span>
<span>92</span>
<span>93</span>
<span>94</span>
<span>95</span>
<span>96</span>
<span>97</span>
<span>98</span>
<span>99</span>
<span>100</span>
<span>101</span>
<span>102</span>
<span>103</span>
<span>104</span>
<span>105</span>
<span>106</span>
<span>107</span>
<span>108</span>
<span>109</span>
<span>110</span>
<span>111</span>
<span>112</span>
<span>113</span>
<span>114</span>
<span>115</span>
<span>116</span>
<span>117</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>new(root: usize, graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph) -&gt; <span class="self">Self </span>{
        <span class="kw">let </span><span class="kw-2">mut </span>self_ = <span class="self">Self </span>{
            graph,
            eidx: <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">0</span>); graph.<span class="highlight focus">vertices_size</span>() - <span class="number">1</span>],
            par: <span class="macro">vec!</span>[usize::MAX; graph.<span class="highlight">vertices_size</span>()],
            epos: <span class="number">0</span>,
        };
        self_.edge_tour(root, usize::MAX);
        self_
    }
    <span class="kw">pub fn </span>length(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; usize {
        <span class="self">self</span>.epos
    }
    <span class="kw">fn </span>edge_tour(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, p: usize) {
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.adjacencies(u).filter(|a| a.to != p) {
            <span class="self">self</span>.par[a.to] = a.id;
            <span class="self">self</span>.eidx[a.id].<span class="number">0 </span>= <span class="self">self</span>.epos;
            <span class="self">self</span>.epos += <span class="number">1</span>;
            <span class="self">self</span>.edge_tour(a.to, u);
            <span class="self">self</span>.eidx[a.id].<span class="number">1 </span>= <span class="self">self</span>.epos;
            <span class="self">self</span>.epos += <span class="number">1</span>;
        }
    }
}

<span class="attr">#[codesnip::entry(<span class="string">&quot;EulerTourForVertex&quot;</span>, include(<span class="string">&quot;SparseGraph&quot;</span>))]
#[derive(Clone, Debug)]
</span><span class="kw">pub struct </span>EulerTourForVertex&lt;<span class="lifetime">&#39;a</span>&gt; {
    graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph,
    <span class="kw">pub </span>vidx: Vec&lt;(usize, usize)&gt;,
    vpos: usize,
}
<span class="attr">#[codesnip::entry(<span class="string">&quot;EulerTourForVertex&quot;</span>)]
</span><span class="kw">impl</span>&lt;<span class="lifetime">&#39;a</span>&gt; EulerTourForVertex&lt;<span class="lifetime">&#39;a</span>&gt; {
    <span class="kw">pub fn </span>new(graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph) -&gt; <span class="self">Self </span>{
        <span class="self">Self </span>{
            graph,
            vidx: <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">0</span>); graph.<span class="highlight">vertices_size</span>()],
            vpos: <span class="number">0</span>,
        }
    }
    <span class="kw">pub fn </span>length(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; usize {
        <span class="self">self</span>.vpos
    }
    <span class="kw">pub fn </span>subtree_vertex_tour(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, p: usize) {
        <span class="self">self</span>.vidx[u].<span class="number">0 </span>= <span class="self">self</span>.vpos;
        <span class="self">self</span>.vpos += <span class="number">1</span>;
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.adjacencies(u).filter(|a| a.to != p) {
            <span class="self">self</span>.subtree_vertex_tour(a.to, u);
        }
        <span class="self">self</span>.vidx[u].<span class="number">1 </span>= <span class="self">self</span>.vpos;
    }
    <span class="kw">pub fn </span>path_vertex_tour(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, p: usize) {
        <span class="self">self</span>.vidx[u].<span class="number">0 </span>= <span class="self">self</span>.vpos;
        <span class="self">self</span>.vpos += <span class="number">1</span>;
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.adjacencies(u).filter(|a| a.to != p) {
            <span class="self">self</span>.path_vertex_tour(a.to, u);
        }
        <span class="self">self</span>.vidx[u].<span class="number">1 </span>= <span class="self">self</span>.vpos;
        <span class="self">self</span>.vpos += <span class="number">1</span>;
    }
    <span class="kw">pub fn </span>subtree_query&lt;T, F: FnMut(usize, usize) -&gt; T&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, <span class="kw-2">mut </span>f: F) -&gt; T {
        <span class="kw">let </span>(l, r) = <span class="self">self</span>.vidx[u];
        f(l, r)
    }
    <span class="kw">pub fn </span>subtree_update&lt;T, F: FnMut(usize, T)&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, x: T, <span class="kw-2">mut </span>f: F) {
        <span class="kw">let </span>(l, _r) = <span class="self">self</span>.vidx[u];
        f(l, x);
    }
    <span class="kw">pub fn </span>path_query&lt;T, F: FnMut(usize, usize) -&gt; T&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, v: usize, <span class="kw-2">mut </span>f: F) -&gt; T {
        <span class="kw">let </span>(<span class="kw-2">mut </span>l, <span class="kw-2">mut </span>r) = (<span class="self">self</span>.vidx[u].<span class="number">0</span>, <span class="self">self</span>.vidx[v].<span class="number">0</span>);
        <span class="kw">if </span>l &gt; r {
            std::mem::swap(<span class="kw-2">&amp;mut </span>l, <span class="kw-2">&amp;mut </span>r);
        }
        f(l, r + <span class="number">1</span>)
    }
    <span class="kw">pub fn </span>path_update&lt;T, F: FnMut(usize, T)&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, x: T, invx: T, <span class="kw-2">mut </span>f: F) {
        <span class="kw">let </span>(l, r) = <span class="self">self</span>.vidx[u];
        f(l, x);
        f(r, invx);
    }
}

<span class="attr">#[codesnip::entry(<span class="string">&quot;EulerTourForRichVertex&quot;</span>, include(<span class="string">&quot;SparseGraph&quot;</span>))]
#[derive(Clone, Debug)]
</span><span class="kw">pub struct </span>EulerTourForRichVertex&lt;<span class="lifetime">&#39;a</span>&gt; {
    graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph,
    <span class="kw">pub </span>root: usize,
    <span class="kw">pub </span>vidx: Vec&lt;(usize, usize)&gt;,
    vtrace: Vec&lt;usize&gt;,
}
<span class="attr">#[codesnip::entry(<span class="string">&quot;EulerTourForRichVertex&quot;</span>)]
</span><span class="kw">impl</span>&lt;<span class="lifetime">&#39;a</span>&gt; EulerTourForRichVertex&lt;<span class="lifetime">&#39;a</span>&gt; {
    <span class="kw">pub fn </span>new(root: usize, graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph) -&gt; <span class="self">Self </span>{
        <span class="kw">let </span><span class="kw-2">mut </span>self_ = <span class="self">Self </span>{
            graph,
            root,
            vidx: <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">0</span>); graph.<span class="highlight">vertices_size</span>()],
            vtrace: <span class="macro">vec!</span>[],
        };
        self_.vertex_tour(root, usize::MAX);
        self_
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[1,1],&quot;../../src/competitive/tree/rerooting.rs.html#28&quot;,&quot;line 28&quot;],[[2,2],&quot;../../src/competitive/tree/rerooting.rs.html#29&quot;,&quot;line 29&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/rerooting.rs (<a href="../../src/competitive/tree/rerooting.rs.html#28">line 28</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>new(graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph, rooting: F) -&gt; <span class="self">Self </span>{
        <span class="kw">let </span>dp = <span class="macro">vec!</span>[M::unit(); graph.<span class="highlight focus">vertices_size</span>()];
        <span class="kw">let </span>ep = <span class="macro">vec!</span>[M::unit(); graph.<span class="highlight">vertices_size</span>() * <span class="number">2</span>];
        <span class="kw">let </span><span class="kw-2">mut </span>self_ = <span class="self">Self </span>{
            graph,
            dp,
            ep,
            rooting,
        };
        self_.rerooting();
        self_
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[2,2],&quot;../../src/competitive/tree/heavy_light_decomposition.rs.html#15&quot;,&quot;line 15&quot;],[[3,3],&quot;../../src/competitive/tree/heavy_light_decomposition.rs.html#16&quot;,&quot;line 16&quot;],[[4,4],&quot;../../src/competitive/tree/heavy_light_decomposition.rs.html#17&quot;,&quot;line 17&quot;],[[5,5],&quot;../../src/competitive/tree/heavy_light_decomposition.rs.html#18&quot;,&quot;line 18&quot;],[[43,43],&quot;../../src/competitive/tree/heavy_light_decomposition.rs.html#56&quot;,&quot;line 56&quot;],[[45,45],&quot;../../src/competitive/tree/heavy_light_decomposition.rs.html#58&quot;,&quot;line 58&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/heavy_light_decomposition.rs (<a href="../../src/competitive/tree/heavy_light_decomposition.rs.html#15">line 15</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
<span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
<span>58</span>
<span>59</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>new(root: usize, graph: <span class="kw-2">&amp;mut </span>UndirectedSparseGraph) -&gt; <span class="self">Self </span>{
        <span class="kw">let </span><span class="kw-2">mut </span>self_ = <span class="self">Self </span>{
            par: <span class="macro">vec!</span>[<span class="number">0</span>; graph.<span class="highlight focus">vertices_size</span>()],
            size: <span class="macro">vec!</span>[<span class="number">0</span>; graph.<span class="highlight">vertices_size</span>()],
            head: <span class="macro">vec!</span>[<span class="number">0</span>; graph.<span class="highlight">vertices_size</span>()],
            vidx: <span class="macro">vec!</span>[<span class="number">0</span>; graph.<span class="highlight">vertices_size</span>()],
        };
        self_.build(root, graph);
        self_
    }
    <span class="kw">fn </span>dfs_size(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, p: usize, graph: <span class="kw-2">&amp;mut </span>UndirectedSparseGraph) {
        <span class="self">self</span>.par[u] = p;
        <span class="self">self</span>.size[u] = <span class="number">1</span>;
        <span class="kw">let </span>base = graph.start[u];
        <span class="kw">if </span>graph.adjacencies(u).len() &gt; <span class="number">1 </span>&amp;&amp; graph.adjacencies(u).next().unwrap().to == p {
            graph.elist.swap(base, base + <span class="number">1</span>);
        }
        <span class="kw">for </span>i <span class="kw">in </span>base..graph.start[u + <span class="number">1</span>] {
            <span class="kw">let </span>a = graph.elist[i];
            <span class="kw">if </span>a.to != p {
                <span class="self">self</span>.dfs_size(a.to, u, graph);
                <span class="self">self</span>.size[u] += <span class="self">self</span>.size[a.to];
                <span class="kw">if </span><span class="self">self</span>.size[graph.elist[base].to] &lt; <span class="self">self</span>.size[a.to] {
                    graph.elist.swap(base, i);
                }
            }
        }
    }
    <span class="kw">fn </span>dfs_hld(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, p: usize, t: <span class="kw-2">&amp;mut </span>usize, graph: <span class="kw-2">&amp;</span>UndirectedSparseGraph) {
        <span class="self">self</span>.vidx[u] = <span class="kw-2">*</span>t;
        <span class="kw-2">*</span>t += <span class="number">1</span>;
        <span class="kw">let </span><span class="kw-2">mut </span>adjacencies = graph.adjacencies(u).filter(|a| a.to != p);
        <span class="kw">if let </span><span class="prelude-val">Some</span>(a) = adjacencies.next() {
            <span class="self">self</span>.head[a.to] = <span class="self">self</span>.head[u];
            <span class="self">self</span>.dfs_hld(a.to, u, t, graph);
        }
        <span class="kw">for </span>a <span class="kw">in </span>adjacencies {
            <span class="self">self</span>.head[a.to] = a.to;
            <span class="self">self</span>.dfs_hld(a.to, u, t, graph);
        }
    }
    <span class="kw">fn </span>build(<span class="kw-2">&amp;mut </span><span class="self">self</span>, root: usize, graph: <span class="kw-2">&amp;mut </span>UndirectedSparseGraph) {
        <span class="self">self</span>.head[root] = root;
        <span class="self">self</span>.dfs_size(root, graph.<span class="highlight">vertices_size</span>(), graph);
        <span class="kw">let </span><span class="kw-2">mut </span>t = <span class="number">0</span>;
        <span class="self">self</span>.dfs_hld(root, graph.<span class="highlight">vertices_size</span>(), <span class="kw-2">&amp;mut </span>t, graph);
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[3,3],&quot;../../src/competitive/graph/low_link.rs.html#14&quot;,&quot;line 14&quot;],[[4,4],&quot;../../src/competitive/graph/low_link.rs.html#15&quot;,&quot;line 15&quot;],[[10,10],&quot;../../src/competitive/graph/low_link.rs.html#21&quot;,&quot;line 21&quot;],[[26,26],&quot;../../src/competitive/graph/low_link.rs.html#37&quot;,&quot;line 37&quot;],[[34,34],&quot;../../src/competitive/graph/low_link.rs.html#45&quot;,&quot;line 45&quot;]]"><div class="scraped-example-title">crates/competitive/src/graph/low_link.rs (<a href="../../src/competitive/graph/low_link.rs.html#14">line 14</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>new(graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph) -&gt; <span class="self">Self </span>{
        <span class="kw">let </span><span class="kw-2">mut </span>self_ = <span class="self">Self </span>{
            graph,
            low: <span class="macro">vec!</span>[<span class="number">0</span>; graph.<span class="highlight focus">vertices_size</span>()],
            ord: <span class="macro">vec!</span>[usize::MAX; graph.<span class="highlight">vertices_size</span>()],
            articulation: <span class="macro">vec!</span>[],
            bridge: <span class="macro">vec!</span>[],
        };
        <span class="kw">for </span>u <span class="kw">in </span>graph.vertices() {
            <span class="kw">if </span>self_.ord[u] == usize::MAX {
                self_.dfs(u, graph.<span class="highlight">vertices_size</span>(), <span class="kw-2">&amp;mut </span><span class="number">0</span>);
            }
        }
        self_
    }
    <span class="kw">fn </span>dfs(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, p: usize, now_ord: <span class="kw-2">&amp;mut </span>usize) {
        <span class="self">self</span>.low[u] = <span class="kw-2">*</span>now_ord;
        <span class="self">self</span>.ord[u] = <span class="kw-2">*</span>now_ord;
        <span class="kw-2">*</span>now_ord += <span class="number">1</span>;
        <span class="kw">let </span><span class="kw-2">mut </span>is_articulation = <span class="bool-val">false</span>;
        <span class="kw">let </span><span class="kw-2">mut </span>cnt = <span class="number">0</span>;
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.adjacencies(u) {
            <span class="kw">if </span><span class="self">self</span>.ord[a.to] == usize::MAX {
                cnt += <span class="number">1</span>;
                <span class="self">self</span>.dfs(a.to, u, now_ord);
                <span class="self">self</span>.low[u] = <span class="self">self</span>.low[u].min(<span class="self">self</span>.low[a.to]);
                is_articulation |= p &lt; <span class="self">self</span>.graph.<span class="highlight">vertices_size</span>() &amp;&amp; <span class="self">self</span>.ord[u] &lt;= <span class="self">self</span>.low[a.to];
                <span class="kw">if </span><span class="self">self</span>.ord[u] &lt; <span class="self">self</span>.low[a.to] {
                    <span class="self">self</span>.bridge.push((u.min(a.to), u.max(a.to)));
                }
            } <span class="kw">else if </span>a.to != p {
                <span class="self">self</span>.low[u] = <span class="self">self</span>.low[u].min(<span class="self">self</span>.ord[a.to]);
            }
        }
        is_articulation |= p == <span class="self">self</span>.graph.<span class="highlight">vertices_size</span>() &amp;&amp; cnt &gt; <span class="number">1</span>;
        <span class="kw">if </span>is_articulation {
            <span class="self">self</span>.articulation.push(u);
        }
    }</code></pre></div></div></div><div class="example-links">Additional examples can be found in:<br><ul><li><a href="../../src/competitive/tree/tree_order.rs.html#7">crates/competitive/src/tree/tree_order.rs</a></li><li><a href="../../src/competitive/graph/order.rs.html#6">crates/competitive/src/graph/order.rs</a></li><li><a href="../../src/competitive/graph/strongly_connected_component.rs.html#24">crates/competitive/src/graph/strongly_connected_component.rs</a></li><li><a href="../../src/competitive/graph/topological_sort.rs.html#5">crates/competitive/src/graph/topological_sort.rs</a></li><li><a href="../../src/competitive/graph/maximum_flow.rs.html#62">crates/competitive/src/graph/maximum_flow.rs</a></li><li><a href="../../src/competitive/graph/minimum_cost_flow.rs.html#78">crates/competitive/src/graph/minimum_cost_flow.rs</a></li><li><a href="../../src/competitive/tree/tree_center.rs.html#13">crates/competitive/src/tree/tree_center.rs</a></li></ul></div></div></details></div></details><details class="toggle method-toggle" open><summary><section id="method.edges_size" class="method"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#43-45">source</a><h4 class="code-header">pub fn <a href="#method.edges_size" class="fn">edges_size</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Return the number of edges.</p>
</div><div class="docblock scraped-example-list"><span></span><h5 id="scraped-examples-4"><a href="#scraped-examples-4">Examples found in repository</a><a class="scrape-help" href="../../scrape-examples-help.html">?</a></h5><div class="scraped-example expanded" data-locs="[[[1,1],&quot;../../src/competitive/tree/rerooting.rs.html#41&quot;,&quot;line 41&quot;],[[5,5],&quot;../../src/competitive/tree/rerooting.rs.html#45&quot;,&quot;line 45&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/rerooting.rs (<a href="../../src/competitive/tree/rerooting.rs.html#41">line 41</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
</pre></div><pre class="rust"><code>    <span class="kw">fn </span>eidx(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, a: <span class="kw-2">&amp;</span>Adjacency) -&gt; usize {
        a.id + <span class="self">self</span>.graph.<span class="highlight focus">edges_size</span>() * (u &gt; a.to) <span class="kw">as </span>usize
    }
    <span class="attr">#[inline]
    </span><span class="kw">fn </span>reidx(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, a: <span class="kw-2">&amp;</span>Adjacency) -&gt; usize {
        a.id + <span class="self">self</span>.graph.<span class="highlight">edges_size</span>() * (u &lt; a.to) <span class="kw">as </span>usize
    }</code></pre></div></div></div><details class="toggle more-examples-toggle"><summary class="hideme"><span>More examples</span></summary><div class="hide-more">Hide additional examples</div><div class="more-scraped-examples"><div class="toggle-line"><div class="toggle-line-inner"></div></div><div class="scraped-example " data-locs="[[[2,2],&quot;../../src/competitive/graph/order.rs.html#48&quot;,&quot;line 48&quot;]]"><div class="scraped-example-title">crates/competitive/src/graph/order.rs (<a href="../../src/competitive/graph/order.rs.html#48">line 48</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
<span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
<span>58</span>
<span>59</span>
<span>60</span>
<span>61</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>dfs_tree(<span class="kw-2">&amp;</span><span class="self">self</span>, root: usize) -&gt; Vec&lt;bool&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>visited = <span class="macro">vec!</span>[<span class="bool-val">false</span>; <span class="self">self</span>.vertices_size()];
        <span class="kw">let </span><span class="kw-2">mut </span>used = <span class="macro">vec!</span>[<span class="bool-val">false</span>; <span class="self">self</span>.<span class="highlight focus">edges_size</span>()];
        visited[root] = <span class="bool-val">true</span>;
        <span class="kw">let </span><span class="kw-2">mut </span>stack = <span class="macro">vec!</span>[root];
        <span class="kw">while let </span><span class="prelude-val">Some</span>(u) = stack.pop() {
            <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.adjacencies(u).rev() {
                <span class="kw">if </span>!visited[a.to] {
                    visited[a.to] = <span class="bool-val">true</span>;
                    used[a.id] = <span class="bool-val">true</span>;
                    stack.push(a.to);
                }
            }
        }
        used
    }</code></pre></div></div></div></div></details></div></details><details class="toggle method-toggle" open><summary><section id="method.vertices" class="method"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#47-49">source</a><h4 class="code-header">pub fn <a href="#method.vertices" class="fn">vertices</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/ops/range/struct.Range.html" title="struct core::ops::range::Range">Range</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class="docblock"><p>Return an iterator over graph vertices.</p>
</div><div class="docblock scraped-example-list"><span></span><h5 id="scraped-examples-5"><a href="#scraped-examples-5">Examples found in repository</a><a class="scrape-help" href="../../scrape-examples-help.html">?</a></h5><div class="scraped-example " data-locs="[[[8,8],&quot;../../src/competitive/graph/low_link.rs.html#19&quot;,&quot;line 19&quot;]]"><div class="scraped-example-title">crates/competitive/src/graph/low_link.rs (<a href="../../src/competitive/graph/low_link.rs.html#19">line 19</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>new(graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph) -&gt; <span class="self">Self </span>{
        <span class="kw">let </span><span class="kw-2">mut </span>self_ = <span class="self">Self </span>{
            graph,
            low: <span class="macro">vec!</span>[<span class="number">0</span>; graph.vertices_size()],
            ord: <span class="macro">vec!</span>[usize::MAX; graph.vertices_size()],
            articulation: <span class="macro">vec!</span>[],
            bridge: <span class="macro">vec!</span>[],
        };
        <span class="kw">for </span>u <span class="kw">in </span>graph.<span class="highlight focus">vertices</span>() {
            <span class="kw">if </span>self_.ord[u] == usize::MAX {
                self_.dfs(u, graph.vertices_size(), <span class="kw-2">&amp;mut </span><span class="number">0</span>);
            }
        }
        self_
    }</code></pre></div></div></div><details class="toggle more-examples-toggle"><summary class="hideme"><span>More examples</span></summary><div class="hide-more">Hide additional examples</div><div class="more-scraped-examples"><div class="toggle-line"><div class="toggle-line-inner"></div></div><div class="scraped-example " data-locs="[[[5,5],&quot;../../src/aizu_online_judge/grl/grl_1_a.rs.html#15&quot;,&quot;line 15&quot;],[[20,20],&quot;../../src/aizu_online_judge/grl/grl_1_a.rs.html#30&quot;,&quot;line 30&quot;]]"><div class="scraped-example-title">crates/aizu_online_judge/src/grl/grl_1_a.rs (<a href="../../src/aizu_online_judge/grl/grl_1_a.rs.html#15">line 15</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button><span class="kw">pub fn </span>grl_1_a(reader: <span class="kw">impl </span>Read, <span class="kw-2">mut </span>writer: <span class="kw">impl </span>Write) {
    <span class="kw">let </span>s = read_all_unchecked(reader);
    <span class="kw">let </span><span class="kw-2">mut </span>scanner = Scanner::new(<span class="kw-2">&amp;</span>s);
    <span class="macro">scan!</span>(scanner, vs, es, r, (graph, d): @DirectedGraphScanner::&lt;usize, u64&gt;::new(vs, es));
    <span class="kw">let </span>cost = graph.dijkstra_ss::&lt;StandardSp&lt;AdditiveOperation&lt;<span class="kw">_</span>&gt;&gt;, <span class="kw">_</span>&gt;(r, <span class="kw-2">&amp;</span>d);
    <span class="kw">for </span>u <span class="kw">in </span>graph.<span class="highlight focus">vertices</span>() {
        <span class="kw">if </span>cost[u].is_maximum() {
            <span class="macro">writeln!</span>(writer, <span class="string">&quot;INF&quot;</span>).ok();
        } <span class="kw">else </span>{
            <span class="macro">writeln!</span>(writer, <span class="string">&quot;{}&quot;</span>, cost[u]).ok();
        }
    }
}

<span class="attr">#[verify::aizu_online_judge(<span class="string">&quot;GRL_1_A&quot;</span>)]
</span><span class="kw">pub fn </span>grl_1_a_option(reader: <span class="kw">impl </span>Read, <span class="kw-2">mut </span>writer: <span class="kw">impl </span>Write) {
    <span class="kw">let </span>s = read_all_unchecked(reader);
    <span class="kw">let </span><span class="kw-2">mut </span>scanner = Scanner::new(<span class="kw-2">&amp;</span>s);
    <span class="macro">scan!</span>(scanner, vs, es, r, (graph, d): @DirectedGraphScanner::&lt;usize, u64&gt;::new(vs, es));
    <span class="kw">let </span>cost = graph.dijkstra_ss::&lt;OptionSp&lt;AdditiveOperation&lt;<span class="kw">_</span>&gt;&gt;, <span class="kw">_</span>&gt;(r, <span class="kw-2">&amp;</span>|eid| <span class="prelude-val">Some</span>(d[eid]));
    <span class="kw">for </span>u <span class="kw">in </span>graph.<span class="highlight">vertices</span>() {
        <span class="kw">match </span>cost[u] {
            <span class="prelude-val">Some</span>(d) =&gt; <span class="macro">writeln!</span>(writer, <span class="string">&quot;{}&quot;</span>, d).ok(),
            <span class="prelude-val">None </span>=&gt; <span class="macro">writeln!</span>(writer, <span class="string">&quot;INF&quot;</span>).ok(),
        };
    }
}</code></pre></div></div></div><div class="scraped-example " data-locs="[[[9,9],&quot;../../src/competitive/graph/graphvis.rs.html#14&quot;,&quot;line 14&quot;],[[12,12],&quot;../../src/competitive/graph/graphvis.rs.html#17&quot;,&quot;line 17&quot;],[[32,32],&quot;../../src/competitive/graph/graphvis.rs.html#37&quot;,&quot;line 37&quot;],[[53,53],&quot;../../src/competitive/graph/graphvis.rs.html#58&quot;,&quot;line 58&quot;],[[56,56],&quot;../../src/competitive/graph/graphvis.rs.html#61&quot;,&quot;line 61&quot;]]"><div class="scraped-example-title">crates/competitive/src/graph/graphvis.rs (<a href="../../src/competitive/graph/graphvis.rs.html#14">line 14</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>5</span>
<span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
<span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
<span>58</span>
<span>59</span>
<span>60</span>
<span>61</span>
<span>62</span>
<span>63</span>
<span>64</span>
<span>65</span>
<span>66</span>
<span>67</span>
<span>68</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>to_graphvis&lt;N, NA, E, EA&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, node_attr: N, edge_attr: E) -&gt; String
    <span class="kw">where
        </span>N: Fn(usize) -&gt; NA,
        E: Fn(usize) -&gt; EA,
        NA: Display,
        EA: Display,
    {
        <span class="kw">let </span><span class="kw-2">mut </span>s = String::new();
        s.push_str(<span class="string">&quot;digraph G {\n    graph [ splines=false, layout=neato ];\n&quot;</span>);
        <span class="kw">for </span>u <span class="kw">in </span><span class="self">self</span>.<span class="highlight focus">vertices</span>() {
            <span class="macro">writeln!</span>(s, <span class="string">&quot;    {} [{}];&quot;</span>, u, node_attr(u)).ok();
        }
        <span class="kw">for </span>u <span class="kw">in </span><span class="self">self</span>.<span class="highlight">vertices</span>() {
            <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.adjacencies(u) {
                <span class="macro">writeln!</span>(s, <span class="string">&quot;    {} -&gt; {} [{}];&quot;</span>, u, a.to, edge_attr(a.id)).ok();
            }
        }
        s.push(<span class="string">&#39;}&#39;</span>);
        s
    }
}

<span class="kw">impl </span>UndirectedSparseGraph {
    <span class="kw">pub fn </span>to_graphvis&lt;N, NA, E, EA&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, node_attr: N, edge_attr: E) -&gt; String
    <span class="kw">where
        </span>N: Fn(usize) -&gt; NA,
        E: Fn(usize) -&gt; EA,
        NA: Display,
        EA: Display,
    {
        <span class="kw">let </span><span class="kw-2">mut </span>s = String::new();
        s.push_str(<span class="string">&quot;graph G {\n    graph [ splines=false, layout=neato ];\n&quot;</span>);
        <span class="kw">for </span>u <span class="kw">in </span><span class="self">self</span>.<span class="highlight">vertices</span>() {
            <span class="macro">writeln!</span>(s, <span class="string">&quot;    {} [{}];&quot;</span>, u, node_attr(u)).ok();
        }
        <span class="kw">for </span>(i, (u, v)) <span class="kw">in </span><span class="self">self</span>.edges.iter().cloned().enumerate() {
            <span class="macro">writeln!</span>(s, <span class="string">&quot;    {} -- {} [{}];&quot;</span>, u, v, edge_attr(i)).ok();
        }
        s.push(<span class="string">&#39;}&#39;</span>);
        s
    }
}

<span class="kw">impl </span>BidirectionalSparseGraph {
    <span class="kw">pub fn </span>to_graphvis&lt;N, NA, E, EA&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, node_attr: N, edge_attr: E) -&gt; String
    <span class="kw">where
        </span>N: Fn(usize) -&gt; NA,
        E: Fn(usize) -&gt; EA,
        NA: Display,
        EA: Display,
    {
        <span class="kw">let </span><span class="kw-2">mut </span>s = String::new();
        s.push_str(<span class="string">&quot;digraph G {\n    graph [ splines=false, layout=neato ];\n&quot;</span>);
        <span class="kw">for </span>u <span class="kw">in </span><span class="self">self</span>.<span class="highlight">vertices</span>() {
            <span class="macro">writeln!</span>(s, <span class="string">&quot;    {} [{}];&quot;</span>, u, node_attr(u)).ok();
        }
        <span class="kw">for </span>u <span class="kw">in </span><span class="self">self</span>.<span class="highlight">vertices</span>() {
            <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.adjacencies(u) {
                <span class="macro">writeln!</span>(s, <span class="string">&quot;    {} -&gt; {} [{}];&quot;</span>, u, a.to, edge_attr(a.id)).ok();
            }
        }
        s.push(<span class="string">&#39;}&#39;</span>);
        s
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[10,10],&quot;../../src/competitive/graph/strongly_connected_component.rs.html#29&quot;,&quot;line 29&quot;],[[49,49],&quot;../../src/competitive/graph/strongly_connected_component.rs.html#68&quot;,&quot;line 68&quot;],[[71,71],&quot;../../src/competitive/graph/strongly_connected_component.rs.html#90&quot;,&quot;line 90&quot;]]"><div class="scraped-example-title">crates/competitive/src/graph/strongly_connected_component.rs (<a href="../../src/competitive/graph/strongly_connected_component.rs.html#29">line 29</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
<span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
<span>58</span>
<span>59</span>
<span>60</span>
<span>61</span>
<span>62</span>
<span>63</span>
<span>64</span>
<span>65</span>
<span>66</span>
<span>67</span>
<span>68</span>
<span>69</span>
<span>70</span>
<span>71</span>
<span>72</span>
<span>73</span>
<span>74</span>
<span>75</span>
<span>76</span>
<span>77</span>
<span>78</span>
<span>79</span>
<span>80</span>
<span>81</span>
<span>82</span>
<span>83</span>
<span>84</span>
<span>85</span>
<span>86</span>
<span>87</span>
<span>88</span>
<span>89</span>
<span>90</span>
<span>91</span>
<span>92</span>
<span>93</span>
<span>94</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>new(graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>DirectedSparseGraph) -&gt; <span class="self">Self </span>{
        <span class="kw">let </span><span class="kw-2">mut </span>now_ord = <span class="number">0</span>;
        <span class="kw">let </span><span class="kw-2">mut </span>self_ = <span class="self">Self </span>{
            graph,
            csize: <span class="number">0</span>,
            visited: Vec::with_capacity(graph.vertices_size()),
            low: <span class="macro">vec!</span>[<span class="number">0</span>; graph.vertices_size()],
            ord: <span class="macro">vec!</span>[usize::MAX; graph.vertices_size()],
            comp: <span class="macro">vec!</span>[<span class="number">0</span>; graph.vertices_size()],
        };
        <span class="kw">for </span>u <span class="kw">in </span>graph.<span class="highlight focus">vertices</span>() {
            <span class="kw">if </span>self_.ord[u] == usize::MAX {
                self_.dfs(u, <span class="kw-2">&amp;mut </span>now_ord);
            }
        }
        <span class="kw">for </span>x <span class="kw">in </span>self_.comp.iter_mut() {
            <span class="kw-2">*</span>x = self_.csize - <span class="number">1 </span>- <span class="kw-2">*</span>x;
        }
        self_
    }
}
<span class="kw">impl </span>StronglyConnectedComponent&lt;<span class="lifetime">&#39;_</span>&gt; {
    <span class="kw">fn </span>dfs(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, now_ord: <span class="kw-2">&amp;mut </span>usize) {
        <span class="self">self</span>.low[u] = <span class="kw-2">*</span>now_ord;
        <span class="self">self</span>.ord[u] = <span class="kw-2">*</span>now_ord;
        <span class="kw-2">*</span>now_ord += <span class="number">1</span>;
        <span class="self">self</span>.visited.push(u);
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.adjacencies(u) {
            <span class="kw">if </span><span class="self">self</span>.ord[a.to] == usize::MAX {
                <span class="self">self</span>.dfs(a.to, now_ord);
                <span class="self">self</span>.low[u] = <span class="self">self</span>.low[u].min(<span class="self">self</span>.low[a.to]);
            } <span class="kw">else </span>{
                <span class="self">self</span>.low[u] = <span class="self">self</span>.low[u].min(<span class="self">self</span>.ord[a.to]);
            }
        }
        <span class="kw">if </span><span class="self">self</span>.low[u] == <span class="self">self</span>.ord[u] {
            <span class="kw">while let </span><span class="prelude-val">Some</span>(v) = <span class="self">self</span>.visited.pop() {
                <span class="self">self</span>.ord[v] = <span class="self">self</span>.graph.vertices_size();
                <span class="self">self</span>.comp[v] = <span class="self">self</span>.csize;
                <span class="kw">if </span>v == u {
                    <span class="kw">break</span>;
                }
            }
            <span class="self">self</span>.csize += <span class="number">1</span>;
        }
    }
    <span class="kw">pub fn </span>gen_cgraph(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; DirectedSparseGraph {
        <span class="kw">let </span><span class="kw-2">mut </span>used = std::collections::HashSet::new();
        <span class="kw">let </span><span class="kw-2">mut </span>edges = <span class="macro">vec!</span>[];
        <span class="kw">for </span>u <span class="kw">in </span><span class="self">self</span>.graph.<span class="highlight">vertices</span>() {
            <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.adjacencies(u) {
                <span class="kw">if </span><span class="self">self</span>.comp[u] != <span class="self">self</span>.comp[a.to] {
                    <span class="kw">let </span>(x, y) = (<span class="self">self</span>.comp[u], <span class="self">self</span>.comp[a.to]);
                    <span class="kw">if </span>!used.contains(<span class="kw-2">&amp;</span>(x, y)) {
                        used.insert((x, y));
                        edges.push((x, y));
                    }
                }
            }
        }
        DirectedSparseGraph::from_edges(<span class="self">self</span>.size(), edges)
    }
    <span class="kw">pub fn </span>components(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; Vec&lt;Vec&lt;usize&gt;&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>counts = <span class="macro">vec!</span>[<span class="number">0</span>; <span class="self">self</span>.size()];
        <span class="kw">for </span><span class="kw-2">&amp;</span>x <span class="kw">in </span><span class="self">self</span>.comp.iter() {
            counts[x] += <span class="number">1</span>;
        }
        <span class="kw">let </span><span class="kw-2">mut </span>groups = <span class="macro">vec!</span>[<span class="macro">vec!</span>[]; <span class="self">self</span>.size()];
        <span class="kw">for </span>(g, c) <span class="kw">in </span>groups.iter_mut().zip(counts.into_iter()) {
            g.reserve(c);
        }
        <span class="kw">for </span>u <span class="kw">in </span><span class="self">self</span>.graph.<span class="highlight">vertices</span>() {
            groups[<span class="self">self</span>[u]].push(u);
        }
        groups
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[7,7],&quot;../../src/aizu_online_judge/grl/grl_1_b.rs.html#16&quot;,&quot;line 16&quot;]]"><div class="scraped-example-title">crates/aizu_online_judge/src/grl/grl_1_b.rs (<a href="../../src/aizu_online_judge/grl/grl_1_b.rs.html#16">line 16</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button><span class="kw">pub fn </span>grl_1_b(reader: <span class="kw">impl </span>Read, <span class="kw-2">mut </span>writer: <span class="kw">impl </span>Write) {
    <span class="kw">let </span>s = read_all_unchecked(reader);
    <span class="kw">let </span><span class="kw-2">mut </span>scanner = Scanner::new(<span class="kw-2">&amp;</span>s);
    <span class="macro">scan!</span>(scanner, vs, es, r, (graph, d): @DirectedGraphScanner::&lt;usize, i64&gt;::new(vs, es));
    <span class="kw">let </span>cost =
        graph.bellman_ford_ss::&lt;OptionSp&lt;AdditiveOperation&lt;<span class="kw">_</span>&gt;&gt;, <span class="kw">_</span>&gt;(r, <span class="kw-2">&amp;</span>|eid| <span class="prelude-val">Some</span>(d[eid]), <span class="bool-val">true</span>);
    <span class="kw">if let </span><span class="prelude-val">Some</span>(cost) = cost {
        <span class="kw">for </span>u <span class="kw">in </span>graph.<span class="highlight focus">vertices</span>() {
            <span class="kw">match </span>cost[u] {
                <span class="prelude-val">Some</span>(d) =&gt; <span class="macro">writeln!</span>(writer, <span class="string">&quot;{}&quot;</span>, d).ok(),
                <span class="prelude-val">None </span>=&gt; <span class="macro">writeln!</span>(writer, <span class="string">&quot;INF&quot;</span>).ok(),
            };
        }
    } <span class="kw">else </span>{
        <span class="macro">writeln!</span>(writer, <span class="string">&quot;NEGATIVE CYCLE&quot;</span>).ok();
    }
}</code></pre></div></div></div><div class="scraped-example " data-locs="[[[3,3],&quot;../../src/competitive/graph/topological_sort.rs.html#7&quot;,&quot;line 7&quot;],[[7,7],&quot;../../src/competitive/graph/topological_sort.rs.html#11&quot;,&quot;line 11&quot;]]"><div class="scraped-example-title">crates/competitive/src/graph/topological_sort.rs (<a href="../../src/competitive/graph/topological_sort.rs.html#7">line 7</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>4</span>
<span>5</span>
<span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>topological_sort(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; Vec&lt;usize&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>indeg = <span class="macro">vec!</span>[<span class="number">0</span>; <span class="self">self</span>.vertices_size()];
        <span class="kw">let </span><span class="kw-2">mut </span>res = <span class="macro">vec!</span>[];
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.<span class="highlight focus">vertices</span>().flat_map(|u| <span class="self">self</span>.adjacencies(u)) {
            indeg[a.to] += <span class="number">1</span>;
        }
        <span class="kw">let </span><span class="kw-2">mut </span>stack = <span class="self">self
            </span>.<span class="highlight">vertices</span>()
            .filter(|<span class="kw-2">&amp;</span>u| indeg[u] == <span class="number">0</span>)
            .collect::&lt;Vec&lt;<span class="kw">_</span>&gt;&gt;();
        <span class="kw">while let </span><span class="prelude-val">Some</span>(u) = stack.pop() {
            res.push(u);
            <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.adjacencies(u) {
                indeg[a.to] -= <span class="number">1</span>;
                <span class="kw">if </span>indeg[a.to] == <span class="number">0 </span>{
                    stack.push(a.to);
                }
            }
        }
        res
    }</code></pre></div></div></div><div class="example-links">Additional examples can be found in:<br><ul><li><a href="../../src/competitive/graph/minimum_cost_flow.rs.html#82">crates/competitive/src/graph/minimum_cost_flow.rs</a></li><li><a href="../../src/aizu_online_judge/grl/grl_1_c.rs.html#16">crates/aizu_online_judge/src/grl/grl_1_c.rs</a></li><li><a href="../../src/competitive/graph/order.rs.html#73">crates/competitive/src/graph/order.rs</a></li><li><a href="../../src/competitive/tree/tree_center.rs.html#16">crates/competitive/src/tree/tree_center.rs</a></li></ul></div></div></details></div></details><details class="toggle method-toggle" open><summary><section id="method.adjacencies" class="method"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#51-53">source</a><h4 class="code-header">pub fn <a href="#method.adjacencies" class="fn">adjacencies</a>(&amp;self, v: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/slice/iter/struct.Iter.html" title="struct core::slice::iter::Iter">Iter</a>&lt;'_, <a class="struct" href="struct.Adjacency.html" title="struct competitive::graph::Adjacency">Adjacency</a>&gt;</h4></section></summary><div class="docblock"><p>Return a slice of adjacency vertices.</p>
</div><div class="docblock scraped-example-list"><span></span><h5 id="scraped-examples-6"><a href="#scraped-examples-6">Examples found in repository</a><a class="scrape-help" href="../../scrape-examples-help.html">?</a></h5><div class="scraped-example " data-locs="[[[2,2],&quot;../../src/competitive/tree/depth.rs.html#8&quot;,&quot;line 8&quot;],[[26,26],&quot;../../src/competitive/tree/depth.rs.html#32&quot;,&quot;line 32&quot;],[[47,47],&quot;../../src/competitive/tree/depth.rs.html#53&quot;,&quot;line 53&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/depth.rs (<a href="../../src/competitive/tree/depth.rs.html#8">line 8</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
<span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">fn </span>depth_dfs(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, p: usize, d: u64, depth: <span class="kw-2">&amp;mut </span>Vec&lt;u64&gt;) {
        depth[u] = d;
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.<span class="highlight focus">adjacencies</span>(u).filter(|a| a.to != p) {
            <span class="self">self</span>.depth_dfs(a.to, u, d + <span class="number">1</span>, depth);
        }
    }
    <span class="kw">pub fn </span>tree_depth(<span class="kw-2">&amp;</span><span class="self">self</span>, root: usize) -&gt; Vec&lt;u64&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>depth = <span class="macro">vec!</span>[<span class="number">0</span>; <span class="self">self</span>.vertices_size()];
        <span class="self">self</span>.depth_dfs(root, <span class="self">self</span>.vertices_size(), <span class="number">0</span>, <span class="kw-2">&amp;mut </span>depth);
        depth
    }
}

<span class="attr">#[codesnip::entry(<span class="string">&quot;weighted_tree_depth&quot;</span>, include(<span class="string">&quot;algebra&quot;</span>, <span class="string">&quot;SparseGraph&quot;</span>))]
</span><span class="kw">impl </span>UndirectedSparseGraph {
    <span class="kw">fn </span>weighted_depth_dfs&lt;M, F&gt;(
        <span class="kw-2">&amp;</span><span class="self">self</span>,
        u: usize,
        p: usize,
        d: M::T,
        depth: <span class="kw-2">&amp;mut </span>Vec&lt;M::T&gt;,
        weight: <span class="kw-2">&amp;</span>F,
    ) <span class="kw">where
        </span>M: Monoid,
        F: Fn(usize) -&gt; M::T,
    {
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.<span class="highlight">adjacencies</span>(u).filter(|a| a.to != p) {
            <span class="kw">let </span>nd = M::operate(<span class="kw-2">&amp;</span>d, <span class="kw-2">&amp;</span>weight(a.id));
            <span class="self">self</span>.weighted_depth_dfs::&lt;M, <span class="kw">_</span>&gt;(a.to, u, nd, depth, weight);
        }
        depth[u] = d;
    }
    <span class="kw">pub fn </span>weighted_tree_depth&lt;M: Monoid, F: Fn(usize) -&gt; M::T&gt;(
        <span class="kw-2">&amp;</span><span class="self">self</span>,
        root: usize,
        weight: F,
    ) -&gt; Vec&lt;M::T&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>depth = <span class="macro">vec!</span>[M::unit(); <span class="self">self</span>.vertices_size()];
        <span class="self">self</span>.weighted_depth_dfs::&lt;M, <span class="kw">_</span>&gt;(root, usize::MAX, M::unit(), <span class="kw-2">&amp;mut </span>depth, <span class="kw-2">&amp;</span>weight);
        depth
    }
}

<span class="attr">#[codesnip::entry(<span class="string">&quot;tree_size&quot;</span>, include(<span class="string">&quot;SparseGraph&quot;</span>))]
</span><span class="kw">impl </span>UndirectedSparseGraph {
    <span class="kw">fn </span>size_dfs(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, p: usize, size: <span class="kw-2">&amp;mut </span>Vec&lt;u64&gt;) {
        size[u] = <span class="number">1</span>;
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.<span class="highlight">adjacencies</span>(u).filter(|a| a.to != p) {
            <span class="self">self</span>.size_dfs(a.to, u, size);
            size[u] += size[a.to];
        }
    }</code></pre></div></div></div><details class="toggle more-examples-toggle"><summary class="hideme"><span>More examples</span></summary><div class="hide-more">Hide additional examples</div><div class="more-scraped-examples"><div class="toggle-line"><div class="toggle-line-inner"></div></div><div class="scraped-example " data-locs="[[[1,1],&quot;../../src/competitive/tree/euler_tour.rs.html#29&quot;,&quot;line 29&quot;],[[34,34],&quot;../../src/competitive/tree/euler_tour.rs.html#62&quot;,&quot;line 62&quot;],[[42,42],&quot;../../src/competitive/tree/euler_tour.rs.html#70&quot;,&quot;line 70&quot;],[[96,96],&quot;../../src/competitive/tree/euler_tour.rs.html#124&quot;,&quot;line 124&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/euler_tour.rs (<a href="../../src/competitive/tree/euler_tour.rs.html#29">line 29</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
<span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
<span>58</span>
<span>59</span>
<span>60</span>
<span>61</span>
<span>62</span>
<span>63</span>
<span>64</span>
<span>65</span>
<span>66</span>
<span>67</span>
<span>68</span>
<span>69</span>
<span>70</span>
<span>71</span>
<span>72</span>
<span>73</span>
<span>74</span>
<span>75</span>
<span>76</span>
<span>77</span>
<span>78</span>
<span>79</span>
<span>80</span>
<span>81</span>
<span>82</span>
<span>83</span>
<span>84</span>
<span>85</span>
<span>86</span>
<span>87</span>
<span>88</span>
<span>89</span>
<span>90</span>
<span>91</span>
<span>92</span>
<span>93</span>
<span>94</span>
<span>95</span>
<span>96</span>
<span>97</span>
<span>98</span>
<span>99</span>
<span>100</span>
<span>101</span>
<span>102</span>
<span>103</span>
<span>104</span>
<span>105</span>
<span>106</span>
<span>107</span>
<span>108</span>
<span>109</span>
<span>110</span>
<span>111</span>
<span>112</span>
<span>113</span>
<span>114</span>
<span>115</span>
<span>116</span>
<span>117</span>
<span>118</span>
<span>119</span>
<span>120</span>
<span>121</span>
<span>122</span>
<span>123</span>
<span>124</span>
<span>125</span>
<span>126</span>
<span>127</span>
<span>128</span>
<span>129</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">fn </span>edge_tour(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, p: usize) {
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.<span class="highlight focus">adjacencies</span>(u).filter(|a| a.to != p) {
            <span class="self">self</span>.par[a.to] = a.id;
            <span class="self">self</span>.eidx[a.id].<span class="number">0 </span>= <span class="self">self</span>.epos;
            <span class="self">self</span>.epos += <span class="number">1</span>;
            <span class="self">self</span>.edge_tour(a.to, u);
            <span class="self">self</span>.eidx[a.id].<span class="number">1 </span>= <span class="self">self</span>.epos;
            <span class="self">self</span>.epos += <span class="number">1</span>;
        }
    }
}

<span class="attr">#[codesnip::entry(<span class="string">&quot;EulerTourForVertex&quot;</span>, include(<span class="string">&quot;SparseGraph&quot;</span>))]
#[derive(Clone, Debug)]
</span><span class="kw">pub struct </span>EulerTourForVertex&lt;<span class="lifetime">&#39;a</span>&gt; {
    graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph,
    <span class="kw">pub </span>vidx: Vec&lt;(usize, usize)&gt;,
    vpos: usize,
}
<span class="attr">#[codesnip::entry(<span class="string">&quot;EulerTourForVertex&quot;</span>)]
</span><span class="kw">impl</span>&lt;<span class="lifetime">&#39;a</span>&gt; EulerTourForVertex&lt;<span class="lifetime">&#39;a</span>&gt; {
    <span class="kw">pub fn </span>new(graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph) -&gt; <span class="self">Self </span>{
        <span class="self">Self </span>{
            graph,
            vidx: <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">0</span>); graph.vertices_size()],
            vpos: <span class="number">0</span>,
        }
    }
    <span class="kw">pub fn </span>length(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; usize {
        <span class="self">self</span>.vpos
    }
    <span class="kw">pub fn </span>subtree_vertex_tour(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, p: usize) {
        <span class="self">self</span>.vidx[u].<span class="number">0 </span>= <span class="self">self</span>.vpos;
        <span class="self">self</span>.vpos += <span class="number">1</span>;
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.<span class="highlight">adjacencies</span>(u).filter(|a| a.to != p) {
            <span class="self">self</span>.subtree_vertex_tour(a.to, u);
        }
        <span class="self">self</span>.vidx[u].<span class="number">1 </span>= <span class="self">self</span>.vpos;
    }
    <span class="kw">pub fn </span>path_vertex_tour(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, p: usize) {
        <span class="self">self</span>.vidx[u].<span class="number">0 </span>= <span class="self">self</span>.vpos;
        <span class="self">self</span>.vpos += <span class="number">1</span>;
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.<span class="highlight">adjacencies</span>(u).filter(|a| a.to != p) {
            <span class="self">self</span>.path_vertex_tour(a.to, u);
        }
        <span class="self">self</span>.vidx[u].<span class="number">1 </span>= <span class="self">self</span>.vpos;
        <span class="self">self</span>.vpos += <span class="number">1</span>;
    }
    <span class="kw">pub fn </span>subtree_query&lt;T, F: FnMut(usize, usize) -&gt; T&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, <span class="kw-2">mut </span>f: F) -&gt; T {
        <span class="kw">let </span>(l, r) = <span class="self">self</span>.vidx[u];
        f(l, r)
    }
    <span class="kw">pub fn </span>subtree_update&lt;T, F: FnMut(usize, T)&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, x: T, <span class="kw-2">mut </span>f: F) {
        <span class="kw">let </span>(l, _r) = <span class="self">self</span>.vidx[u];
        f(l, x);
    }
    <span class="kw">pub fn </span>path_query&lt;T, F: FnMut(usize, usize) -&gt; T&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, v: usize, <span class="kw-2">mut </span>f: F) -&gt; T {
        <span class="kw">let </span>(<span class="kw-2">mut </span>l, <span class="kw-2">mut </span>r) = (<span class="self">self</span>.vidx[u].<span class="number">0</span>, <span class="self">self</span>.vidx[v].<span class="number">0</span>);
        <span class="kw">if </span>l &gt; r {
            std::mem::swap(<span class="kw-2">&amp;mut </span>l, <span class="kw-2">&amp;mut </span>r);
        }
        f(l, r + <span class="number">1</span>)
    }
    <span class="kw">pub fn </span>path_update&lt;T, F: FnMut(usize, T)&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, u: usize, x: T, invx: T, <span class="kw-2">mut </span>f: F) {
        <span class="kw">let </span>(l, r) = <span class="self">self</span>.vidx[u];
        f(l, x);
        f(r, invx);
    }
}

<span class="attr">#[codesnip::entry(<span class="string">&quot;EulerTourForRichVertex&quot;</span>, include(<span class="string">&quot;SparseGraph&quot;</span>))]
#[derive(Clone, Debug)]
</span><span class="kw">pub struct </span>EulerTourForRichVertex&lt;<span class="lifetime">&#39;a</span>&gt; {
    graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph,
    <span class="kw">pub </span>root: usize,
    <span class="kw">pub </span>vidx: Vec&lt;(usize, usize)&gt;,
    vtrace: Vec&lt;usize&gt;,
}
<span class="attr">#[codesnip::entry(<span class="string">&quot;EulerTourForRichVertex&quot;</span>)]
</span><span class="kw">impl</span>&lt;<span class="lifetime">&#39;a</span>&gt; EulerTourForRichVertex&lt;<span class="lifetime">&#39;a</span>&gt; {
    <span class="kw">pub fn </span>new(root: usize, graph: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a </span>UndirectedSparseGraph) -&gt; <span class="self">Self </span>{
        <span class="kw">let </span><span class="kw-2">mut </span>self_ = <span class="self">Self </span>{
            graph,
            root,
            vidx: <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">0</span>); graph.vertices_size()],
            vtrace: <span class="macro">vec!</span>[],
        };
        self_.vertex_tour(root, usize::MAX);
        self_
    }
    <span class="kw">pub fn </span>length(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; usize {
        <span class="self">self</span>.vtrace.len()
    }
    <span class="kw">fn </span>vertex_tour(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, p: usize) {
        <span class="self">self</span>.vidx[u].<span class="number">0 </span>= <span class="self">self</span>.vtrace.len();
        <span class="self">self</span>.vtrace.push(u);
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.<span class="highlight">adjacencies</span>(u).filter(|a| a.to != p) {
            <span class="self">self</span>.vertex_tour(a.to, u);
            <span class="self">self</span>.vtrace.push(u);
        }
        <span class="self">self</span>.vidx[u].<span class="number">1 </span>= <span class="self">self</span>.vtrace.len() - <span class="number">1</span>;
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[3,3],&quot;../../src/competitive/tree/rerooting.rs.html#62&quot;,&quot;line 62&quot;],[[11,11],&quot;../../src/competitive/tree/rerooting.rs.html#70&quot;,&quot;line 70&quot;],[[14,14],&quot;../../src/competitive/tree/rerooting.rs.html#73&quot;,&quot;line 73&quot;],[[18,18],&quot;../../src/competitive/tree/rerooting.rs.html#77&quot;,&quot;line 77&quot;],[[23,23],&quot;../../src/competitive/tree/rerooting.rs.html#82&quot;,&quot;line 82&quot;],[[33,33],&quot;../../src/competitive/tree/rerooting.rs.html#92&quot;,&quot;line 92&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/rerooting.rs (<a href="../../src/competitive/tree/rerooting.rs.html#62">line 62</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>59</span>
<span>60</span>
<span>61</span>
<span>62</span>
<span>63</span>
<span>64</span>
<span>65</span>
<span>66</span>
<span>67</span>
<span>68</span>
<span>69</span>
<span>70</span>
<span>71</span>
<span>72</span>
<span>73</span>
<span>74</span>
<span>75</span>
<span>76</span>
<span>77</span>
<span>78</span>
<span>79</span>
<span>80</span>
<span>81</span>
<span>82</span>
<span>83</span>
<span>84</span>
<span>85</span>
<span>86</span>
<span>87</span>
<span>88</span>
<span>89</span>
<span>90</span>
<span>91</span>
<span>92</span>
<span>93</span>
<span>94</span>
<span>95</span>
<span>96</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">fn </span>dfs(<span class="kw-2">&amp;mut </span><span class="self">self</span>, pa: <span class="kw-2">&amp;</span>Adjacency, p: usize) {
        <span class="kw">let </span>u = pa.to;
        <span class="kw">let </span>pi = <span class="self">self</span>.eidx(p, pa);
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.<span class="highlight focus">adjacencies</span>(u).filter(|a| a.to != p) {
            <span class="kw">let </span>i = <span class="self">self</span>.eidx(u, a);
            <span class="self">self</span>.dfs(a, u);
            <span class="self">self</span>.ep[pi] = <span class="self">self</span>.merge(<span class="kw-2">&amp;</span><span class="self">self</span>.ep[pi], <span class="kw-2">&amp;</span><span class="self">self</span>.ep[i]);
        }
        <span class="self">self</span>.ep[pi] = <span class="self">self</span>.add_subroot(<span class="kw-2">&amp;</span><span class="self">self</span>.ep[pi], u, pa.id);
    }
    <span class="kw">fn </span>efs(<span class="kw-2">&amp;mut </span><span class="self">self</span>, u: usize, p: usize) {
        <span class="kw">let </span>m = <span class="self">self</span>.graph.<span class="highlight">adjacencies</span>(u).len();
        <span class="kw">let </span><span class="kw-2">mut </span>left = <span class="macro">vec!</span>[M::unit(); m + <span class="number">1</span>];
        <span class="kw">let </span><span class="kw-2">mut </span>right = <span class="macro">vec!</span>[M::unit(); m + <span class="number">1</span>];
        <span class="kw">for </span>(k, a) <span class="kw">in </span><span class="self">self</span>.graph.<span class="highlight">adjacencies</span>(u).enumerate() {
            <span class="kw">let </span>i = <span class="self">self</span>.eidx(u, a);
            left[k + <span class="number">1</span>] = <span class="self">self</span>.merge(<span class="kw-2">&amp;</span>left[k], <span class="kw-2">&amp;</span><span class="self">self</span>.ep[i]);
        }
        <span class="kw">for </span>(k, a) <span class="kw">in </span><span class="self">self</span>.graph.<span class="highlight">adjacencies</span>(u).enumerate().rev() {
            <span class="kw">let </span>i = <span class="self">self</span>.eidx(u, a);
            right[k] = <span class="self">self</span>.merge(<span class="kw-2">&amp;</span>right[k + <span class="number">1</span>], <span class="kw-2">&amp;</span><span class="self">self</span>.ep[i]);
        }
        <span class="self">self</span>.dp[u] = <span class="self">self</span>.add_root(<span class="kw-2">&amp;</span>left[m], u);
        <span class="kw">for </span>(k, a) <span class="kw">in </span><span class="self">self</span>.graph.<span class="highlight">adjacencies</span>(u).enumerate() {
            <span class="kw">if </span>a.to != p {
                <span class="kw">let </span>i = <span class="self">self</span>.reidx(u, a);
                <span class="self">self</span>.ep[i] = <span class="self">self</span>.merge(<span class="kw-2">&amp;</span>left[k], <span class="kw-2">&amp;</span>right[k + <span class="number">1</span>]);
                <span class="self">self</span>.ep[i] = <span class="self">self</span>.add_subroot(<span class="kw-2">&amp;</span><span class="self">self</span>.ep[i], u, a.id);
                <span class="self">self</span>.efs(a.to, u);
            }
        }
    }
    <span class="kw">fn </span>rerooting(<span class="kw-2">&amp;mut </span><span class="self">self</span>) {
        <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.graph.<span class="highlight">adjacencies</span>(<span class="number">0</span>) {
            <span class="self">self</span>.dfs(a, <span class="number">0</span>);
        }
        <span class="self">self</span>.efs(<span class="number">0</span>, usize::MAX);
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[4,4],&quot;../../src/competitive/tree/tree_dp.rs.html#13&quot;,&quot;line 13&quot;],[[23,23],&quot;../../src/competitive/tree/tree_dp.rs.html#32&quot;,&quot;line 32&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/tree_dp.rs (<a href="../../src/competitive/tree/tree_dp.rs.html#13">line 13</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>        <span class="kw">fn </span>dfs&lt;T, F&gt;(g: <span class="kw-2">&amp;</span>UndirectedSparseGraph, u: usize, p: usize, dp: <span class="kw-2">&amp;mut </span>[T], f: <span class="kw-2">&amp;mut </span>F)
        <span class="kw">where
            </span>F: FnMut(<span class="kw-2">&amp;mut </span>T, <span class="kw-2">&amp;</span>T),
        {
            <span class="kw">for </span>a <span class="kw">in </span>g.<span class="highlight focus">adjacencies</span>(u) {
                <span class="kw">if </span>a.to != p {
                    dfs(g, a.to, u, dp, f);
                    <span class="macro">assert_ne!</span>(u, a.to);
                    <span class="kw">let </span>ptr = dp.as_mut_ptr();
                    <span class="kw">unsafe </span>{ f(<span class="kw-2">&amp;mut *</span>ptr.add(u), <span class="kw-2">&amp;*</span>ptr.add(a.to)) };
                }
            }
        }
        dfs(<span class="self">self</span>, root, !<span class="number">0</span>, dp, <span class="kw-2">&amp;mut </span>f);
    }
    <span class="kw">pub fn </span>tree_dp_top_down&lt;T, F&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, root: usize, dp: <span class="kw-2">&amp;mut </span>[T], <span class="kw-2">mut </span>f: F)
    <span class="kw">where
        </span>F: FnMut(<span class="kw-2">&amp;mut </span>T, <span class="kw-2">&amp;</span>T),
    {
        <span class="kw">fn </span>dfs&lt;T, F&gt;(g: <span class="kw-2">&amp;</span>UndirectedSparseGraph, u: usize, p: usize, dp: <span class="kw-2">&amp;mut </span>[T], f: <span class="kw-2">&amp;mut </span>F)
        <span class="kw">where
            </span>F: FnMut(<span class="kw-2">&amp;mut </span>T, <span class="kw-2">&amp;</span>T),
        {
            <span class="kw">for </span>a <span class="kw">in </span>g.<span class="highlight">adjacencies</span>(u) {
                <span class="kw">if </span>a.to != p {
                    <span class="macro">assert_ne!</span>(u, a.to);
                    <span class="kw">let </span>ptr = dp.as_mut_ptr();
                    <span class="kw">unsafe </span>{ f(<span class="kw-2">&amp;mut *</span>ptr.add(a.to), <span class="kw-2">&amp;*</span>ptr.add(u)) };
                    dfs(g, a.to, u, dp, f);
                }
            }
        }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[5,5],&quot;../../src/competitive/tree/tree_hash.rs.html#66&quot;,&quot;line 66&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/tree_hash.rs (<a href="../../src/competitive/tree/tree_hash.rs.html#66">line 66</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>61</span>
<span>62</span>
<span>63</span>
<span>64</span>
<span>65</span>
<span>66</span>
<span>67</span>
<span>68</span>
<span>69</span>
<span>70</span>
<span>71</span>
<span>72</span>
<span>73</span>
<span>74</span>
<span>75</span>
<span>76</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">fn </span>hash_rec(<span class="kw-2">&amp;mut </span><span class="self">self</span>, g: <span class="kw-2">&amp;</span>UndirectedSparseGraph, u: usize, p: usize, d: usize) -&gt; u64 {
        <span class="kw">let </span><span class="kw-2">mut </span>s = <span class="number">1u64</span>;
        <span class="kw">if </span><span class="self">self</span>.rv.len() &lt;= d {
            <span class="self">self</span>.rv.push(<span class="self">Self</span>::mersenne_mod(<span class="self">self</span>.rng.rand64()));
        }
        <span class="kw">for </span>a <span class="kw">in </span>g.<span class="highlight focus">adjacencies</span>(u) {
            <span class="kw">if </span>a.to != p {
                s = <span class="self">Self</span>::mersenne_mul_mod(s, <span class="self">self</span>.hash_rec(g, a.to, u, d + <span class="number">1</span>));
            }
        }
        s += <span class="self">self</span>.rv[d];
        <span class="kw">if </span>s &gt;= <span class="self">Self</span>::MOD {
            s -= <span class="self">Self</span>::MOD;
        }
        s
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[8,8],&quot;../../src/competitive/tree/tree_order.rs.html#14&quot;,&quot;line 14&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/tree_order.rs (<a href="../../src/competitive/tree/tree_order.rs.html#14">line 14</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>tree_order(<span class="kw-2">&amp;</span><span class="self">self</span>, root: usize) -&gt; (Vec&lt;usize&gt;, Vec&lt;usize&gt;) {
        <span class="kw">let </span>n = <span class="self">self</span>.vertices_size();
        <span class="kw">let </span><span class="kw-2">mut </span>order = Vec::with_capacity(n);
        <span class="kw">let </span><span class="kw-2">mut </span>parents = <span class="macro">vec!</span>[!<span class="number">0usize</span>; n];
        <span class="kw">let </span><span class="kw-2">mut </span>stack = Vec::with_capacity(n);
        stack.push(root);
        <span class="kw">while let </span><span class="prelude-val">Some</span>(u) = stack.pop() {
            order.push(u);
            <span class="kw">for </span>a <span class="kw">in </span><span class="self">self</span>.<span class="highlight focus">adjacencies</span>(u).rev() {
                <span class="kw">if </span>a.to != parents[u] {
                    parents[a.to] = u;
                    stack.push(a.to);
                }
            }
        }
        (order, parents)
    }</code></pre></div></div></div><div class="example-links">Additional examples can be found in:<br><ul><li><a href="../../src/competitive/graph/order.rs.html#13">crates/competitive/src/graph/order.rs</a></li><li><a href="../../src/competitive/graph/graphvis.rs.html#18">crates/competitive/src/graph/graphvis.rs</a></li><li><a href="../../src/competitive/graph/topological_sort.rs.html#7">crates/competitive/src/graph/topological_sort.rs</a></li><li><a href="../../src/competitive/tree/heavy_light_decomposition.rs.html#27">crates/competitive/src/tree/heavy_light_decomposition.rs</a></li><li><a href="../../src/competitive/graph/maximum_flow.rs.html#67">crates/competitive/src/graph/maximum_flow.rs</a></li><li><a href="../../src/competitive/graph/minimum_cost_flow.rs.html#83">crates/competitive/src/graph/minimum_cost_flow.rs</a></li><li><a href="../../src/competitive/graph/strongly_connected_component.rs.html#46">crates/competitive/src/graph/strongly_connected_component.rs</a></li><li><a href="../../src/competitive/graph/low_link.rs.html#32">crates/competitive/src/graph/low_link.rs</a></li><li><a href="../../src/competitive/tree/tree_center.rs.html#16">crates/competitive/src/tree/tree_center.rs</a></li><li><a href="../../src/competitive/graph/dulmage_mendelsohn_decomposition.rs.html#31">crates/competitive/src/graph/dulmage_mendelsohn_decomposition.rs</a></li></ul></div></div></details></div></details><section id="method.builder" class="method"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#54-56">source</a><h4 class="code-header">pub fn <a href="#method.builder" class="fn">builder</a>&lt;T&gt;(vsize: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="struct.SparseGraphBuilder.html" title="struct competitive::graph::SparseGraphBuilder">SparseGraphBuilder</a>&lt;T, D&gt;</h4></section><section id="method.builder_with_esize" class="method"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#57-59">source</a><h4 class="code-header">pub fn <a href="#method.builder_with_esize" class="fn">builder_with_esize</a>&lt;T&gt;(
    vsize: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,
    esize: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>
) -&gt; <a class="struct" href="struct.SparseGraphBuilder.html" title="struct competitive::graph::SparseGraphBuilder">SparseGraphBuilder</a>&lt;T, D&gt;</h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-SparseGraph%3CD%3E-5" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#66-74">source</a><a href="#impl-SparseGraph%3CD%3E-5" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;<span class="where fmt-newline">where
    D: <a class="trait" href="trait.SparseGraphConstruction.html" title="trait competitive::graph::SparseGraphConstruction">SparseGraphConstruction</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from_edges" class="method"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#71-73">source</a><h4 class="code-header">pub fn <a href="#method.from_edges" class="fn">from_edges</a>(vsize: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, edges: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>)&gt;) -&gt; Self</h4></section></summary><div class="docblock"><p>Construct graph from edges.</p>
</div><div class="docblock scraped-example-list"><span></span><h5 id="scraped-examples-7"><a href="#scraped-examples-7">Examples found in repository</a><a class="scrape-help" href="../../scrape-examples-help.html">?</a></h5><div class="scraped-example expanded" data-locs="[[[1,1],&quot;../../src/competitive/graph/sparse_graph.rs.html#197&quot;,&quot;line 197&quot;]]"><div class="scraped-example-title">crates/competitive/src/graph/sparse_graph.rs (<a href="../../src/competitive/graph/sparse_graph.rs.html#197">line 197</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>196</span>
<span>197</span>
<span>198</span>
<span>199</span>
</pre></div><pre class="rust"><code>    <span class="kw">pub fn </span>build(<span class="self">self</span>) -&gt; (SparseGraph&lt;D&gt;, Vec&lt;T&gt;) {
        <span class="kw">let </span>graph = <span class="highlight focus">SparseGraph::from_edges</span>(<span class="self">self</span>.vsize, <span class="self">self</span>.edges);
        (graph, <span class="self">self</span>.rest)
    }</code></pre></div></div></div><details class="toggle more-examples-toggle"><summary class="hideme"><span>More examples</span></summary><div class="hide-more">Hide additional examples</div><div class="more-scraped-examples"><div class="toggle-line"><div class="toggle-line-inner"></div></div><div class="scraped-example expanded" data-locs="[[[2,2],&quot;../../src/competitive/graph/maximum_flow.rs.html#25&quot;,&quot;line 25&quot;]]"><div class="scraped-example-title">crates/competitive/src/graph/maximum_flow.rs (<a href="../../src/competitive/graph/maximum_flow.rs.html#25">line 25</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
</pre></div><pre class="rust"><code>    <span class="kw">pub fn </span>gen_graph(<span class="kw-2">&amp;mut </span><span class="self">self</span>) -&gt; BidirectionalSparseGraph {
        <span class="kw">let </span>edges = std::mem::take(<span class="kw-2">&amp;mut </span><span class="self">self</span>.edges);
        <span class="highlight focus">BidirectionalSparseGraph::from_edges</span>(<span class="self">self</span>.vsize, edges)
    }</code></pre></div></div></div><div class="scraped-example expanded" data-locs="[[[2,2],&quot;../../src/competitive/graph/minimum_cost_flow.rs.html#31&quot;,&quot;line 31&quot;]]"><div class="scraped-example-title">crates/competitive/src/graph/minimum_cost_flow.rs (<a href="../../src/competitive/graph/minimum_cost_flow.rs.html#31">line 31</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
</pre></div><pre class="rust"><code>    <span class="kw">pub fn </span>gen_graph(<span class="kw-2">&amp;mut </span><span class="self">self</span>) -&gt; BidirectionalSparseGraph {
        <span class="kw">let </span>edges = std::mem::take(<span class="kw-2">&amp;mut </span><span class="self">self</span>.edges);
        <span class="highlight focus">BidirectionalSparseGraph::from_edges</span>(<span class="self">self</span>.vsize, edges)
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[8,8],&quot;../../src/competitive/tree/generator.rs.html#15&quot;,&quot;line 15&quot;],[[18,18],&quot;../../src/competitive/tree/generator.rs.html#25&quot;,&quot;line 25&quot;],[[28,28],&quot;../../src/competitive/tree/generator.rs.html#35&quot;,&quot;line 35&quot;],[[64,64],&quot;../../src/competitive/tree/generator.rs.html#71&quot;,&quot;line 71&quot;]]"><div class="scraped-example-title">crates/competitive/src/tree/generator.rs (<a href="../../src/competitive/tree/generator.rs.html#15">line 15</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
<span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
<span>58</span>
<span>59</span>
<span>60</span>
<span>61</span>
<span>62</span>
<span>63</span>
<span>64</span>
<span>65</span>
<span>66</span>
<span>67</span>
<span>68</span>
<span>69</span>
<span>70</span>
<span>71</span>
<span>72</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">fn </span>rand(<span class="kw-2">&amp;</span><span class="self">self</span>, rng: <span class="kw-2">&amp;mut </span>Xorshift) -&gt; UndirectedSparseGraph {
        <span class="kw">let </span>n = rng.gen(<span class="kw-2">&amp;</span><span class="self">self</span>.<span class="number">0</span>);
        <span class="kw">let </span>edges = from_prufer_sequence(
            n,
            <span class="kw-2">&amp;</span>rng.gen_iter(<span class="number">0</span>..n)
                .take(n.saturating_sub(<span class="number">2</span>))
                .collect::&lt;Vec&lt;usize&gt;&gt;(),
        );
        <span class="highlight focus">UndirectedSparseGraph::from_edges</span>(n, edges)
    }
}

<span class="kw">pub struct </span>PathTree&lt;T&gt;(<span class="kw">pub </span>T);

<span class="kw">impl</span>&lt;T: RandomSpec&lt;usize&gt;&gt; RandomSpec&lt;UndirectedSparseGraph&gt; <span class="kw">for </span>PathTree&lt;T&gt; {
    <span class="kw">fn </span>rand(<span class="kw-2">&amp;</span><span class="self">self</span>, rng: <span class="kw-2">&amp;mut </span>Xorshift) -&gt; UndirectedSparseGraph {
        <span class="kw">let </span>n = rng.gen(<span class="kw-2">&amp;</span><span class="self">self</span>.<span class="number">0</span>);
        <span class="kw">let </span>edges = (<span class="number">1</span>..n).map(|u| (u - <span class="number">1</span>, u)).collect();
        <span class="highlight">UndirectedSparseGraph::from_edges</span>(n, edges)
    }
}

<span class="kw">pub struct </span>StarTree&lt;T&gt;(<span class="kw">pub </span>T);

<span class="kw">impl</span>&lt;T: RandomSpec&lt;usize&gt;&gt; RandomSpec&lt;UndirectedSparseGraph&gt; <span class="kw">for </span>StarTree&lt;T&gt; {
    <span class="kw">fn </span>rand(<span class="kw-2">&amp;</span><span class="self">self</span>, rng: <span class="kw-2">&amp;mut </span>Xorshift) -&gt; UndirectedSparseGraph {
        <span class="kw">let </span>n = rng.gen(<span class="kw-2">&amp;</span><span class="self">self</span>.<span class="number">0</span>);
        <span class="kw">let </span>edges = (<span class="number">1</span>..n).map(|u| (<span class="number">0</span>, u)).collect();
        <span class="highlight">UndirectedSparseGraph::from_edges</span>(n, edges)
    }
}

<span class="kw">pub struct </span>MixedTree&lt;T&gt;(<span class="kw">pub </span>T);

<span class="kw">impl</span>&lt;T: RandomSpec&lt;usize&gt;&gt; RandomSpec&lt;UndirectedSparseGraph&gt; <span class="kw">for </span>MixedTree&lt;T&gt; {
    <span class="kw">fn </span>rand(<span class="kw-2">&amp;</span><span class="self">self</span>, rng: <span class="kw-2">&amp;mut </span>Xorshift) -&gt; UndirectedSparseGraph {
        <span class="kw">fn </span>rand_inner(n: usize, rng: <span class="kw-2">&amp;mut </span>Xorshift) -&gt; Vec&lt;(usize, usize)&gt; {
            <span class="kw">let </span><span class="kw-2">mut </span>edges = Vec::with_capacity(n.saturating_sub(<span class="number">1</span>));
            <span class="kw">if </span>n &gt;= <span class="number">2 </span>{
                <span class="kw">let </span>k = rng.gen(<span class="number">1</span>..n);
                <span class="kw">for </span>n <span class="kw">in </span>[k, n - k].iter().cloned() {
                    <span class="kw">let </span>ty = rng.rand(<span class="number">6</span>);
                    edges.extend(<span class="kw">match </span>ty {
                        <span class="number">0 </span>=&gt; from_prufer_sequence(
                            n,
                            <span class="kw-2">&amp;</span>rng.gen_iter(<span class="number">0</span>..n)
                                .take(n.saturating_sub(<span class="number">2</span>))
                                .collect::&lt;Vec&lt;usize&gt;&gt;(),
                        ),
                        <span class="number">1 </span>=&gt; (<span class="number">1</span>..n).map(|u| (u - <span class="number">1</span>, u)).collect(),
                        <span class="number">2 </span>=&gt; (<span class="number">1</span>..n).map(|u| (<span class="number">0</span>, u)).collect(),
                        <span class="kw">_ </span>=&gt; rand_inner(n, rng),
                    });
                }
                <span class="kw">for </span>(u, v) <span class="kw">in </span>edges[k - <span class="number">1</span>..].iter_mut() {
                    <span class="kw-2">*</span>u += k;
                    <span class="kw-2">*</span>v += k;
                }
                edges.push((rng.gen(<span class="number">0</span>..k), rng.gen(k..n)));
            }
            edges
        }
        <span class="kw">let </span>n = rng.gen(<span class="kw-2">&amp;</span><span class="self">self</span>.<span class="number">0</span>);
        <span class="kw">let </span>edges = rand_inner(n, rng);
        <span class="highlight">UndirectedSparseGraph::from_edges</span>(n, edges)
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[1,1],&quot;../../src/competitive/graph/two_satisfiability.rs.html#34&quot;,&quot;line 34&quot;]]"><div class="scraped-example-title">crates/competitive/src/graph/two_satisfiability.rs (<a href="../../src/competitive/graph/two_satisfiability.rs.html#34">line 34</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>two_satisfiability(<span class="self">self</span>) -&gt; <span class="prelude-ty">Option</span>&lt;Vec&lt;bool&gt;&gt; {
        <span class="kw">let </span>graph = <span class="highlight focus">DirectedSparseGraph::from_edges</span>(<span class="self">self</span>.vsize * <span class="number">2</span>, <span class="self">self</span>.edges);
        <span class="kw">let </span>scc = StronglyConnectedComponent::new(<span class="kw-2">&amp;</span>graph);
        <span class="kw">let </span><span class="kw-2">mut </span>res = <span class="macro">vec!</span>[<span class="bool-val">false</span>; <span class="self">self</span>.vsize];
        <span class="kw">for </span>i <span class="kw">in </span><span class="number">0</span>..<span class="self">self</span>.vsize {
            <span class="kw">if </span>scc[i * <span class="number">2</span>] == scc[i * <span class="number">2 </span>+ <span class="number">1</span>] {
                <span class="kw">return </span><span class="prelude-val">None</span>;
            }
            res[i] = scc[i * <span class="number">2</span>] &gt; scc[i * <span class="number">2 </span>+ <span class="number">1</span>];
        }
        <span class="prelude-val">Some</span>(res)
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[4,4],&quot;../../src/library_checker/graph/scc.rs.html#10&quot;,&quot;line 10&quot;]]"><div class="scraped-example-title">crates/library_checker/src/graph/scc.rs (<a href="../../src/library_checker/graph/scc.rs.html#10">line 10</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button><span class="kw">pub fn </span>scc(reader: <span class="kw">impl </span>Read, <span class="kw-2">mut </span>writer: <span class="kw">impl </span>Write) {
    <span class="kw">let </span>s = read_all_unchecked(reader);
    <span class="kw">let </span><span class="kw-2">mut </span>scanner = Scanner::new(<span class="kw-2">&amp;</span>s);
    <span class="macro">scan!</span>(scanner, vs, es, edges: [(usize, usize); es]);
    <span class="kw">let </span>graph = <span class="highlight focus">DirectedSparseGraph::from_edges</span>(vs, edges);
    <span class="kw">let </span>scc = StronglyConnectedComponent::new(<span class="kw-2">&amp;</span>graph);
    <span class="kw">let </span>comp = scc.components();
    <span class="macro">writeln!</span>(writer, <span class="string">&quot;{}&quot;</span>, comp.len()).ok();
    <span class="kw">for </span>vs <span class="kw">in </span>comp.into_iter() {
        <span class="macro">iter_print!</span>(writer, vs.len(), @it vs);
    }
}</code></pre></div></div></div><div class="example-links">Additional examples can be found in:<br><ul><li><a href="../../src/library_checker/graph/lca.rs.html#14">crates/library_checker/src/graph/lca.rs</a></li><li><a href="../../src/competitive/graph/strongly_connected_component.rs.html#79">crates/competitive/src/graph/strongly_connected_component.rs</a></li><li><a href="../../src/aizu_online_judge/grl/grl_5_c.rs.html#19">crates/aizu_online_judge/src/grl/grl_5_c.rs</a></li><li><a href="../../src/library_checker/datastructure/vertex_add_subtree_sum.rs.html#14">crates/library_checker/src/datastructure/vertex_add_subtree_sum.rs</a></li><li><a href="../../src/aizu_online_judge/grl/grl_5_e.rs.html#21">crates/aizu_online_judge/src/grl/grl_5_e.rs</a></li><li><a href="../../src/aizu_online_judge/grl/grl_5_d.rs.html#18">crates/aizu_online_judge/src/grl/grl_5_d.rs</a></li><li><a href="../../src/competitive/graph/dulmage_mendelsohn_decomposition.rs.html#17">crates/competitive/src/graph/dulmage_mendelsohn_decomposition.rs</a></li></ul></div></div></details></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-SparseGraph%3CD%3E-6" class="impl"><a class="src rightside" href="../../src/competitive/graph/topological_sort.rs.html#3-25">source</a><a href="#impl-SparseGraph%3CD%3E-6" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.topological_sort" class="method"><a class="src rightside" href="../../src/competitive/graph/topological_sort.rs.html#4-24">source</a><h4 class="code-header">pub fn <a href="#method.topological_sort" class="fn">topological_sort</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class="docblock scraped-example-list"><span></span><h5 id="scraped-examples-8"><a href="#scraped-examples-8">Examples found in repository</a><a class="scrape-help" href="../../scrape-examples-help.html">?</a></h5><div class="scraped-example expanded" data-locs="[[[4,4],&quot;../../src/aizu_online_judge/grl/grl_4_a.rs.html#10&quot;,&quot;line 10&quot;]]"><div class="scraped-example-title">crates/aizu_online_judge/src/grl/grl_4_a.rs (<a href="../../src/aizu_online_judge/grl/grl_4_a.rs.html#10">line 10</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
</pre></div><pre class="rust"><code><span class="kw">pub fn </span>grl_4_a(reader: <span class="kw">impl </span>Read, <span class="kw-2">mut </span>writer: <span class="kw">impl </span>Write) {
    <span class="kw">let </span>s = read_all_unchecked(reader);
    <span class="kw">let </span><span class="kw-2">mut </span>scanner = Scanner::new(<span class="kw-2">&amp;</span>s);
    <span class="macro">scan!</span>(scanner, vs, es, (graph, <span class="kw">_</span>): @DirectedGraphScanner::&lt;usize, ()&gt;::new(vs, es));
    <span class="macro">writeln!</span>(writer, <span class="string">&quot;{}&quot;</span>, (graph.<span class="highlight focus">topological_sort</span>().len() != vs) <span class="kw">as </span>u32).ok();
}</code></pre></div></div></div><details class="toggle more-examples-toggle"><summary class="hideme"><span>More examples</span></summary><div class="hide-more">Hide additional examples</div><div class="more-scraped-examples"><div class="toggle-line"><div class="toggle-line-inner"></div></div><div class="scraped-example expanded" data-locs="[[[4,4],&quot;../../src/aizu_online_judge/grl/grl_4_b.rs.html#10&quot;,&quot;line 10&quot;]]"><div class="scraped-example-title">crates/aizu_online_judge/src/grl/grl_4_b.rs (<a href="../../src/aizu_online_judge/grl/grl_4_b.rs.html#10">line 10</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
</pre></div><pre class="rust"><code><span class="kw">pub fn </span>grl_4_b(reader: <span class="kw">impl </span>Read, <span class="kw-2">mut </span>writer: <span class="kw">impl </span>Write) {
    <span class="kw">let </span>s = read_all_unchecked(reader);
    <span class="kw">let </span><span class="kw-2">mut </span>scanner = Scanner::new(<span class="kw-2">&amp;</span>s);
    <span class="macro">scan!</span>(scanner, vs, es, (graph, <span class="kw">_</span>): @DirectedGraphScanner::&lt;usize, ()&gt;::new(vs, es));
    <span class="kw">for </span>u <span class="kw">in </span>graph.<span class="highlight focus">topological_sort</span>().into_iter() {
        <span class="macro">writeln!</span>(writer, <span class="string">&quot;{}&quot;</span>, u).ok();
    }
}</code></pre></div></div></div></div></details></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-SparseGraph%3CD%3E-7" class="impl"><a class="src rightside" href="../../src/competitive/tree/tree_order.rs.html#4-23">source</a><a href="#impl-SparseGraph%3CD%3E-7" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.tree_order" class="method"><a class="src rightside" href="../../src/competitive/tree/tree_order.rs.html#6-22">source</a><h4 class="code-header">pub fn <a href="#method.tree_order" class="fn">tree_order</a>(&amp;self, root: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; (<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;)</h4></section></summary><div class="docblock"><p>(order, parents)</p>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Adjacencies%3C'g%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#301-309">source</a><a href="#impl-Adjacencies%3C'g%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'g, D&gt; <a class="trait" href="trait.Adjacencies.html" title="trait competitive::graph::Adjacencies">Adjacencies</a>&lt;'g&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.AIndex-1" class="associatedtype trait-impl"><a href="#associatedtype.AIndex-1" class="anchor">§</a><h4 class="code-header">type <a href="trait.Adjacencies.html#associatedtype.AIndex" class="associatedtype">AIndex</a> = <a class="struct" href="struct.Adjacency.html" title="struct competitive::graph::Adjacency">Adjacency</a></h4></section><section id="associatedtype.AIter-1" class="associatedtype trait-impl"><a href="#associatedtype.AIter-1" class="anchor">§</a><h4 class="code-header">type <a href="trait.Adjacencies.html#associatedtype.AIter" class="associatedtype">AIter</a> = <a class="struct" href="https://doc.rust-lang.org/nightly/core/iter/adapters/cloned/struct.Cloned.html" title="struct core::iter::adapters::cloned::Cloned">Cloned</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/core/slice/iter/struct.Iter.html" title="struct core::slice::iter::Iter">Iter</a>&lt;'g, <a class="struct" href="struct.Adjacency.html" title="struct competitive::graph::Adjacency">Adjacency</a>&gt;&gt;</h4></section><section id="method.adjacencies-1" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#304-308">source</a><a href="#method.adjacencies-1" class="anchor">§</a><h4 class="code-header">fn <a href="trait.Adjacencies.html#tymethod.adjacencies" class="fn">adjacencies</a>(&amp;'g self, vid: Self::<a class="associatedtype" href="trait.GraphBase.html#associatedtype.VIndex" title="type competitive::graph::GraphBase::VIndex">VIndex</a>) -&gt; Self::<a class="associatedtype" href="trait.Adjacencies.html#associatedtype.AIter" title="type competitive::graph::Adjacencies::AIter">AIter</a></h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-AdjacenciesWithEindex%3C'g%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#310-318">source</a><a href="#impl-AdjacenciesWithEindex%3C'g%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'g, D&gt; <a class="trait" href="trait.AdjacenciesWithEindex.html" title="trait competitive::graph::AdjacenciesWithEindex">AdjacenciesWithEindex</a>&lt;'g&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.AIndex" class="associatedtype trait-impl"><a href="#associatedtype.AIndex" class="anchor">§</a><h4 class="code-header">type <a href="trait.AdjacenciesWithEindex.html#associatedtype.AIndex" class="associatedtype">AIndex</a> = <a class="struct" href="struct.Adjacency.html" title="struct competitive::graph::Adjacency">Adjacency</a></h4></section><section id="associatedtype.AIter" class="associatedtype trait-impl"><a href="#associatedtype.AIter" class="anchor">§</a><h4 class="code-header">type <a href="trait.AdjacenciesWithEindex.html#associatedtype.AIter" class="associatedtype">AIter</a> = <a class="struct" href="https://doc.rust-lang.org/nightly/core/iter/adapters/cloned/struct.Cloned.html" title="struct core::iter::adapters::cloned::Cloned">Cloned</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/core/slice/iter/struct.Iter.html" title="struct core::slice::iter::Iter">Iter</a>&lt;'g, <a class="struct" href="struct.Adjacency.html" title="struct competitive::graph::Adjacency">Adjacency</a>&gt;&gt;</h4></section><section id="method.adjacencies_with_eindex" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#313-317">source</a><a href="#method.adjacencies_with_eindex" class="anchor">§</a><h4 class="code-header">fn <a href="trait.AdjacenciesWithEindex.html#tymethod.adjacencies_with_eindex" class="fn">adjacencies_with_eindex</a>(&amp;'g self, vid: Self::<a class="associatedtype" href="trait.GraphBase.html#associatedtype.VIndex" title="type competitive::graph::GraphBase::VIndex">VIndex</a>) -&gt; Self::<a class="associatedtype" href="trait.AdjacenciesWithEindex.html#associatedtype.AIter" title="type competitive::graph::AdjacenciesWithEindex::AIter">AIter</a></h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-AdjacencyView%3C'g,+'a,+M,+T%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#411-421">source</a><a href="#impl-AdjacencyView%3C'g,+'a,+M,+T%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'g, 'a, D: 'g, M, T&gt; <a class="trait" href="trait.AdjacencyView.html" title="trait competitive::graph::AdjacencyView">AdjacencyView</a>&lt;'g, 'a, M, T&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;<span class="where fmt-newline">where
    Self: <a class="trait" href="trait.AdjacenciesWithEindex.html" title="trait competitive::graph::AdjacenciesWithEindex">AdjacenciesWithEindex</a>&lt;'g&gt; + <a class="trait" href="trait.EdgeView.html" title="trait competitive::graph::EdgeView">EdgeView</a>&lt;'g, M, T&gt;,
    T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,
    M: 'a,</span></h3></section></summary><div class="impl-items"><section id="associatedtype.AViewIter" class="associatedtype trait-impl"><a href="#associatedtype.AViewIter" class="anchor">§</a><h4 class="code-header">type <a href="trait.AdjacencyView.html#associatedtype.AViewIter" class="associatedtype">AViewIter</a> = <a class="struct" href="struct.AdjacencyViewIterFromEindex.html" title="struct competitive::graph::AdjacencyViewIterFromEindex">AdjacencyViewIterFromEindex</a>&lt;'g, 'a, <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;, M, T&gt;</h4></section><section id="method.aviews" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#418-420">source</a><a href="#method.aviews" class="anchor">§</a><h4 class="code-header">fn <a href="trait.AdjacencyView.html#tymethod.aviews" class="fn">aviews</a>(&amp;'g self, map: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'a M</a>, vid: Self::<a class="associatedtype" href="trait.GraphBase.html#associatedtype.VIndex" title="type competitive::graph::GraphBase::VIndex">VIndex</a>) -&gt; Self::<a class="associatedtype" href="trait.AdjacencyView.html#associatedtype.AViewIter" title="type competitive::graph::AdjacencyView::AViewIter">AViewIter</a></h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Clone-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#28">source</a><a href="#impl-Clone-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.clone" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#28">source</a><a href="#method.clone" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone" class="fn">clone</a>(&amp;self) -&gt; <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h4></section></summary><div class='docblock'>Returns a copy of the value. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.clone_from" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span> · <a class="src" href="https://doc.rust-lang.org/nightly/src/core/clone.rs.html#169">source</a></span><a href="#method.clone_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from" class="fn">clone_from</a>(&amp;mut self, source: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;Self</a>)</h4></section></summary><div class='docblock'>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Debug-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#28">source</a><a href="#impl-Debug-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#28">source</a><a href="#method.fmt" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4></section></summary><div class='docblock'>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-EIndexedGraph%3C'_%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#280-282">source</a><a href="#impl-EIndexedGraph%3C'_%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="trait" href="trait.EIndexedGraph.html" title="trait competitive::graph::EIndexedGraph">EIndexedGraph</a>&lt;'_&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.EIndex" class="associatedtype trait-impl"><a href="#associatedtype.EIndex" class="anchor">§</a><h4 class="code-header">type <a href="trait.EIndexedGraph.html#associatedtype.EIndex" class="associatedtype">EIndex</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-EdgeMap%3C'_,+T%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#370-390">source</a><a href="#impl-EdgeMap%3C'_,+T%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D, T&gt; <a class="trait" href="trait.EdgeMap.html" title="trait competitive::graph::EdgeMap">EdgeMap</a>&lt;'_, T&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Emap" class="associatedtype trait-impl"><a href="#associatedtype.Emap" class="anchor">§</a><h4 class="code-header">type <a href="trait.EdgeMap.html#associatedtype.Emap" class="associatedtype">Emap</a> = <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;</h4></section><section id="method.construct_emap" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#372-379">source</a><a href="#method.construct_emap" class="anchor">§</a><h4 class="code-header">fn <a href="trait.EdgeMap.html#tymethod.construct_emap" class="fn">construct_emap</a>&lt;F&gt;(&amp;self, f: F) -&gt; Self::<a class="associatedtype" href="trait.EdgeMap.html#associatedtype.Emap" title="type competitive::graph::EdgeMap::Emap">Emap</a><span class="where fmt-newline">where
    F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>() -&gt; T,</span></h4></section><section id="method.emap_get" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#380-384">source</a><a href="#method.emap_get" class="anchor">§</a><h4 class="code-header">fn <a href="trait.EdgeMap.html#tymethod.emap_get" class="fn">emap_get</a>&lt;'a&gt;(&amp;self, map: &amp;'a Self::<a class="associatedtype" href="trait.EdgeMap.html#associatedtype.Emap" title="type competitive::graph::EdgeMap::Emap">Emap</a>, eid: Self::<a class="associatedtype" href="trait.EIndexedGraph.html#associatedtype.EIndex" title="type competitive::graph::EIndexedGraph::EIndex">EIndex</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'a T</a></h4></section><section id="method.emap_get_mut" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#385-389">source</a><a href="#method.emap_get_mut" class="anchor">§</a><h4 class="code-header">fn <a href="trait.EdgeMap.html#tymethod.emap_get_mut" class="fn">emap_get_mut</a>&lt;'a&gt;(
    &amp;self,
    map: &amp;'a mut Self::<a class="associatedtype" href="trait.EdgeMap.html#associatedtype.Emap" title="type competitive::graph::EdgeMap::Emap">Emap</a>,
    eid: Self::<a class="associatedtype" href="trait.EIndexedGraph.html#associatedtype.EIndex" title="type competitive::graph::EIndexedGraph::EIndex">EIndex</a>
) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'a mut T</a></h4></section><section id="method.emap_set" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/graph_base.rs.html#232-234">source</a><a href="#method.emap_set" class="anchor">§</a><h4 class="code-header">fn <a href="trait.EdgeMap.html#method.emap_set" class="fn">emap_set</a>(&amp;self, map: &amp;mut Self::<a class="associatedtype" href="trait.EdgeMap.html#associatedtype.Emap" title="type competitive::graph::EdgeMap::Emap">Emap</a>, eid: Self::<a class="associatedtype" href="trait.EIndexedGraph.html#associatedtype.EIndex" title="type competitive::graph::EIndexedGraph::EIndex">EIndex</a>, x: T)</h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-EdgeSize%3C'_%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#289-293">source</a><a href="#impl-EdgeSize%3C'_%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="trait" href="trait.EdgeSize.html" title="trait competitive::graph::EdgeSize">EdgeSize</a>&lt;'_&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="method.esize" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#290-292">source</a><a href="#method.esize" class="anchor">§</a><h4 class="code-header">fn <a href="trait.EdgeSize.html#tymethod.esize" class="fn">esize</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-EdgeView%3C'_,+%5BT%5D,+T%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#400-409">source</a><a href="#impl-EdgeView%3C'_,+%5BT%5D,+T%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D, T&gt; <a class="trait" href="trait.EdgeView.html" title="trait competitive::graph::EdgeView">EdgeView</a>&lt;'_, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[T]</a>, T&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;<span class="where fmt-newline">where
    T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,</span></h3></section></summary><div class="impl-items"><section id="method.eview" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#404-408">source</a><a href="#method.eview" class="anchor">§</a><h4 class="code-header">fn <a href="trait.EdgeView.html#tymethod.eview" class="fn">eview</a>(&amp;self, map: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[T]</a>, eid: Self::<a class="associatedtype" href="trait.EIndexedGraph.html#associatedtype.EIndex" title="type competitive::graph::EIndexedGraph::EIndex">EIndex</a>) -&gt; T</h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-EdgeView%3C'_,+Vec%3CT,+Global%3E,+T%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#391-398">source</a><a href="#impl-EdgeView%3C'_,+Vec%3CT,+Global%3E,+T%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D, T&gt; <a class="trait" href="trait.EdgeView.html" title="trait competitive::graph::EdgeView">EdgeView</a>&lt;'_, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;, T&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;<span class="where fmt-newline">where
    T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,</span></h3></section></summary><div class="impl-items"><section id="method.eview-1" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#395-397">source</a><a href="#method.eview-1" class="anchor">§</a><h4 class="code-header">fn <a href="trait.EdgeView.html#tymethod.eview" class="fn">eview</a>(&amp;self, map: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;T&gt;, eid: Self::<a class="associatedtype" href="trait.EIndexedGraph.html#associatedtype.EIndex" title="type competitive::graph::EIndexedGraph::EIndex">EIndex</a>) -&gt; T</h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-GraphBase%3C'_%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#277-279">source</a><a href="#impl-GraphBase%3C'_%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="trait" href="trait.GraphBase.html" title="trait competitive::graph::GraphBase">GraphBase</a>&lt;'_&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.VIndex" class="associatedtype trait-impl"><a href="#associatedtype.VIndex" class="anchor">§</a><h4 class="code-header">type <a href="trait.GraphBase.html#associatedtype.VIndex" class="associatedtype">VIndex</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-VertexMap%3C'_,+T%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#333-351">source</a><a href="#impl-VertexMap%3C'_,+T%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D, T&gt; <a class="trait" href="trait.VertexMap.html" title="trait competitive::graph::VertexMap">VertexMap</a>&lt;'_, T&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Vmap" class="associatedtype trait-impl"><a href="#associatedtype.Vmap" class="anchor">§</a><h4 class="code-header">type <a href="trait.VertexMap.html#associatedtype.Vmap" class="associatedtype">Vmap</a> = <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;</h4></section><section id="method.construct_vmap" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#335-342">source</a><a href="#method.construct_vmap" class="anchor">§</a><h4 class="code-header">fn <a href="trait.VertexMap.html#tymethod.construct_vmap" class="fn">construct_vmap</a>&lt;F&gt;(&amp;self, f: F) -&gt; Self::<a class="associatedtype" href="trait.VertexMap.html#associatedtype.Vmap" title="type competitive::graph::VertexMap::Vmap">Vmap</a><span class="where fmt-newline">where
    F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>() -&gt; T,</span></h4></section><section id="method.vmap_get" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#343-346">source</a><a href="#method.vmap_get" class="anchor">§</a><h4 class="code-header">fn <a href="trait.VertexMap.html#tymethod.vmap_get" class="fn">vmap_get</a>&lt;'a&gt;(&amp;self, map: &amp;'a Self::<a class="associatedtype" href="trait.VertexMap.html#associatedtype.Vmap" title="type competitive::graph::VertexMap::Vmap">Vmap</a>, vid: Self::<a class="associatedtype" href="trait.GraphBase.html#associatedtype.VIndex" title="type competitive::graph::GraphBase::VIndex">VIndex</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'a T</a></h4></section><section id="method.vmap_get_mut" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#347-350">source</a><a href="#method.vmap_get_mut" class="anchor">§</a><h4 class="code-header">fn <a href="trait.VertexMap.html#tymethod.vmap_get_mut" class="fn">vmap_get_mut</a>&lt;'a&gt;(
    &amp;self,
    map: &amp;'a mut Self::<a class="associatedtype" href="trait.VertexMap.html#associatedtype.Vmap" title="type competitive::graph::VertexMap::Vmap">Vmap</a>,
    vid: Self::<a class="associatedtype" href="trait.GraphBase.html#associatedtype.VIndex" title="type competitive::graph::GraphBase::VIndex">VIndex</a>
) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'a mut T</a></h4></section><section id="method.vmap_set" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/graph_base.rs.html#215-217">source</a><a href="#method.vmap_set" class="anchor">§</a><h4 class="code-header">fn <a href="trait.VertexMap.html#method.vmap_set" class="fn">vmap_set</a>(&amp;self, map: &amp;mut Self::<a class="associatedtype" href="trait.VertexMap.html#associatedtype.Vmap" title="type competitive::graph::VertexMap::Vmap">Vmap</a>, vid: Self::<a class="associatedtype" href="trait.GraphBase.html#associatedtype.VIndex" title="type competitive::graph::GraphBase::VIndex">VIndex</a>, x: T)</h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-VertexSize%3C'_%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#284-288">source</a><a href="#impl-VertexSize%3C'_%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="trait" href="trait.VertexSize.html" title="trait competitive::graph::VertexSize">VertexSize</a>&lt;'_&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="method.vsize" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#285-287">source</a><a href="#method.vsize" class="anchor">§</a><h4 class="code-header">fn <a href="trait.VertexSize.html#tymethod.vsize" class="fn">vsize</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-VertexView%3C'_,+%5BT%5D,+T%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#360-368">source</a><a href="#impl-VertexView%3C'_,+%5BT%5D,+T%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D, T&gt; <a class="trait" href="trait.VertexView.html" title="trait competitive::graph::VertexView">VertexView</a>&lt;'_, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[T]</a>, T&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;<span class="where fmt-newline">where
    T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,</span></h3></section></summary><div class="impl-items"><section id="method.vview" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#364-367">source</a><a href="#method.vview" class="anchor">§</a><h4 class="code-header">fn <a href="trait.VertexView.html#tymethod.vview" class="fn">vview</a>(&amp;self, map: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[T]</a>, vid: Self::<a class="associatedtype" href="trait.GraphBase.html#associatedtype.VIndex" title="type competitive::graph::GraphBase::VIndex">VIndex</a>) -&gt; T</h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-VertexView%3C'_,+Vec%3CT,+Global%3E,+T%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#352-359">source</a><a href="#impl-VertexView%3C'_,+Vec%3CT,+Global%3E,+T%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D, T&gt; <a class="trait" href="trait.VertexView.html" title="trait competitive::graph::VertexView">VertexView</a>&lt;'_, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;, T&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;<span class="where fmt-newline">where
    T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,</span></h3></section></summary><div class="impl-items"><section id="method.vview-1" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#356-358">source</a><a href="#method.vview-1" class="anchor">§</a><h4 class="code-header">fn <a href="trait.VertexView.html#tymethod.vview" class="fn">vview</a>(&amp;self, map: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;T&gt;, vid: Self::<a class="associatedtype" href="trait.GraphBase.html#associatedtype.VIndex" title="type competitive::graph::GraphBase::VIndex">VIndex</a>) -&gt; T</h4></section></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Vertices%3C'_%3E-for-SparseGraph%3CD%3E" class="impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#295-300">source</a><a href="#impl-Vertices%3C'_%3E-for-SparseGraph%3CD%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D&gt; <a class="trait" href="trait.Vertices.html" title="trait competitive::graph::Vertices">Vertices</a>&lt;'_&gt; for <a class="struct" href="struct.SparseGraph.html" title="struct competitive::graph::SparseGraph">SparseGraph</a>&lt;D&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.VIter" class="associatedtype trait-impl"><a href="#associatedtype.VIter" class="anchor">§</a><h4 class="code-header">type <a href="trait.Vertices.html#associatedtype.VIter" class="associatedtype">VIter</a> = <a class="struct" href="https://doc.rust-lang.org/nightly/core/ops/range/struct.Range.html" title="struct core::ops::range::Range">Range</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;</h4></section><section id="method.vertices-1" class="method trait-impl"><a class="src rightside" href="../../src/competitive/graph/sparse_graph.rs.html#297-299">source</a><a href="#method.vertices-1" class="anchor">§</a><h4 class="code-header">fn <a href="trait.Vertices.html#tymethod.vertices" class="fn">vertices</a>(&amp;self) -&gt; Self::<a class="associatedtype" href="trait.Vertices.html#associatedtype.VIter" title="type competitive::graph::Vertices::VIter">VIter</a></h4></section></div></details></div></section></div></main></body></html>
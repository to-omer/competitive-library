(function() {
    var type_impls = Object.fromEntries([["competitive",[["<details class=\"toggle implementors-toggle\" open><summary><section id=\"impl-Clone-for-UnionFindBase%3CU,+F,+M,+P,+H%3E\" class=\"impl\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#23-39\">Source</a><a href=\"#impl-Clone-for-UnionFindBase%3CU,+F,+M,+P,+H%3E\" class=\"anchor\">§</a><h3 class=\"code-header\">impl&lt;U, F, M, P, H&gt; <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a> for <a class=\"struct\" href=\"competitive/data_structure/union_find/struct.UnionFindBase.html\" title=\"struct competitive::data_structure::union_find::UnionFindBase\">UnionFindBase</a>&lt;U, F, M, P, H&gt;<div class=\"where\">where\n    U: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UnionStrategy.html\" title=\"trait competitive::data_structure::union_find::UnionStrategy\">UnionStrategy</a>&lt;Info: <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt;,\n    F: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.FindStrategy.html\" title=\"trait competitive::data_structure::union_find::FindStrategy\">FindStrategy</a>,\n    M: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UfMergeSpec.html\" title=\"trait competitive::data_structure::union_find::UfMergeSpec\">UfMergeSpec</a>&lt;Data: <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>,\n    P: <a class=\"trait\" href=\"competitive/algebra/trait.Monoid.html\" title=\"trait competitive::algebra::Monoid\">Monoid</a>,\n    H: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UndoStrategy.html\" title=\"trait competitive::data_structure::union_find::UndoStrategy\">UndoStrategy</a>&lt;<a class=\"enum\" href=\"competitive/data_structure/union_find/enum.UfCell.html\" title=\"enum competitive::data_structure::union_find::UfCell\">UfCell</a>&lt;U, M, P&gt;, History: <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt;,</div></h3></section></summary><div class=\"impl-items\"><details class=\"toggle method-toggle\" open><summary><section id=\"method.clone\" class=\"method trait-impl\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#31-38\">Source</a><a href=\"#method.clone\" class=\"anchor\">§</a><h4 class=\"code-header\">fn <a href=\"https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone\" class=\"fn\">clone</a>(&amp;self) -&gt; Self</h4></section></summary><div class='docblock'>Returns a duplicate of the value. <a href=\"https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone\">Read more</a></div></details><details class=\"toggle method-toggle\" open><summary><section id=\"method.clone_from\" class=\"method trait-impl\"><span class=\"rightside\"><span class=\"since\" title=\"Stable since Rust version 1.0.0\">1.0.0</span> · <a class=\"src\" href=\"https://doc.rust-lang.org/nightly/src/core/clone.rs.html#245-247\">Source</a></span><a href=\"#method.clone_from\" class=\"anchor\">§</a><h4 class=\"code-header\">fn <a href=\"https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from\" class=\"fn\">clone_from</a>(&amp;mut self, source: &amp;Self)</h4></section></summary><div class='docblock'>Performs copy-assignment from <code>source</code>. <a href=\"https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from\">Read more</a></div></details></div></details>","Clone","competitive::data_structure::union_find::UnionFind","competitive::data_structure::union_find::MergingUnionFind","competitive::data_structure::union_find::PotentializedUnionFind","competitive::data_structure::union_find::UndoableUnionFind"],["<details class=\"toggle implementors-toggle\" open><summary><section id=\"impl-Debug-for-UnionFindBase%3CU,+F,+M,+P,+H%3E\" class=\"impl\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#41-55\">Source</a><a href=\"#impl-Debug-for-UnionFindBase%3CU,+F,+M,+P,+H%3E\" class=\"anchor\">§</a><h3 class=\"code-header\">impl&lt;U, F, M, P, H&gt; <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html\" title=\"trait core::fmt::Debug\">Debug</a> for <a class=\"struct\" href=\"competitive/data_structure/union_find/struct.UnionFindBase.html\" title=\"struct competitive::data_structure::union_find::UnionFindBase\">UnionFindBase</a>&lt;U, F, M, P, H&gt;<div class=\"where\">where\n    U: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UnionStrategy.html\" title=\"trait competitive::data_structure::union_find::UnionStrategy\">UnionStrategy</a>&lt;Info: <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html\" title=\"trait core::fmt::Debug\">Debug</a>&gt;,\n    F: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.FindStrategy.html\" title=\"trait competitive::data_structure::union_find::FindStrategy\">FindStrategy</a>,\n    M: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UfMergeSpec.html\" title=\"trait competitive::data_structure::union_find::UfMergeSpec\">UfMergeSpec</a>&lt;Data: <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html\" title=\"trait core::fmt::Debug\">Debug</a>&gt;,\n    P: <a class=\"trait\" href=\"competitive/algebra/trait.Monoid.html\" title=\"trait competitive::algebra::Monoid\">Monoid</a>&lt;T: <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html\" title=\"trait core::fmt::Debug\">Debug</a>&gt;,\n    H: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UndoStrategy.html\" title=\"trait competitive::data_structure::union_find::UndoStrategy\">UndoStrategy</a>&lt;<a class=\"enum\" href=\"competitive/data_structure/union_find/enum.UfCell.html\" title=\"enum competitive::data_structure::union_find::UfCell\">UfCell</a>&lt;U, M, P&gt;, History: <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html\" title=\"trait core::fmt::Debug\">Debug</a>&gt;,</div></h3></section></summary><div class=\"impl-items\"><details class=\"toggle method-toggle\" open><summary><section id=\"method.fmt\" class=\"method trait-impl\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#49-54\">Source</a><a href=\"#method.fmt\" class=\"anchor\">§</a><h4 class=\"code-header\">fn <a href=\"https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt\" class=\"fn\">fmt</a>(&amp;self, f: &amp;mut <a class=\"struct\" href=\"https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html\" title=\"struct core::fmt::Formatter\">Formatter</a>&lt;'_&gt;) -&gt; <a class=\"type\" href=\"https://doc.rust-lang.org/nightly/core/fmt/type.Result.html\" title=\"type core::fmt::Result\">Result</a></h4></section></summary><div class='docblock'>Formats the value using the given formatter. <a href=\"https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt\">Read more</a></div></details></div></details>","Debug","competitive::data_structure::union_find::UnionFind","competitive::data_structure::union_find::MergingUnionFind","competitive::data_structure::union_find::PotentializedUnionFind","competitive::data_structure::union_find::UndoableUnionFind"],["<details class=\"toggle implementors-toggle\" open><summary><section id=\"impl-UnionFindBase%3CU,+(),+M,+P,+H%3E\" class=\"impl\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#479-489\">Source</a><a href=\"#impl-UnionFindBase%3CU,+(),+M,+P,+H%3E\" class=\"anchor\">§</a><h3 class=\"code-header\">impl&lt;U, M, P, H&gt; <a class=\"struct\" href=\"competitive/data_structure/union_find/struct.UnionFindBase.html\" title=\"struct competitive::data_structure::union_find::UnionFindBase\">UnionFindBase</a>&lt;U, <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.unit.html\">()</a>, M, P, H&gt;<div class=\"where\">where\n    U: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UnionStrategy.html\" title=\"trait competitive::data_structure::union_find::UnionStrategy\">UnionStrategy</a>,\n    M: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UfMergeSpec.html\" title=\"trait competitive::data_structure::union_find::UfMergeSpec\">UfMergeSpec</a>,\n    P: <a class=\"trait\" href=\"competitive/algebra/trait.Monoid.html\" title=\"trait competitive::algebra::Monoid\">Monoid</a>,\n    H: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UndoStrategy.html\" title=\"trait competitive::data_structure::union_find::UndoStrategy\">UndoStrategy</a>&lt;<a class=\"enum\" href=\"competitive/data_structure/union_find/enum.UfCell.html\" title=\"enum competitive::data_structure::union_find::UfCell\">UfCell</a>&lt;U, M, P&gt;&gt;,</div></h3></section></summary><div class=\"impl-items\"><section id=\"method.undo\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#486-488\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.undo\" class=\"fn\">undo</a>(&amp;mut self)</h4></section></div></details>",0,"competitive::data_structure::union_find::UndoableUnionFind"],["<details class=\"toggle implementors-toggle\" open><summary><section id=\"impl-UnionFindBase%3CU,+F,+(),+P,+H%3E\" class=\"impl\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#256-277\">Source</a><a href=\"#impl-UnionFindBase%3CU,+F,+(),+P,+H%3E\" class=\"anchor\">§</a><h3 class=\"code-header\">impl&lt;U, F, P, H&gt; <a class=\"struct\" href=\"competitive/data_structure/union_find/struct.UnionFindBase.html\" title=\"struct competitive::data_structure::union_find::UnionFindBase\">UnionFindBase</a>&lt;U, F, <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.unit.html\">()</a>, P, H&gt;<div class=\"where\">where\n    U: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UnionStrategy.html\" title=\"trait competitive::data_structure::union_find::UnionStrategy\">UnionStrategy</a>,\n    F: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.FindStrategy.html\" title=\"trait competitive::data_structure::union_find::FindStrategy\">FindStrategy</a>,\n    P: <a class=\"trait\" href=\"competitive/algebra/trait.Monoid.html\" title=\"trait competitive::algebra::Monoid\">Monoid</a>,\n    H: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UndoStrategy.html\" title=\"trait competitive::data_structure::union_find::UndoStrategy\">UndoStrategy</a>&lt;<a class=\"enum\" href=\"competitive/data_structure/union_find/enum.UfCell.html\" title=\"enum competitive::data_structure::union_find::UfCell\">UfCell</a>&lt;U, <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.unit.html\">()</a>, P&gt;&gt;,</div></h3></section></summary><div class=\"impl-items\"><details class=\"toggle method-toggle\" open><summary><section id=\"method.new\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#263-273\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.new\" class=\"fn\">new</a>(n: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>) -&gt; Self</h4></section></summary><div class=\"docblock scraped-example-list\"><span></span><h5 id=\"scraped-examples\"><a href=\"#scraped-examples\">Examples found in repository</a><a class=\"scrape-help\" href=\"scrape-examples-help.html\">?</a></h5><div class=\"scraped-example\" data-locs=\"[[[4,4],&#34;src/aizu_online_judge/dsl/dsl_1_a.rs.html#10&#34;,&#34;line 10&#34;]]\"><div class=\"scraped-example-title\">crates/aizu_online_judge/src/dsl/dsl_1_a.rs (<a href=\"src/aizu_online_judge/dsl/dsl_1_a.rs.html#10\">line 10</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>6</span><span class=\"kw\">pub fn </span>dsl_1_a(reader: <span class=\"kw\">impl </span>Read, <span class=\"kw-2\">mut </span>writer: <span class=\"kw\">impl </span>Write) {\n<span data-nosnippet>7</span>    <span class=\"kw\">let </span>s = read_all_unchecked(reader);\n<span data-nosnippet>8</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>scanner = Scanner::new(<span class=\"kw-2\">&amp;</span>s);\n<span data-nosnippet>9</span>    <span class=\"macro\">scan!</span>(scanner, n, q);\n<span data-nosnippet>10</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = <span class=\"highlight focus\">UnionFind::new</span>(n);\n<span data-nosnippet>11</span>    <span class=\"kw\">for _ in </span><span class=\"number\">0</span>..q {\n<span data-nosnippet>12</span>        <span class=\"macro\">scan!</span>(scanner, ty, x, y);\n<span data-nosnippet>13</span>        <span class=\"kw\">if </span>ty == <span class=\"number\">0 </span>{\n<span data-nosnippet>14</span>            uf.unite(x, y);\n<span data-nosnippet>15</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>16</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"{}\"</span>, (uf.same(x, y) <span class=\"kw\">as </span>usize)).ok();\n<span data-nosnippet>17</span>        }\n<span data-nosnippet>18</span>    }\n<span data-nosnippet>19</span>}</code></pre></div></div><details class=\"toggle more-examples-toggle\"><summary class=\"hideme\"><span>More examples</span></summary><div class=\"hide-more\">Hide additional examples</div><div class=\"more-scraped-examples\"><div class=\"toggle-line\"><div class=\"toggle-line-inner\"></div></div><div class=\"scraped-example\" data-locs=\"[[[4,4],&#34;src/library_checker/data_structure/unionfind.rs.html#10&#34;,&#34;line 10&#34;]]\"><div class=\"scraped-example-title\">crates/library_checker/src/data_structure/unionfind.rs (<a href=\"src/library_checker/data_structure/unionfind.rs.html#10\">line 10</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>6</span><span class=\"kw\">pub fn </span>unionfind(reader: <span class=\"kw\">impl </span>Read, <span class=\"kw-2\">mut </span>writer: <span class=\"kw\">impl </span>Write) {\n<span data-nosnippet>7</span>    <span class=\"kw\">let </span>s = read_all_unchecked(reader);\n<span data-nosnippet>8</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>scanner = Scanner::new(<span class=\"kw-2\">&amp;</span>s);\n<span data-nosnippet>9</span>    <span class=\"macro\">scan!</span>(scanner, n, q);\n<span data-nosnippet>10</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = <span class=\"highlight focus\">UnionFind::new</span>(n);\n<span data-nosnippet>11</span>    <span class=\"kw\">for _ in </span><span class=\"number\">0</span>..q {\n<span data-nosnippet>12</span>        <span class=\"macro\">scan!</span>(scanner, ty, u, v);\n<span data-nosnippet>13</span>        <span class=\"kw\">if </span>ty == <span class=\"number\">0 </span>{\n<span data-nosnippet>14</span>            uf.unite(u, v);\n<span data-nosnippet>15</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>16</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"{}\"</span>, uf.same(u, v) <span class=\"kw\">as </span>usize).ok();\n<span data-nosnippet>17</span>        }\n<span data-nosnippet>18</span>    }\n<span data-nosnippet>19</span>}</code></pre></div></div><div class=\"scraped-example\" data-locs=\"[[[6,6],&#34;src/competitive/graph/minimum_spanning_tree.rs.html#10&#34;,&#34;line 10&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/graph/minimum_spanning_tree.rs (<a href=\"src/competitive/graph/minimum_spanning_tree.rs.html#10\">line 10</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>4</span>    <span class=\"kw\">pub fn </span>minimum_spanning_tree&lt;T&gt;(<span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>, weight: <span class=\"kw\">impl </span>Fn(<span class=\"kw-2\">&amp;</span>usize) -&gt; T) -&gt; Vec&lt;bool&gt;\n<span data-nosnippet>5</span>    <span class=\"kw\">where\n<span data-nosnippet>6</span>        </span>T: Ord,\n<span data-nosnippet>7</span>    {\n<span data-nosnippet>8</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>idx: Vec&lt;<span class=\"kw\">_</span>&gt; = (<span class=\"number\">0</span>..<span class=\"self\">self</span>.edges_size()).collect();\n<span data-nosnippet>9</span>        idx.sort_by_key(weight);\n<span data-nosnippet>10</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = <span class=\"highlight focus\">UnionFind::new</span>(<span class=\"self\">self</span>.vertices_size());\n<span data-nosnippet>11</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>res = <span class=\"macro\">vec!</span>[<span class=\"bool-val\">false</span>; <span class=\"self\">self</span>.edges_size()];\n<span data-nosnippet>12</span>        <span class=\"kw\">for </span>eid <span class=\"kw\">in </span>idx.into_iter() {\n<span data-nosnippet>13</span>            <span class=\"kw\">let </span>(u, v) = <span class=\"self\">self</span>[eid];\n<span data-nosnippet>14</span>            res[eid] = uf.unite(u, v);\n<span data-nosnippet>15</span>        }\n<span data-nosnippet>16</span>        res\n<span data-nosnippet>17</span>    }</code></pre></div></div><div class=\"scraped-example\" data-locs=\"[[[4,4],&#34;src/aizu_online_judge/dsl/dsl_1_b.rs.html#10&#34;,&#34;line 10&#34;]]\"><div class=\"scraped-example-title\">crates/aizu_online_judge/src/dsl/dsl_1_b.rs (<a href=\"src/aizu_online_judge/dsl/dsl_1_b.rs.html#10\">line 10</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>6</span><span class=\"kw\">pub fn </span>dsl_1_b(reader: <span class=\"kw\">impl </span>Read, <span class=\"kw-2\">mut </span>writer: <span class=\"kw\">impl </span>Write) {\n<span data-nosnippet>7</span>    <span class=\"kw\">let </span>s = read_all_unchecked(reader);\n<span data-nosnippet>8</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>scanner = Scanner::new(<span class=\"kw-2\">&amp;</span>s);\n<span data-nosnippet>9</span>    <span class=\"macro\">scan!</span>(scanner, n, q);\n<span data-nosnippet>10</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = <span class=\"highlight focus\">PotentializedUnionFind::&lt;AdditiveOperation&lt;<span class=\"kw\">_</span>&gt;&gt;::new</span>(n);\n<span data-nosnippet>11</span>    <span class=\"kw\">for _ in </span><span class=\"number\">0</span>..q {\n<span data-nosnippet>12</span>        <span class=\"macro\">scan!</span>(scanner, ty, x, y);\n<span data-nosnippet>13</span>        <span class=\"kw\">if </span>ty == <span class=\"number\">0 </span>{\n<span data-nosnippet>14</span>            <span class=\"macro\">scan!</span>(scanner, w: i64);\n<span data-nosnippet>15</span>            uf.unite_with(x, y, w);\n<span data-nosnippet>16</span>        } <span class=\"kw\">else if let </span><span class=\"prelude-val\">Some</span>(w) = uf.difference(x, y) {\n<span data-nosnippet>17</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"{}\"</span>, w).ok();\n<span data-nosnippet>18</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>19</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"?\"</span>).ok();\n<span data-nosnippet>20</span>        }\n<span data-nosnippet>21</span>    }\n<span data-nosnippet>22</span>}</code></pre></div></div></div></details></div></details><section id=\"method.push\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#274-276\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.push\" class=\"fn\">push</a>(&amp;mut self)</h4></section></div></details>",0,"competitive::data_structure::union_find::UnionFind","competitive::data_structure::union_find::PotentializedUnionFind","competitive::data_structure::union_find::UndoableUnionFind"],["<details class=\"toggle implementors-toggle\" open><summary><section id=\"impl-UnionFindBase%3CU,+F,+FnMerger%3CT,+Merge%3E,+P,+H%3E\" class=\"impl\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#279-301\">Source</a><a href=\"#impl-UnionFindBase%3CU,+F,+FnMerger%3CT,+Merge%3E,+P,+H%3E\" class=\"anchor\">§</a><h3 class=\"code-header\">impl&lt;U, F, T, Merge, P, H&gt; <a class=\"struct\" href=\"competitive/data_structure/union_find/struct.UnionFindBase.html\" title=\"struct competitive::data_structure::union_find::UnionFindBase\">UnionFindBase</a>&lt;U, F, <a class=\"struct\" href=\"competitive/data_structure/union_find/struct.FnMerger.html\" title=\"struct competitive::data_structure::union_find::FnMerger\">FnMerger</a>&lt;T, Merge&gt;, P, H&gt;<div class=\"where\">where\n    U: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UnionStrategy.html\" title=\"trait competitive::data_structure::union_find::UnionStrategy\">UnionStrategy</a>,\n    F: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.FindStrategy.html\" title=\"trait competitive::data_structure::union_find::FindStrategy\">FindStrategy</a>,\n    Merge: <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html\" title=\"trait core::ops::function::FnMut\">FnMut</a>(<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.reference.html\">&amp;mut T</a>, <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.reference.html\">&amp;mut T</a>),\n    P: <a class=\"trait\" href=\"competitive/algebra/trait.Monoid.html\" title=\"trait competitive::algebra::Monoid\">Monoid</a>,\n    H: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UndoStrategy.html\" title=\"trait competitive::data_structure::union_find::UndoStrategy\">UndoStrategy</a>&lt;<a class=\"enum\" href=\"competitive/data_structure/union_find/enum.UfCell.html\" title=\"enum competitive::data_structure::union_find::UfCell\">UfCell</a>&lt;U, <a class=\"struct\" href=\"competitive/data_structure/union_find/struct.FnMerger.html\" title=\"struct competitive::data_structure::union_find::FnMerger\">FnMerger</a>&lt;T, Merge&gt;, P&gt;&gt;,</div></h3></section></summary><div class=\"impl-items\"><details class=\"toggle method-toggle\" open><summary><section id=\"method.new_with_merger\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#287-300\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.new_with_merger\" class=\"fn\">new_with_merger</a>(\n    n: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>,\n    init: impl <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html\" title=\"trait core::ops::function::FnMut\">FnMut</a>(<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>) -&gt; T,\n    merge: Merge,\n) -&gt; Self</h4></section></summary><div class=\"docblock scraped-example-list\"><span></span><h5 id=\"scraped-examples\"><a href=\"#scraped-examples\">Examples found in repository</a><a class=\"scrape-help\" href=\"scrape-examples-help.html\">?</a></h5><div class=\"scraped-example\" data-locs=\"[[[13,16],&#34;src/competitive/algorithm/solve_01_on_tree.rs.html#55-58&#34;,&#34;lines 55-58&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/algorithm/solve_01_on_tree.rs (<a href=\"src/competitive/algorithm/solve_01_on_tree.rs.html#55-58\">lines 55-58</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>42</span><span class=\"kw\">pub fn </span>solve_01_on_tree(\n<span data-nosnippet>43</span>    n: usize,\n<span data-nosnippet>44</span>    c01: <span class=\"kw\">impl </span>Fn(usize) -&gt; (usize, usize),\n<span data-nosnippet>45</span>    root: usize,\n<span data-nosnippet>46</span>    parent: <span class=\"kw\">impl </span>Fn(usize) -&gt; usize,\n<span data-nosnippet>47</span>) -&gt; (usize, Vec&lt;usize&gt;) {\n<span data-nosnippet>48</span>    <span class=\"kw\">pub type </span>UF&lt;T, M&gt; =\n<span data-nosnippet>49</span>        UnionFindBase&lt;(), union_find::PathCompression, union_find::FnMerger&lt;T, M&gt;, (), ()&gt;;\n<span data-nosnippet>50</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>cost = <span class=\"number\">0usize</span>;\n<span data-nosnippet>51</span>    <span class=\"kw\">let </span>c01 = |u| {\n<span data-nosnippet>52</span>        <span class=\"kw\">let </span>c = c01(u);\n<span data-nosnippet>53</span>        Count01::new(c.<span class=\"number\">0</span>, c.<span class=\"number\">1</span>)\n<span data-nosnippet>54</span>    };\n<span data-nosnippet>55</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = <span class=\"highlight focus\">UF::new_with_merger</span>(n, <span class=\"kw-2\">&amp;</span>c01, |x, y| {\n<span data-nosnippet>56</span>        cost += x.cnt1 * y.cnt0;\n<span data-nosnippet>57</span>        <span class=\"kw-2\">*</span>x += <span class=\"kw-2\">*</span>y;\n<span data-nosnippet>58</span>    });\n<span data-nosnippet>59</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>label = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; n];\n<span data-nosnippet>60</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>heap = BinaryHeap::from_iter((<span class=\"number\">0</span>..n).filter(|<span class=\"kw-2\">&amp;</span>u| <span class=\"macro\">u !</span>= root).map(|u| (c01(u), u, <span class=\"number\">0</span>)));\n<span data-nosnippet>61</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>next: Vec&lt;<span class=\"kw\">_</span>&gt; = (<span class=\"number\">0</span>..n).collect();\n<span data-nosnippet>62</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ord = <a href=\"https://doc.rust-lang.org/nightly/core/ops/arith/trait.Add.html\">Vec</a>::with_capacity(n);\n<span data-nosnippet>63</span>    <span class=\"kw\">while let </span><span class=\"prelude-val\">Some</span>((_c, u, l)) = heap.pop() {\n<span data-nosnippet>64</span>        <span class=\"kw\">if </span>label[u] != l {\n<span data-nosnippet>65</span>            <span class=\"kw\">continue</span>;\n<span data-nosnippet>66</span>        }\n<span data-nosnippet>67</span>        <span class=\"kw\">let </span>p = uf.find_root(parent(u));\n<span data-nosnippet>68</span>        uf.unite(u, p);\n<span data-nosnippet>69</span>        <span class=\"macro\">if !</span>uf.same(p, root) {\n<span data-nosnippet>70</span>            label[p] += <span class=\"number\">1</span>;\n<span data-nosnippet>71</span>            heap.push((<span class=\"kw-2\">*</span>uf.merge_data(p), p, label[p]));\n<span data-nosnippet>72</span>        }\n<span data-nosnippet>73</span>        next.swap(u, p);\n<span data-nosnippet>74</span>    }\n<span data-nosnippet>75</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>u = next[root];\n<span data-nosnippet>76</span>    ord.push(u);\n<span data-nosnippet>77</span>    <span class=\"kw\">while </span><span class=\"macro\">u !</span>= root {\n<span data-nosnippet>78</span>        u = next[u];\n<span data-nosnippet>79</span>        ord.push(u);\n<span data-nosnippet>80</span>    }\n<span data-nosnippet>81</span>    ord.reverse();\n<span data-nosnippet>82</span>    (cost, ord)\n<span data-nosnippet>83</span>}</code></pre></div></div><details class=\"toggle more-examples-toggle\"><summary class=\"hideme\"><span>More examples</span></summary><div class=\"hide-more\">Hide additional examples</div><div class=\"more-scraped-examples\"><div class=\"toggle-line\"><div class=\"toggle-line-inner\"></div></div><div class=\"scraped-example\" data-locs=\"[[[26,30],&#34;src/competitive/graph/minimum_spanning_arborescence.rs.html#31-35&#34;,&#34;lines 31-35&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/graph/minimum_spanning_arborescence.rs (<a href=\"src/competitive/graph/minimum_spanning_arborescence.rs.html#31-35\">lines 31-35</a>)</div><div class=\"example-wrap digits-3\"><pre class=\"rust\"><code><span data-nosnippet>5</span>    <span class=\"kw\">pub fn </span>minimum_spanning_arborescence&lt;G, F&gt;(\n<span data-nosnippet>6</span>        <span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>,\n<span data-nosnippet>7</span>        root: usize,\n<span data-nosnippet>8</span>        weight: F,\n<span data-nosnippet>9</span>    ) -&gt; <span class=\"prelude-ty\">Option</span>&lt;(G::T, Vec&lt;usize&gt;)&gt;\n<span data-nosnippet>10</span>    <span class=\"kw\">where\n<span data-nosnippet>11</span>        </span>G: Group&lt;T: Ord&gt;,\n<span data-nosnippet>12</span>        F: Fn(usize) -&gt; G::T,\n<span data-nosnippet>13</span>    {\n<span data-nosnippet>14</span>        <span class=\"kw\">struct </span>WeightAct&lt;G&gt;(std::marker::PhantomData&lt;<span class=\"kw\">fn</span>() -&gt; G&gt;);\n<span data-nosnippet>15</span>        <span class=\"kw\">impl</span>&lt;G&gt; MonoidAct <span class=\"kw\">for </span>WeightAct&lt;G&gt;\n<span data-nosnippet>16</span>        <span class=\"kw\">where\n<span data-nosnippet>17</span>            </span>G: Group,\n<span data-nosnippet>18</span>        {\n<span data-nosnippet>19</span>            <span class=\"kw\">type </span>Key = (G::T, usize);\n<span data-nosnippet>20</span>            <span class=\"kw\">type </span>Act = G::T;\n<span data-nosnippet>21</span>            <span class=\"kw\">type </span>ActMonoid = G;\n<span data-nosnippet>22</span>\n<span data-nosnippet>23</span>            <span class=\"kw\">fn </span>act(x: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Key, a: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Act) -&gt; <span class=\"self\">Self</span>::Key {\n<span data-nosnippet>24</span>                (G::operate(<span class=\"kw-2\">&amp;</span>x.<span class=\"number\">0</span>, a), x.<span class=\"number\">1</span>)\n<span data-nosnippet>25</span>            }\n<span data-nosnippet>26</span>\n<span data-nosnippet>27</span>            <span class=\"kw\">fn </span>act_assign(x: <span class=\"kw-2\">&amp;mut </span><span class=\"self\">Self</span>::Key, a: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Act) {\n<span data-nosnippet>28</span>                x.<span class=\"number\">0 </span>= G::operate(<span class=\"kw-2\">&amp;</span>x.<span class=\"number\">0</span>, a);\n<span data-nosnippet>29</span>            }\n<span data-nosnippet>30</span>        }\n<span data-nosnippet>31</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = <span class=\"highlight focus\">MergingUnionFind::new_with_merger</span>(\n<span data-nosnippet>32</span>            <span class=\"self\">self</span>.vertices_size(),\n<span data-nosnippet>33</span>            |<span class=\"kw\">_</span>| PairingHeap::&lt;(G::T, usize), Less, WeightAct&lt;G&gt;&gt;::default(),\n<span data-nosnippet>34</span>            |x, y| x.append(y),\n<span data-nosnippet>35</span>        );\n<span data-nosnippet>36</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>state = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; <span class=\"self\">self</span>.vertices_size()]; <span class=\"comment\">// 0: unprocessed, 1: in process, 2: completed\n<span data-nosnippet>37</span>        </span>state[root] = <span class=\"number\">2</span>;\n<span data-nosnippet>38</span>        <span class=\"kw\">for </span>(id, <span class=\"kw-2\">&amp;</span>(<span class=\"kw\">_</span>, to)) <span class=\"kw\">in </span><span class=\"self\">self</span>.edges().enumerate() {\n<span data-nosnippet>39</span>            uf.merge_data_mut(to).push((weight(id), id));\n<span data-nosnippet>40</span>        }\n<span data-nosnippet>41</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>paredge = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; <span class=\"self\">self</span>.edges_size()];\n<span data-nosnippet>42</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ord = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>43</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>leaf = <span class=\"macro\">vec!</span>[<span class=\"self\">self</span>.edges_size(); <span class=\"self\">self</span>.vertices_size()];\n<span data-nosnippet>44</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>cycle = <span class=\"number\">0usize</span>;\n<span data-nosnippet>45</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>acc = G::unit();\n<span data-nosnippet>46</span>        <span class=\"kw\">for </span><span class=\"kw-2\">mut </span>cur <span class=\"kw\">in </span><span class=\"self\">self</span>.vertices() {\n<span data-nosnippet>47</span>            <span class=\"kw\">if </span>state[cur] != <span class=\"number\">0 </span>{\n<span data-nosnippet>48</span>                <span class=\"kw\">continue</span>;\n<span data-nosnippet>49</span>            }\n<span data-nosnippet>50</span>            <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>path = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>51</span>            <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ch = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>52</span>            <span class=\"kw\">while </span>state[cur] != <span class=\"number\">2 </span>{\n<span data-nosnippet>53</span>                path.push(cur);\n<span data-nosnippet>54</span>                state[cur] = <span class=\"number\">1</span>;\n<span data-nosnippet>55</span>                <span class=\"kw\">let </span>(w, eid) = {\n<span data-nosnippet>56</span>                    <span class=\"kw\">match </span>uf.merge_data_mut(cur).pop() {\n<span data-nosnippet>57</span>                        <span class=\"prelude-val\">Some</span>((w, eid)) =&gt; (w, eid),\n<span data-nosnippet>58</span>                        <span class=\"prelude-val\">None </span>=&gt; <span class=\"kw\">return </span><span class=\"prelude-val\">None</span>,\n<span data-nosnippet>59</span>                    }\n<span data-nosnippet>60</span>                };\n<span data-nosnippet>61</span>                uf.merge_data_mut(cur).apply_all(G::inverse(<span class=\"kw-2\">&amp;</span>w));\n<span data-nosnippet>62</span>                acc = G::operate(<span class=\"kw-2\">&amp;</span>acc, <span class=\"kw-2\">&amp;</span>w);\n<span data-nosnippet>63</span>                ord.push(eid);\n<span data-nosnippet>64</span>                <span class=\"kw\">let </span>(u, v) = <span class=\"self\">self</span>[eid];\n<span data-nosnippet>65</span>                <span class=\"kw\">if </span>leaf[v] &gt;= <span class=\"self\">self</span>.edges_size() {\n<span data-nosnippet>66</span>                    leaf[v] = eid;\n<span data-nosnippet>67</span>                }\n<span data-nosnippet>68</span>                <span class=\"kw\">while </span>cycle &gt; <span class=\"number\">0 </span>{\n<span data-nosnippet>69</span>                    paredge[ch.pop().unwrap()] = eid;\n<span data-nosnippet>70</span>                    cycle -= <span class=\"number\">1</span>;\n<span data-nosnippet>71</span>                }\n<span data-nosnippet>72</span>                ch.push(eid);\n<span data-nosnippet>73</span>                <span class=\"kw\">if </span>state[uf.find_root(u)] == <span class=\"number\">1 </span>{\n<span data-nosnippet>74</span>                    <span class=\"kw\">while let </span><span class=\"prelude-val\">Some</span>(t) = path.pop() {\n<span data-nosnippet>75</span>                        state[t] = <span class=\"number\">2</span>;\n<span data-nosnippet>76</span>                        cycle += <span class=\"number\">1</span>;\n<span data-nosnippet>77</span>                        <span class=\"macro\">if !</span>uf.unite(u, t) {\n<span data-nosnippet>78</span>                            <span class=\"kw\">break</span>;\n<span data-nosnippet>79</span>                        }\n<span data-nosnippet>80</span>                    }\n<span data-nosnippet>81</span>                    state[uf.find_root(u)] = <span class=\"number\">1</span>;\n<span data-nosnippet>82</span>                }\n<span data-nosnippet>83</span>                cur = uf.find_root(u);\n<span data-nosnippet>84</span>            }\n<span data-nosnippet>85</span>            <span class=\"kw\">for </span>u <span class=\"kw\">in </span>path.into_iter() {\n<span data-nosnippet>86</span>                state[u] = <span class=\"number\">2</span>;\n<span data-nosnippet>87</span>            }\n<span data-nosnippet>88</span>        }\n<span data-nosnippet>89</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>tree = <span class=\"macro\">vec!</span>[root; <span class=\"self\">self</span>.vertices_size()];\n<span data-nosnippet>90</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>used = <span class=\"macro\">vec!</span>[<span class=\"bool-val\">false</span>; <span class=\"self\">self</span>.edges_size()];\n<span data-nosnippet>91</span>        <span class=\"kw\">for </span>eid <span class=\"kw\">in </span>ord.into_iter().rev() {\n<span data-nosnippet>92</span>            <span class=\"macro\">if !</span>used[eid] {\n<span data-nosnippet>93</span>                <span class=\"kw\">let </span>(u, v) = <span class=\"self\">self</span>[eid];\n<span data-nosnippet>94</span>                tree[v] = u;\n<span data-nosnippet>95</span>                <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>x = leaf[v];\n<span data-nosnippet>96</span>                <span class=\"kw\">while </span><span class=\"macro\">x !</span>= eid {\n<span data-nosnippet>97</span>                    used[x] = <span class=\"bool-val\">true</span>;\n<span data-nosnippet>98</span>                    x = paredge[x];\n<span data-nosnippet>99</span>                }\n<span data-nosnippet>100</span>            }\n<span data-nosnippet>101</span>        }\n<span data-nosnippet>102</span>        <span class=\"prelude-val\">Some</span>((acc, tree))\n<span data-nosnippet>103</span>    }</code></pre></div></div></div></details></div></details></div></details>",0,"competitive::data_structure::union_find::MergingUnionFind"],["<details class=\"toggle implementors-toggle\" open><summary><section id=\"impl-UnionFindBase%3CU,+F,+M,+P,+H%3E\" class=\"impl\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#316-424\">Source</a><a href=\"#impl-UnionFindBase%3CU,+F,+M,+P,+H%3E\" class=\"anchor\">§</a><h3 class=\"code-header\">impl&lt;U, F, M, P, H&gt; <a class=\"struct\" href=\"competitive/data_structure/union_find/struct.UnionFindBase.html\" title=\"struct competitive::data_structure::union_find::UnionFindBase\">UnionFindBase</a>&lt;U, F, M, P, H&gt;<div class=\"where\">where\n    U: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UnionStrategy.html\" title=\"trait competitive::data_structure::union_find::UnionStrategy\">UnionStrategy</a>,\n    F: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.FindStrategy.html\" title=\"trait competitive::data_structure::union_find::FindStrategy\">FindStrategy</a>,\n    M: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UfMergeSpec.html\" title=\"trait competitive::data_structure::union_find::UfMergeSpec\">UfMergeSpec</a>,\n    P: <a class=\"trait\" href=\"competitive/algebra/trait.Monoid.html\" title=\"trait competitive::algebra::Monoid\">Monoid</a>,\n    H: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UndoStrategy.html\" title=\"trait competitive::data_structure::union_find::UndoStrategy\">UndoStrategy</a>&lt;<a class=\"enum\" href=\"competitive/data_structure/union_find/enum.UfCell.html\" title=\"enum competitive::data_structure::union_find::UfCell\">UfCell</a>&lt;U, M, P&gt;&gt;,</div></h3></section></summary><div class=\"impl-items\"><details class=\"toggle method-toggle\" open><summary><section id=\"method.same\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#338-340\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.same\" class=\"fn\">same</a>(&amp;mut self, x: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>, y: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>) -&gt; <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.bool.html\">bool</a></h4></section></summary><div class=\"docblock scraped-example-list\"><span></span><h5 id=\"scraped-examples\"><a href=\"#scraped-examples\">Examples found in repository</a><a class=\"scrape-help\" href=\"scrape-examples-help.html\">?</a></h5><div class=\"scraped-example\" data-locs=\"[[[10,10],&#34;src/aizu_online_judge/dsl/dsl_1_a.rs.html#16&#34;,&#34;line 16&#34;]]\"><div class=\"scraped-example-title\">crates/aizu_online_judge/src/dsl/dsl_1_a.rs (<a href=\"src/aizu_online_judge/dsl/dsl_1_a.rs.html#16\">line 16</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>6</span><span class=\"kw\">pub fn </span>dsl_1_a(reader: <span class=\"kw\">impl </span>Read, <span class=\"kw-2\">mut </span>writer: <span class=\"kw\">impl </span>Write) {\n<span data-nosnippet>7</span>    <span class=\"kw\">let </span>s = read_all_unchecked(reader);\n<span data-nosnippet>8</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>scanner = Scanner::new(<span class=\"kw-2\">&amp;</span>s);\n<span data-nosnippet>9</span>    <span class=\"macro\">scan!</span>(scanner, n, q);\n<span data-nosnippet>10</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = UnionFind::new(n);\n<span data-nosnippet>11</span>    <span class=\"kw\">for _ in </span><span class=\"number\">0</span>..q {\n<span data-nosnippet>12</span>        <span class=\"macro\">scan!</span>(scanner, ty, x, y);\n<span data-nosnippet>13</span>        <span class=\"kw\">if </span>ty == <span class=\"number\">0 </span>{\n<span data-nosnippet>14</span>            uf.unite(x, y);\n<span data-nosnippet>15</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>16</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"{}\"</span>, (uf.<span class=\"highlight focus\">same</span>(x, y) <span class=\"kw\">as </span>usize)).ok();\n<span data-nosnippet>17</span>        }\n<span data-nosnippet>18</span>    }\n<span data-nosnippet>19</span>}</code></pre></div></div><details class=\"toggle more-examples-toggle\"><summary class=\"hideme\"><span>More examples</span></summary><div class=\"hide-more\">Hide additional examples</div><div class=\"more-scraped-examples\"><div class=\"toggle-line\"><div class=\"toggle-line-inner\"></div></div><div class=\"scraped-example\" data-locs=\"[[[10,10],&#34;src/library_checker/data_structure/unionfind.rs.html#16&#34;,&#34;line 16&#34;]]\"><div class=\"scraped-example-title\">crates/library_checker/src/data_structure/unionfind.rs (<a href=\"src/library_checker/data_structure/unionfind.rs.html#16\">line 16</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>6</span><span class=\"kw\">pub fn </span>unionfind(reader: <span class=\"kw\">impl </span>Read, <span class=\"kw-2\">mut </span>writer: <span class=\"kw\">impl </span>Write) {\n<span data-nosnippet>7</span>    <span class=\"kw\">let </span>s = read_all_unchecked(reader);\n<span data-nosnippet>8</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>scanner = Scanner::new(<span class=\"kw-2\">&amp;</span>s);\n<span data-nosnippet>9</span>    <span class=\"macro\">scan!</span>(scanner, n, q);\n<span data-nosnippet>10</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = UnionFind::new(n);\n<span data-nosnippet>11</span>    <span class=\"kw\">for _ in </span><span class=\"number\">0</span>..q {\n<span data-nosnippet>12</span>        <span class=\"macro\">scan!</span>(scanner, ty, u, v);\n<span data-nosnippet>13</span>        <span class=\"kw\">if </span>ty == <span class=\"number\">0 </span>{\n<span data-nosnippet>14</span>            uf.unite(u, v);\n<span data-nosnippet>15</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>16</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"{}\"</span>, uf.<span class=\"highlight focus\">same</span>(u, v) <span class=\"kw\">as </span>usize).ok();\n<span data-nosnippet>17</span>        }\n<span data-nosnippet>18</span>    }\n<span data-nosnippet>19</span>}</code></pre></div></div><div class=\"scraped-example\" data-locs=\"[[[27,27],&#34;src/competitive/algorithm/solve_01_on_tree.rs.html#69&#34;,&#34;line 69&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/algorithm/solve_01_on_tree.rs (<a href=\"src/competitive/algorithm/solve_01_on_tree.rs.html#69\">line 69</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>42</span><span class=\"kw\">pub fn </span>solve_01_on_tree(\n<span data-nosnippet>43</span>    n: usize,\n<span data-nosnippet>44</span>    c01: <span class=\"kw\">impl </span>Fn(usize) -&gt; (usize, usize),\n<span data-nosnippet>45</span>    root: usize,\n<span data-nosnippet>46</span>    parent: <span class=\"kw\">impl </span>Fn(usize) -&gt; usize,\n<span data-nosnippet>47</span>) -&gt; (usize, Vec&lt;usize&gt;) {\n<span data-nosnippet>48</span>    <span class=\"kw\">pub type </span>UF&lt;T, M&gt; =\n<span data-nosnippet>49</span>        UnionFindBase&lt;(), union_find::PathCompression, union_find::FnMerger&lt;T, M&gt;, (), ()&gt;;\n<span data-nosnippet>50</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>cost = <span class=\"number\">0usize</span>;\n<span data-nosnippet>51</span>    <span class=\"kw\">let </span>c01 = |u| {\n<span data-nosnippet>52</span>        <span class=\"kw\">let </span>c = c01(u);\n<span data-nosnippet>53</span>        Count01::new(c.<span class=\"number\">0</span>, c.<span class=\"number\">1</span>)\n<span data-nosnippet>54</span>    };\n<span data-nosnippet>55</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = UF::new_with_merger(n, <span class=\"kw-2\">&amp;</span>c01, |x, y| {\n<span data-nosnippet>56</span>        cost += x.cnt1 * y.cnt0;\n<span data-nosnippet>57</span>        <span class=\"kw-2\">*</span>x += <span class=\"kw-2\">*</span>y;\n<span data-nosnippet>58</span>    });\n<span data-nosnippet>59</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>label = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; n];\n<span data-nosnippet>60</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>heap = BinaryHeap::from_iter((<span class=\"number\">0</span>..n).filter(|<span class=\"kw-2\">&amp;</span>u| <span class=\"macro\">u !</span>= root).map(|u| (c01(u), u, <span class=\"number\">0</span>)));\n<span data-nosnippet>61</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>next: Vec&lt;<span class=\"kw\">_</span>&gt; = (<span class=\"number\">0</span>..n).collect();\n<span data-nosnippet>62</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ord = <a href=\"https://doc.rust-lang.org/nightly/core/ops/arith/trait.Add.html\">Vec</a>::with_capacity(n);\n<span data-nosnippet>63</span>    <span class=\"kw\">while let </span><span class=\"prelude-val\">Some</span>((_c, u, l)) = heap.pop() {\n<span data-nosnippet>64</span>        <span class=\"kw\">if </span>label[u] != l {\n<span data-nosnippet>65</span>            <span class=\"kw\">continue</span>;\n<span data-nosnippet>66</span>        }\n<span data-nosnippet>67</span>        <span class=\"kw\">let </span>p = uf.find_root(parent(u));\n<span data-nosnippet>68</span>        uf.unite(u, p);\n<span data-nosnippet>69</span>        <span class=\"macro\">if !</span>uf.<span class=\"highlight focus\">same</span>(p, root) {\n<span data-nosnippet>70</span>            label[p] += <span class=\"number\">1</span>;\n<span data-nosnippet>71</span>            heap.push((<span class=\"kw-2\">*</span>uf.merge_data(p), p, label[p]));\n<span data-nosnippet>72</span>        }\n<span data-nosnippet>73</span>        next.swap(u, p);\n<span data-nosnippet>74</span>    }\n<span data-nosnippet>75</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>u = next[root];\n<span data-nosnippet>76</span>    ord.push(u);\n<span data-nosnippet>77</span>    <span class=\"kw\">while </span><span class=\"macro\">u !</span>= root {\n<span data-nosnippet>78</span>        u = next[u];\n<span data-nosnippet>79</span>        ord.push(u);\n<span data-nosnippet>80</span>    }\n<span data-nosnippet>81</span>    ord.reverse();\n<span data-nosnippet>82</span>    (cost, ord)\n<span data-nosnippet>83</span>}</code></pre></div></div></div></details></div></details><details class=\"toggle method-toggle\" open><summary><section id=\"method.merge_data\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#342-348\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.merge_data\" class=\"fn\">merge_data</a>(&amp;mut self, x: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>) -&gt; &amp;M::<a class=\"associatedtype\" href=\"competitive/data_structure/union_find/trait.UfMergeSpec.html#associatedtype.Data\" title=\"type competitive::data_structure::union_find::UfMergeSpec::Data\">Data</a></h4></section></summary><div class=\"docblock scraped-example-list\"><span></span><h5 id=\"scraped-examples-1\"><a href=\"#scraped-examples-1\">Examples found in repository</a><a class=\"scrape-help\" href=\"scrape-examples-help.html\">?</a></h5><div class=\"scraped-example\" data-locs=\"[[[29,29],&#34;src/competitive/algorithm/solve_01_on_tree.rs.html#71&#34;,&#34;line 71&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/algorithm/solve_01_on_tree.rs (<a href=\"src/competitive/algorithm/solve_01_on_tree.rs.html#71\">line 71</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>42</span><span class=\"kw\">pub fn </span>solve_01_on_tree(\n<span data-nosnippet>43</span>    n: usize,\n<span data-nosnippet>44</span>    c01: <span class=\"kw\">impl </span>Fn(usize) -&gt; (usize, usize),\n<span data-nosnippet>45</span>    root: usize,\n<span data-nosnippet>46</span>    parent: <span class=\"kw\">impl </span>Fn(usize) -&gt; usize,\n<span data-nosnippet>47</span>) -&gt; (usize, Vec&lt;usize&gt;) {\n<span data-nosnippet>48</span>    <span class=\"kw\">pub type </span>UF&lt;T, M&gt; =\n<span data-nosnippet>49</span>        UnionFindBase&lt;(), union_find::PathCompression, union_find::FnMerger&lt;T, M&gt;, (), ()&gt;;\n<span data-nosnippet>50</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>cost = <span class=\"number\">0usize</span>;\n<span data-nosnippet>51</span>    <span class=\"kw\">let </span>c01 = |u| {\n<span data-nosnippet>52</span>        <span class=\"kw\">let </span>c = c01(u);\n<span data-nosnippet>53</span>        Count01::new(c.<span class=\"number\">0</span>, c.<span class=\"number\">1</span>)\n<span data-nosnippet>54</span>    };\n<span data-nosnippet>55</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = UF::new_with_merger(n, <span class=\"kw-2\">&amp;</span>c01, |x, y| {\n<span data-nosnippet>56</span>        cost += x.cnt1 * y.cnt0;\n<span data-nosnippet>57</span>        <span class=\"kw-2\">*</span>x += <span class=\"kw-2\">*</span>y;\n<span data-nosnippet>58</span>    });\n<span data-nosnippet>59</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>label = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; n];\n<span data-nosnippet>60</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>heap = BinaryHeap::from_iter((<span class=\"number\">0</span>..n).filter(|<span class=\"kw-2\">&amp;</span>u| <span class=\"macro\">u !</span>= root).map(|u| (c01(u), u, <span class=\"number\">0</span>)));\n<span data-nosnippet>61</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>next: Vec&lt;<span class=\"kw\">_</span>&gt; = (<span class=\"number\">0</span>..n).collect();\n<span data-nosnippet>62</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ord = <a href=\"https://doc.rust-lang.org/nightly/core/ops/arith/trait.Add.html\">Vec</a>::with_capacity(n);\n<span data-nosnippet>63</span>    <span class=\"kw\">while let </span><span class=\"prelude-val\">Some</span>((_c, u, l)) = heap.pop() {\n<span data-nosnippet>64</span>        <span class=\"kw\">if </span>label[u] != l {\n<span data-nosnippet>65</span>            <span class=\"kw\">continue</span>;\n<span data-nosnippet>66</span>        }\n<span data-nosnippet>67</span>        <span class=\"kw\">let </span>p = uf.find_root(parent(u));\n<span data-nosnippet>68</span>        uf.unite(u, p);\n<span data-nosnippet>69</span>        <span class=\"macro\">if !</span>uf.same(p, root) {\n<span data-nosnippet>70</span>            label[p] += <span class=\"number\">1</span>;\n<span data-nosnippet>71</span>            heap.push((<span class=\"kw-2\">*</span>uf.<span class=\"highlight focus\">merge_data</span>(p), p, label[p]));\n<span data-nosnippet>72</span>        }\n<span data-nosnippet>73</span>        next.swap(u, p);\n<span data-nosnippet>74</span>    }\n<span data-nosnippet>75</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>u = next[root];\n<span data-nosnippet>76</span>    ord.push(u);\n<span data-nosnippet>77</span>    <span class=\"kw\">while </span><span class=\"macro\">u !</span>= root {\n<span data-nosnippet>78</span>        u = next[u];\n<span data-nosnippet>79</span>        ord.push(u);\n<span data-nosnippet>80</span>    }\n<span data-nosnippet>81</span>    ord.reverse();\n<span data-nosnippet>82</span>    (cost, ord)\n<span data-nosnippet>83</span>}</code></pre></div></div></div></details><details class=\"toggle method-toggle\" open><summary><section id=\"method.merge_data_mut\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#350-356\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.merge_data_mut\" class=\"fn\">merge_data_mut</a>(&amp;mut self, x: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>) -&gt; &amp;mut M::<a class=\"associatedtype\" href=\"competitive/data_structure/union_find/trait.UfMergeSpec.html#associatedtype.Data\" title=\"type competitive::data_structure::union_find::UfMergeSpec::Data\">Data</a></h4></section></summary><div class=\"docblock scraped-example-list\"><span></span><h5 id=\"scraped-examples-2\"><a href=\"#scraped-examples-2\">Examples found in repository</a><a class=\"scrape-help\" href=\"scrape-examples-help.html\">?</a></h5><div class=\"scraped-example\" data-locs=\"[[[34,34],&#34;src/competitive/graph/minimum_spanning_arborescence.rs.html#39&#34;,&#34;line 39&#34;],[[51,51],&#34;src/competitive/graph/minimum_spanning_arborescence.rs.html#56&#34;,&#34;line 56&#34;],[[56,56],&#34;src/competitive/graph/minimum_spanning_arborescence.rs.html#61&#34;,&#34;line 61&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/graph/minimum_spanning_arborescence.rs (<a href=\"src/competitive/graph/minimum_spanning_arborescence.rs.html#39\">line 39</a>)</div><div class=\"example-wrap digits-3\"><pre class=\"rust\"><code><span data-nosnippet>5</span>    <span class=\"kw\">pub fn </span>minimum_spanning_arborescence&lt;G, F&gt;(\n<span data-nosnippet>6</span>        <span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>,\n<span data-nosnippet>7</span>        root: usize,\n<span data-nosnippet>8</span>        weight: F,\n<span data-nosnippet>9</span>    ) -&gt; <span class=\"prelude-ty\">Option</span>&lt;(G::T, Vec&lt;usize&gt;)&gt;\n<span data-nosnippet>10</span>    <span class=\"kw\">where\n<span data-nosnippet>11</span>        </span>G: Group&lt;T: Ord&gt;,\n<span data-nosnippet>12</span>        F: Fn(usize) -&gt; G::T,\n<span data-nosnippet>13</span>    {\n<span data-nosnippet>14</span>        <span class=\"kw\">struct </span>WeightAct&lt;G&gt;(std::marker::PhantomData&lt;<span class=\"kw\">fn</span>() -&gt; G&gt;);\n<span data-nosnippet>15</span>        <span class=\"kw\">impl</span>&lt;G&gt; MonoidAct <span class=\"kw\">for </span>WeightAct&lt;G&gt;\n<span data-nosnippet>16</span>        <span class=\"kw\">where\n<span data-nosnippet>17</span>            </span>G: Group,\n<span data-nosnippet>18</span>        {\n<span data-nosnippet>19</span>            <span class=\"kw\">type </span>Key = (G::T, usize);\n<span data-nosnippet>20</span>            <span class=\"kw\">type </span>Act = G::T;\n<span data-nosnippet>21</span>            <span class=\"kw\">type </span>ActMonoid = G;\n<span data-nosnippet>22</span>\n<span data-nosnippet>23</span>            <span class=\"kw\">fn </span>act(x: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Key, a: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Act) -&gt; <span class=\"self\">Self</span>::Key {\n<span data-nosnippet>24</span>                (G::operate(<span class=\"kw-2\">&amp;</span>x.<span class=\"number\">0</span>, a), x.<span class=\"number\">1</span>)\n<span data-nosnippet>25</span>            }\n<span data-nosnippet>26</span>\n<span data-nosnippet>27</span>            <span class=\"kw\">fn </span>act_assign(x: <span class=\"kw-2\">&amp;mut </span><span class=\"self\">Self</span>::Key, a: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Act) {\n<span data-nosnippet>28</span>                x.<span class=\"number\">0 </span>= G::operate(<span class=\"kw-2\">&amp;</span>x.<span class=\"number\">0</span>, a);\n<span data-nosnippet>29</span>            }\n<span data-nosnippet>30</span>        }\n<span data-nosnippet>31</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = MergingUnionFind::new_with_merger(\n<span data-nosnippet>32</span>            <span class=\"self\">self</span>.vertices_size(),\n<span data-nosnippet>33</span>            |<span class=\"kw\">_</span>| PairingHeap::&lt;(G::T, usize), Less, WeightAct&lt;G&gt;&gt;::default(),\n<span data-nosnippet>34</span>            |x, y| x.append(y),\n<span data-nosnippet>35</span>        );\n<span data-nosnippet>36</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>state = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; <span class=\"self\">self</span>.vertices_size()]; <span class=\"comment\">// 0: unprocessed, 1: in process, 2: completed\n<span data-nosnippet>37</span>        </span>state[root] = <span class=\"number\">2</span>;\n<span data-nosnippet>38</span>        <span class=\"kw\">for </span>(id, <span class=\"kw-2\">&amp;</span>(<span class=\"kw\">_</span>, to)) <span class=\"kw\">in </span><span class=\"self\">self</span>.edges().enumerate() {\n<span data-nosnippet>39</span>            uf.<span class=\"highlight focus\">merge_data_mut</span>(to).push((weight(id), id));\n<span data-nosnippet>40</span>        }\n<span data-nosnippet>41</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>paredge = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; <span class=\"self\">self</span>.edges_size()];\n<span data-nosnippet>42</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ord = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>43</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>leaf = <span class=\"macro\">vec!</span>[<span class=\"self\">self</span>.edges_size(); <span class=\"self\">self</span>.vertices_size()];\n<span data-nosnippet>44</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>cycle = <span class=\"number\">0usize</span>;\n<span data-nosnippet>45</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>acc = G::unit();\n<span data-nosnippet>46</span>        <span class=\"kw\">for </span><span class=\"kw-2\">mut </span>cur <span class=\"kw\">in </span><span class=\"self\">self</span>.vertices() {\n<span data-nosnippet>47</span>            <span class=\"kw\">if </span>state[cur] != <span class=\"number\">0 </span>{\n<span data-nosnippet>48</span>                <span class=\"kw\">continue</span>;\n<span data-nosnippet>49</span>            }\n<span data-nosnippet>50</span>            <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>path = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>51</span>            <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ch = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>52</span>            <span class=\"kw\">while </span>state[cur] != <span class=\"number\">2 </span>{\n<span data-nosnippet>53</span>                path.push(cur);\n<span data-nosnippet>54</span>                state[cur] = <span class=\"number\">1</span>;\n<span data-nosnippet>55</span>                <span class=\"kw\">let </span>(w, eid) = {\n<span data-nosnippet>56</span>                    <span class=\"kw\">match </span>uf.<span class=\"highlight\">merge_data_mut</span>(cur).pop() {\n<span data-nosnippet>57</span>                        <span class=\"prelude-val\">Some</span>((w, eid)) =&gt; (w, eid),\n<span data-nosnippet>58</span>                        <span class=\"prelude-val\">None </span>=&gt; <span class=\"kw\">return </span><span class=\"prelude-val\">None</span>,\n<span data-nosnippet>59</span>                    }\n<span data-nosnippet>60</span>                };\n<span data-nosnippet>61</span>                uf.<span class=\"highlight\">merge_data_mut</span>(cur).apply_all(G::inverse(<span class=\"kw-2\">&amp;</span>w));\n<span data-nosnippet>62</span>                acc = G::operate(<span class=\"kw-2\">&amp;</span>acc, <span class=\"kw-2\">&amp;</span>w);\n<span data-nosnippet>63</span>                ord.push(eid);\n<span data-nosnippet>64</span>                <span class=\"kw\">let </span>(u, v) = <span class=\"self\">self</span>[eid];\n<span data-nosnippet>65</span>                <span class=\"kw\">if </span>leaf[v] &gt;= <span class=\"self\">self</span>.edges_size() {\n<span data-nosnippet>66</span>                    leaf[v] = eid;\n<span data-nosnippet>67</span>                }\n<span data-nosnippet>68</span>                <span class=\"kw\">while </span>cycle &gt; <span class=\"number\">0 </span>{\n<span data-nosnippet>69</span>                    paredge[ch.pop().unwrap()] = eid;\n<span data-nosnippet>70</span>                    cycle -= <span class=\"number\">1</span>;\n<span data-nosnippet>71</span>                }\n<span data-nosnippet>72</span>                ch.push(eid);\n<span data-nosnippet>73</span>                <span class=\"kw\">if </span>state[uf.find_root(u)] == <span class=\"number\">1 </span>{\n<span data-nosnippet>74</span>                    <span class=\"kw\">while let </span><span class=\"prelude-val\">Some</span>(t) = path.pop() {\n<span data-nosnippet>75</span>                        state[t] = <span class=\"number\">2</span>;\n<span data-nosnippet>76</span>                        cycle += <span class=\"number\">1</span>;\n<span data-nosnippet>77</span>                        <span class=\"macro\">if !</span>uf.unite(u, t) {\n<span data-nosnippet>78</span>                            <span class=\"kw\">break</span>;\n<span data-nosnippet>79</span>                        }\n<span data-nosnippet>80</span>                    }\n<span data-nosnippet>81</span>                    state[uf.find_root(u)] = <span class=\"number\">1</span>;\n<span data-nosnippet>82</span>                }\n<span data-nosnippet>83</span>                cur = uf.find_root(u);\n<span data-nosnippet>84</span>            }\n<span data-nosnippet>85</span>            <span class=\"kw\">for </span>u <span class=\"kw\">in </span>path.into_iter() {\n<span data-nosnippet>86</span>                state[u] = <span class=\"number\">2</span>;\n<span data-nosnippet>87</span>            }\n<span data-nosnippet>88</span>        }\n<span data-nosnippet>89</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>tree = <span class=\"macro\">vec!</span>[root; <span class=\"self\">self</span>.vertices_size()];\n<span data-nosnippet>90</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>used = <span class=\"macro\">vec!</span>[<span class=\"bool-val\">false</span>; <span class=\"self\">self</span>.edges_size()];\n<span data-nosnippet>91</span>        <span class=\"kw\">for </span>eid <span class=\"kw\">in </span>ord.into_iter().rev() {\n<span data-nosnippet>92</span>            <span class=\"macro\">if !</span>used[eid] {\n<span data-nosnippet>93</span>                <span class=\"kw\">let </span>(u, v) = <span class=\"self\">self</span>[eid];\n<span data-nosnippet>94</span>                tree[v] = u;\n<span data-nosnippet>95</span>                <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>x = leaf[v];\n<span data-nosnippet>96</span>                <span class=\"kw\">while </span><span class=\"macro\">x !</span>= eid {\n<span data-nosnippet>97</span>                    used[x] = <span class=\"bool-val\">true</span>;\n<span data-nosnippet>98</span>                    x = paredge[x];\n<span data-nosnippet>99</span>                }\n<span data-nosnippet>100</span>            }\n<span data-nosnippet>101</span>        }\n<span data-nosnippet>102</span>        <span class=\"prelude-val\">Some</span>((acc, tree))\n<span data-nosnippet>103</span>    }</code></pre></div></div></div></details><section id=\"method.roots\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#358-360\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.roots\" class=\"fn\">roots</a>(&amp;self) -&gt; impl <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html\" title=\"trait core::iter::traits::iterator::Iterator\">Iterator</a>&lt;Item = <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>&gt; + '_</h4></section><section id=\"method.all_group_members\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#362-369\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.all_group_members\" class=\"fn\">all_group_members</a>(&amp;mut self) -&gt; <a class=\"struct\" href=\"https://doc.rust-lang.org/nightly/std/collections/hash/map/struct.HashMap.html\" title=\"struct std::collections::hash::map::HashMap\">HashMap</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>, <a class=\"struct\" href=\"https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>&gt;&gt;</h4></section><details class=\"toggle method-toggle\" open><summary><section id=\"method.find\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#371-385\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.find\" class=\"fn\">find</a>(&amp;mut self, x: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>) -&gt; (<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>, P::<a class=\"associatedtype\" href=\"competitive/algebra/trait.Magma.html#associatedtype.T\" title=\"type competitive::algebra::Magma::T\">T</a>)</h4></section></summary><div class=\"docblock scraped-example-list\"><span></span><h5 id=\"scraped-examples-3\"><a href=\"#scraped-examples-3\">Examples found in repository</a><a class=\"scrape-help\" href=\"scrape-examples-help.html\">?</a></h5><div class=\"scraped-example\" data-locs=\"[[[2,2],&#34;src/competitive/data_structure/union_find.rs.html#373&#34;,&#34;line 373&#34;],[[36,36],&#34;src/competitive/data_structure/union_find.rs.html#407&#34;,&#34;line 407&#34;],[[64,64],&#34;src/competitive/data_structure/union_find.rs.html#435&#34;,&#34;line 435&#34;],[[65,65],&#34;src/competitive/data_structure/union_find.rs.html#436&#34;,&#34;line 436&#34;],[[74,74],&#34;src/competitive/data_structure/union_find.rs.html#445&#34;,&#34;line 445&#34;],[[75,75],&#34;src/competitive/data_structure/union_find.rs.html#446&#34;,&#34;line 446&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/data_structure/union_find.rs (<a href=\"src/competitive/data_structure/union_find.rs.html#373\">line 373</a>)</div><div class=\"example-wrap digits-3\"><pre class=\"rust\"><code><span data-nosnippet>371</span>    <span class=\"kw\">pub fn </span>find(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize) -&gt; (usize, P::T) {\n<span data-nosnippet>372</span>        <span class=\"kw\">let </span>(parent_parent, parent_potential) = <span class=\"kw\">match </span><span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.cells[x] {\n<span data-nosnippet>373</span>            UfCell::Child((parent, <span class=\"kw\">_</span>)) =&gt; <span class=\"self\">self</span>.<span class=\"highlight focus\">find</span>(<span class=\"kw-2\">*</span>parent),\n<span data-nosnippet>374</span>            UfCell::Root(<span class=\"kw\">_</span>) =&gt; <span class=\"kw\">return </span>(x, P::unit()),\n<span data-nosnippet>375</span>        };\n<span data-nosnippet>376</span>        <span class=\"kw\">let </span>(parent, potential) = <span class=\"self\">self</span>.cells[x].child_mut().unwrap();\n<span data-nosnippet>377</span>        <span class=\"kw\">let </span>potential = <span class=\"kw\">if </span>F::CHENGE_ROOT {\n<span data-nosnippet>378</span>            <span class=\"kw-2\">*</span>parent = parent_parent;\n<span data-nosnippet>379</span>            <span class=\"kw-2\">*</span>potential = P::operate(<span class=\"kw-2\">&amp;</span>parent_potential, potential);\n<span data-nosnippet>380</span>            potential.clone()\n<span data-nosnippet>381</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>382</span>            P::operate(<span class=\"kw-2\">&amp;</span>parent_potential, potential)\n<span data-nosnippet>383</span>        };\n<span data-nosnippet>384</span>        (parent_parent, potential)\n<span data-nosnippet>385</span>    }\n<span data-nosnippet>386</span>\n<span data-nosnippet>387</span>    <span class=\"kw\">pub fn </span>find_root(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize) -&gt; usize {\n<span data-nosnippet>388</span>        <span class=\"kw\">let </span>(parent, parent_parent) = <span class=\"kw\">match </span><span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.cells[x] {\n<span data-nosnippet>389</span>            UfCell::Child((parent, <span class=\"kw\">_</span>)) =&gt; (<span class=\"kw-2\">*</span>parent, <span class=\"self\">self</span>.find_root(<span class=\"kw-2\">*</span>parent)),\n<span data-nosnippet>390</span>            UfCell::Root(<span class=\"kw\">_</span>) =&gt; <span class=\"kw\">return </span>x,\n<span data-nosnippet>391</span>        };\n<span data-nosnippet>392</span>        <span class=\"kw\">if </span>F::CHENGE_ROOT {\n<span data-nosnippet>393</span>            <span class=\"kw\">let </span>(cx, cp) = {\n<span data-nosnippet>394</span>                <span class=\"kw\">let </span>ptr = <span class=\"self\">self</span>.cells.as_mut_ptr();\n<span data-nosnippet>395</span>                <span class=\"kw\">unsafe </span>{ (<span class=\"kw-2\">&amp;mut *</span>ptr.add(x), <span class=\"kw-2\">&amp;*</span>ptr.add(parent)) }\n<span data-nosnippet>396</span>            };\n<span data-nosnippet>397</span>            <span class=\"kw\">let </span>(parent, potential) = cx.child_mut().unwrap();\n<span data-nosnippet>398</span>            <span class=\"kw-2\">*</span>parent = parent_parent;\n<span data-nosnippet>399</span>            <span class=\"kw\">if let </span>UfCell::Child((<span class=\"kw\">_</span>, ppot)) = <span class=\"kw-2\">&amp;</span>cp {\n<span data-nosnippet>400</span>                <span class=\"kw-2\">*</span>potential = P::operate(ppot, potential);\n<span data-nosnippet>401</span>            }\n<span data-nosnippet>402</span>        }\n<span data-nosnippet>403</span>        parent_parent\n<span data-nosnippet>404</span>    }\n<span data-nosnippet>405</span>\n<span data-nosnippet>406</span>    <span class=\"kw\">pub fn </span>unite_noninv(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize, y: usize, potential: P::T) -&gt; bool {\n<span data-nosnippet>407</span>        <span class=\"kw\">let </span>(rx, potx) = <span class=\"self\">self</span>.<span class=\"highlight\">find</span>(x);\n<span data-nosnippet>408</span>        <span class=\"kw\">let </span>ry = <span class=\"self\">self</span>.find_root(y);\n<span data-nosnippet>409</span>        <span class=\"kw\">if </span>rx == ry || <span class=\"macro\">y !</span>= ry {\n<span data-nosnippet>410</span>            <span class=\"kw\">return </span><span class=\"bool-val\">false</span>;\n<span data-nosnippet>411</span>        }\n<span data-nosnippet>412</span>        H::unite(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>.history, rx, ry, <span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.cells);\n<span data-nosnippet>413</span>        {\n<span data-nosnippet>414</span>            <span class=\"kw\">let </span>ptr = <span class=\"self\">self</span>.cells.as_mut_ptr();\n<span data-nosnippet>415</span>            <span class=\"kw\">let </span>(cx, cy) = <span class=\"kw\">unsafe </span>{ (<span class=\"kw-2\">&amp;mut *</span>ptr.add(rx), <span class=\"kw-2\">&amp;mut *</span>ptr.add(ry)) };\n<span data-nosnippet>416</span>            <span class=\"self\">self</span>.merger\n<span data-nosnippet>417</span>                .merge(<span class=\"kw-2\">&amp;mut </span>cx.root_mut().unwrap().<span class=\"number\">1</span>, <span class=\"kw-2\">&amp;mut </span>cy.root_mut().unwrap().<span class=\"number\">1</span>);\n<span data-nosnippet>418</span>        }\n<span data-nosnippet>419</span>        <span class=\"kw-2\">*</span><span class=\"self\">self</span>.root_info_mut(rx).unwrap() =\n<span data-nosnippet>420</span>            U::unite(<span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.root_info(rx).unwrap(), <span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.root_info(ry).unwrap());\n<span data-nosnippet>421</span>        <span class=\"self\">self</span>.cells[ry] = UfCell::Child((rx, P::operate(<span class=\"kw-2\">&amp;</span>potx, <span class=\"kw-2\">&amp;</span>potential)));\n<span data-nosnippet>422</span>        <span class=\"bool-val\">true\n<span data-nosnippet>423</span>    </span>}\n<span data-nosnippet>424</span>}\n<span data-nosnippet>425</span>\n<span data-nosnippet>426</span><span class=\"kw\">impl</span>&lt;U, F, M, P, H&gt; UnionFindBase&lt;U, F, M, P, H&gt;\n<span data-nosnippet>427</span><span class=\"kw\">where\n<span data-nosnippet>428</span>    </span>U: UnionStrategy,\n<span data-nosnippet>429</span>    F: FindStrategy,\n<span data-nosnippet>430</span>    M: UfMergeSpec,\n<span data-nosnippet>431</span>    P: Group,\n<span data-nosnippet>432</span>    H: UndoStrategy&lt;UfCell&lt;U, M, P&gt;&gt;,\n<span data-nosnippet>433</span>{\n<span data-nosnippet>434</span>    <span class=\"kw\">pub fn </span>difference(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize, y: usize) -&gt; <span class=\"prelude-ty\">Option</span>&lt;P::T&gt; {\n<span data-nosnippet>435</span>        <span class=\"kw\">let </span>(rx, potx) = <span class=\"self\">self</span>.<span class=\"highlight\">find</span>(x);\n<span data-nosnippet>436</span>        <span class=\"kw\">let </span>(ry, poty) = <span class=\"self\">self</span>.<span class=\"highlight\">find</span>(y);\n<span data-nosnippet>437</span>        <span class=\"kw\">if </span>rx == ry {\n<span data-nosnippet>438</span>            <span class=\"prelude-val\">Some</span>(P::operate(<span class=\"kw-2\">&amp;</span>P::inverse(<span class=\"kw-2\">&amp;</span>potx), <span class=\"kw-2\">&amp;</span>poty))\n<span data-nosnippet>439</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>440</span>            <span class=\"prelude-val\">None\n<span data-nosnippet>441</span>        </span>}\n<span data-nosnippet>442</span>    }\n<span data-nosnippet>443</span>\n<span data-nosnippet>444</span>    <span class=\"kw\">pub fn </span>unite_with(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize, y: usize, potential: P::T) -&gt; bool {\n<span data-nosnippet>445</span>        <span class=\"kw\">let </span>(<span class=\"kw-2\">mut </span>rx, potx) = <span class=\"self\">self</span>.<span class=\"highlight\">find</span>(x);\n<span data-nosnippet>446</span>        <span class=\"kw\">let </span>(<span class=\"kw-2\">mut </span>ry, poty) = <span class=\"self\">self</span>.<span class=\"highlight\">find</span>(y);\n<span data-nosnippet>447</span>        <span class=\"kw\">if </span>rx == ry {\n<span data-nosnippet>448</span>            <span class=\"kw\">return </span><span class=\"bool-val\">false</span>;\n<span data-nosnippet>449</span>        }\n<span data-nosnippet>450</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>xinfo = <span class=\"self\">self</span>.root_info(rx).unwrap();\n<span data-nosnippet>451</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>yinfo = <span class=\"self\">self</span>.root_info(ry).unwrap();\n<span data-nosnippet>452</span>        <span class=\"kw\">let </span>inverse = !U::check_directoin(<span class=\"kw-2\">&amp;</span>xinfo, <span class=\"kw-2\">&amp;</span>yinfo);\n<span data-nosnippet>453</span>        <span class=\"kw\">let </span>potential = <span class=\"kw\">if </span>inverse {\n<span data-nosnippet>454</span>            P::rinv_operate(<span class=\"kw-2\">&amp;</span>poty, <span class=\"kw-2\">&amp;</span>P::operate(<span class=\"kw-2\">&amp;</span>potx, <span class=\"kw-2\">&amp;</span>potential))\n<span data-nosnippet>455</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>456</span>            P::operate(<span class=\"kw-2\">&amp;</span>potx, <span class=\"kw-2\">&amp;</span>P::rinv_operate(<span class=\"kw-2\">&amp;</span>potential, <span class=\"kw-2\">&amp;</span>poty))\n<span data-nosnippet>457</span>        };\n<span data-nosnippet>458</span>        <span class=\"kw\">if </span>inverse {\n<span data-nosnippet>459</span>            swap(<span class=\"kw-2\">&amp;mut </span>rx, <span class=\"kw-2\">&amp;mut </span>ry);\n<span data-nosnippet>460</span>            swap(<span class=\"kw-2\">&amp;mut </span>xinfo, <span class=\"kw-2\">&amp;mut </span>yinfo);\n<span data-nosnippet>461</span>        }\n<span data-nosnippet>462</span>        H::unite(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>.history, rx, ry, <span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.cells);\n<span data-nosnippet>463</span>        {\n<span data-nosnippet>464</span>            <span class=\"kw\">let </span>ptr = <span class=\"self\">self</span>.cells.as_mut_ptr();\n<span data-nosnippet>465</span>            <span class=\"kw\">let </span>(cx, cy) = <span class=\"kw\">unsafe </span>{ (<span class=\"kw-2\">&amp;mut *</span>ptr.add(rx), <span class=\"kw-2\">&amp;mut *</span>ptr.add(ry)) };\n<span data-nosnippet>466</span>            <span class=\"self\">self</span>.merger\n<span data-nosnippet>467</span>                .merge(<span class=\"kw-2\">&amp;mut </span>cx.root_mut().unwrap().<span class=\"number\">1</span>, <span class=\"kw-2\">&amp;mut </span>cy.root_mut().unwrap().<span class=\"number\">1</span>);\n<span data-nosnippet>468</span>        }\n<span data-nosnippet>469</span>        <span class=\"kw-2\">*</span><span class=\"self\">self</span>.root_info_mut(rx).unwrap() = U::unite(<span class=\"kw-2\">&amp;</span>xinfo, <span class=\"kw-2\">&amp;</span>yinfo);\n<span data-nosnippet>470</span>        <span class=\"self\">self</span>.cells[ry] = UfCell::Child((rx, potential));\n<span data-nosnippet>471</span>        <span class=\"bool-val\">true\n<span data-nosnippet>472</span>    </span>}</code></pre></div></div></div></details><details class=\"toggle method-toggle\" open><summary><section id=\"method.find_root\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#387-404\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.find_root\" class=\"fn\">find_root</a>(&amp;mut self, x: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>) -&gt; <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a></h4></section></summary><div class=\"docblock scraped-example-list\"><span></span><h5 id=\"scraped-examples-4\"><a href=\"#scraped-examples-4\">Examples found in repository</a><a class=\"scrape-help\" href=\"scrape-examples-help.html\">?</a></h5><div class=\"scraped-example\" data-locs=\"[[[1,1],&#34;src/competitive/data_structure/union_find.rs.html#311&#34;,&#34;line 311&#34;],[[29,29],&#34;src/competitive/data_structure/union_find.rs.html#339&#34;,&#34;line 339&#34;],[[29,29],&#34;src/competitive/data_structure/union_find.rs.html#339&#34;,&#34;line 339&#34;],[[33,33],&#34;src/competitive/data_structure/union_find.rs.html#343&#34;,&#34;line 343&#34;],[[41,41],&#34;src/competitive/data_structure/union_find.rs.html#351&#34;,&#34;line 351&#34;],[[55,55],&#34;src/competitive/data_structure/union_find.rs.html#365&#34;,&#34;line 365&#34;],[[79,79],&#34;src/competitive/data_structure/union_find.rs.html#389&#34;,&#34;line 389&#34;],[[98,98],&#34;src/competitive/data_structure/union_find.rs.html#408&#34;,&#34;line 408&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/data_structure/union_find.rs (<a href=\"src/competitive/data_structure/union_find.rs.html#311\">line 311</a>)</div><div class=\"example-wrap digits-3\"><pre class=\"rust\"><code><span data-nosnippet>310</span>    <span class=\"kw\">pub fn </span>size(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize) -&gt; &lt;UnionBySize <span class=\"kw\">as </span>UnionStrategy&gt;::Info {\n<span data-nosnippet>311</span>        <span class=\"kw\">let </span>root = <span class=\"self\">self</span>.<span class=\"highlight focus\">find_root</span>(x);\n<span data-nosnippet>312</span>        <span class=\"self\">self</span>.root_info(root).unwrap()\n<span data-nosnippet>313</span>    }\n<span data-nosnippet>314</span>}\n<span data-nosnippet>315</span>\n<span data-nosnippet>316</span><span class=\"kw\">impl</span>&lt;U, F, M, P, H&gt; UnionFindBase&lt;U, F, M, P, H&gt;\n<span data-nosnippet>317</span><span class=\"kw\">where\n<span data-nosnippet>318</span>    </span>U: UnionStrategy,\n<span data-nosnippet>319</span>    F: FindStrategy,\n<span data-nosnippet>320</span>    M: UfMergeSpec,\n<span data-nosnippet>321</span>    P: Monoid,\n<span data-nosnippet>322</span>    H: UndoStrategy&lt;UfCell&lt;U, M, P&gt;&gt;,\n<span data-nosnippet>323</span>{\n<span data-nosnippet>324</span>    <span class=\"kw\">fn </span>root_info(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize) -&gt; <span class=\"prelude-ty\">Option</span>&lt;U::Info&gt; {\n<span data-nosnippet>325</span>        <span class=\"kw\">match </span><span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.cells[x] {\n<span data-nosnippet>326</span>            UfCell::Root((info, <span class=\"kw\">_</span>)) =&gt; <span class=\"prelude-val\">Some</span>(info.clone()),\n<span data-nosnippet>327</span>            UfCell::Child(<span class=\"kw\">_</span>) =&gt; <span class=\"prelude-val\">None</span>,\n<span data-nosnippet>328</span>        }\n<span data-nosnippet>329</span>    }\n<span data-nosnippet>330</span>\n<span data-nosnippet>331</span>    <span class=\"kw\">fn </span>root_info_mut(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, <a href=\"#151\">x</a>: usize) -&gt; <span class=\"prelude-ty\">Option</span>&lt;<span class=\"kw-2\">&amp;mut </span>U::Info&gt; {\n<span data-nosnippet>332</span>        <span class=\"kw\">match </span><span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>.cells[x] {\n<span data-nosnippet>333</span>            UfCell::Root((info, <span class=\"kw\">_</span>)) =&gt; <span class=\"prelude-val\">Some</span>(info),\n<span data-nosnippet>334</span>            UfCell::Child(<span class=\"kw\">_</span>) =&gt; <span class=\"prelude-val\">None</span>,\n<span data-nosnippet>335</span>        }\n<span data-nosnippet>336</span>    }\n<span data-nosnippet>337</span>\n<span data-nosnippet>338</span>    <span class=\"kw\">pub fn </span>same(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize, y: usize) -&gt; bool {\n<span data-nosnippet>339</span>        <span class=\"self\">self</span>.<span class=\"highlight\">find_root</span>(x) == <span class=\"self\">self</span>.<span class=\"highlight\">find_root</span>(y)\n<span data-nosnippet>340</span>    }\n<span data-nosnippet>341</span>\n<span data-nosnippet>342</span>    <span class=\"kw\">pub fn </span>merge_data(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize) -&gt; <span class=\"kw-2\">&amp;</span>M::Data {\n<span data-nosnippet>343</span>        <span class=\"kw\">let </span>root = <span class=\"self\">self</span>.<span class=\"highlight\">find_root</span>(x);\n<span data-nosnippet>344</span>        <span class=\"kw\">match </span><span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.cells[root] {\n<span data-nosnippet>345</span>            UfCell::Root((<span class=\"kw\">_</span>, data)) =&gt; data,\n<span data-nosnippet>346</span>            UfCell::Child(<span class=\"kw\">_</span>) =&gt; <span class=\"macro\">unreachable!</span>(),\n<span data-nosnippet>347</span>        }\n<span data-nosnippet>348</span>    }\n<span data-nosnippet>349</span>\n<span data-nosnippet>350</span>    <span class=\"kw\">pub fn </span>merge_data_mut(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize) -&gt; <span class=\"kw-2\">&amp;mut </span>M::Data {\n<span data-nosnippet>351</span>        <span class=\"kw\">let </span><a href=\"https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.Some\">root</a> = <span class=\"self\">self</span>.<span class=\"highlight\">find_root</span>(x);\n<span data-nosnippet>352</span>        <span class=\"kw\">match </span><span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>.cells[root] {\n<span data-nosnippet>353</span>            UfCell::Root((<span class=\"kw\">_</span>, data)) =&gt; data,\n<span data-nosnippet>354</span>            UfCell::Child(<span class=\"kw\">_</span>) =&gt; <span class=\"macro\">unreachable!</span>(),\n<span data-nosnippet>355</span>        }\n<span data-nosnippet>356</span>    }\n<span data-nosnippet>357</span>\n<span data-nosnippet>358</span>    <span class=\"kw\">pub fn </span>roots(<span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>) -&gt; <span class=\"kw\">impl </span>Iterator&lt;Item = usize&gt; + <span class=\"lifetime\">'_ </span>{\n<span data-nosnippet>359</span>        (<span class=\"number\">0</span>..<span class=\"self\">self</span>.cells.len()).filter(|<span class=\"kw-2\">&amp;</span>x| <span class=\"macro\">matches!</span>(<span class=\"self\">self</span>.cells[x], UfCell::Root(<span class=\"kw\">_</span>)))\n<span data-nosnippet>360</span>    }\n<span data-nosnippet>361</span>\n<span data-nosnippet>362</span>    <span class=\"kw\">pub fn </span>all_group_members(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>) -&gt; HashMap&lt;usize, Vec&lt;usize&gt;&gt; {\n<span data-nosnippet>363</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>groups_map = HashMap::new();\n<span data-nosnippet>364</span>        <span class=\"kw\">for </span>x <span class=\"kw\">in </span><span class=\"number\">0</span>..<span class=\"self\">self</span>.cells.len() {\n<span data-nosnippet>365</span>            <span class=\"kw\">let </span>r = <span class=\"self\">self</span>.<span class=\"highlight\">find_root</span>(x);\n<span data-nosnippet>366</span>            groups_map.entry(r).or_insert_with(Vec::new).push(x);\n<span data-nosnippet>367</span>        }\n<span data-nosnippet>368</span>        groups_map\n<span data-nosnippet>369</span>    }\n<span data-nosnippet>370</span>\n<span data-nosnippet>371</span>    <span class=\"kw\">pub fn </span>find(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize) -&gt; (usize, P::T) {\n<span data-nosnippet>372</span>        <span class=\"kw\">let </span>(parent_parent, parent_potential) = <span class=\"kw\">match </span><span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.cells[x] {\n<span data-nosnippet>373</span>            UfCell::Child((parent, <span class=\"kw\">_</span>)) =&gt; <span class=\"self\">self</span>.find(<span class=\"kw-2\">*</span>parent),\n<span data-nosnippet>374</span>            UfCell::Root(<span class=\"kw\">_</span>) =&gt; <span class=\"kw\">return </span>(x, P::unit()),\n<span data-nosnippet>375</span>        };\n<span data-nosnippet>376</span>        <span class=\"kw\">let </span>(parent, potential) = <span class=\"self\">self</span>.cells[x].child_mut().unwrap();\n<span data-nosnippet>377</span>        <span class=\"kw\">let </span>potential = <span class=\"kw\">if </span>F::CHENGE_ROOT {\n<span data-nosnippet>378</span>            <span class=\"kw-2\">*</span>parent = parent_parent;\n<span data-nosnippet>379</span>            <span class=\"kw-2\">*</span>potential = P::operate(<span class=\"kw-2\">&amp;</span>parent_potential, potential);\n<span data-nosnippet>380</span>            potential.clone()\n<span data-nosnippet>381</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>382</span>            P::operate(<span class=\"kw-2\">&amp;</span>parent_potential, potential)\n<span data-nosnippet>383</span>        };\n<span data-nosnippet>384</span>        (parent_parent, potential)\n<span data-nosnippet>385</span>    }\n<span data-nosnippet>386</span>\n<span data-nosnippet>387</span>    <span class=\"kw\">pub fn </span>find_root(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize) -&gt; usize {\n<span data-nosnippet>388</span>        <span class=\"kw\">let </span>(parent, parent_parent) = <span class=\"kw\">match </span><span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.cells[x] {\n<span data-nosnippet>389</span>            UfCell::Child((parent, <span class=\"kw\">_</span>)) =&gt; (<span class=\"kw-2\">*</span>parent, <span class=\"self\">self</span>.<span class=\"highlight\">find_root</span>(<span class=\"kw-2\">*</span>parent)),\n<span data-nosnippet>390</span>            UfCell::Root(<span class=\"kw\">_</span>) =&gt; <span class=\"kw\">return </span>x,\n<span data-nosnippet>391</span>        };\n<span data-nosnippet>392</span>        <span class=\"kw\">if </span>F::CHENGE_ROOT {\n<span data-nosnippet>393</span>            <span class=\"kw\">let </span>(cx, cp) = {\n<span data-nosnippet>394</span>                <span class=\"kw\">let </span>ptr = <span class=\"self\">self</span>.cells.as_mut_ptr();\n<span data-nosnippet>395</span>                <span class=\"kw\">unsafe </span>{ (<span class=\"kw-2\">&amp;mut *</span>ptr.add(x), <span class=\"kw-2\">&amp;*</span>ptr.add(parent)) }\n<span data-nosnippet>396</span>            };\n<span data-nosnippet>397</span>            <span class=\"kw\">let </span>(parent, potential) = cx.child_mut().unwrap();\n<span data-nosnippet>398</span>            <span class=\"kw-2\">*</span>parent = parent_parent;\n<span data-nosnippet>399</span>            <span class=\"kw\">if let </span>UfCell::Child((<span class=\"kw\">_</span>, ppot)) = <span class=\"kw-2\">&amp;</span>cp {\n<span data-nosnippet>400</span>                <span class=\"kw-2\">*</span>potential = P::operate(ppot, potential);\n<span data-nosnippet>401</span>            }\n<span data-nosnippet>402</span>        }\n<span data-nosnippet>403</span>        parent_parent\n<span data-nosnippet>404</span>    }\n<span data-nosnippet>405</span>\n<span data-nosnippet>406</span>    <span class=\"kw\">pub fn </span>unite_noninv(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize, y: usize, potential: P::T) -&gt; bool {\n<span data-nosnippet>407</span>        <span class=\"kw\">let </span>(rx, potx) = <span class=\"self\">self</span>.find(x);\n<span data-nosnippet>408</span>        <span class=\"kw\">let </span>ry = <span class=\"self\">self</span>.<span class=\"highlight\">find_root</span>(y);\n<span data-nosnippet>409</span>        <span class=\"kw\">if </span>rx == ry || <span class=\"macro\">y !</span>= ry {\n<span data-nosnippet>410</span>            <span class=\"kw\">return </span><span class=\"bool-val\">false</span>;\n<span data-nosnippet>411</span>        }\n<span data-nosnippet>412</span>        H::unite(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>.history, rx, ry, <span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.cells);\n<span data-nosnippet>413</span>        {\n<span data-nosnippet>414</span>            <span class=\"kw\">let </span>ptr = <span class=\"self\">self</span>.cells.as_mut_ptr();\n<span data-nosnippet>415</span>            <span class=\"kw\">let </span>(cx, cy) = <span class=\"kw\">unsafe </span>{ (<span class=\"kw-2\">&amp;mut *</span>ptr.add(rx), <span class=\"kw-2\">&amp;mut *</span>ptr.add(ry)) };\n<span data-nosnippet>416</span>            <span class=\"self\">self</span>.merger\n<span data-nosnippet>417</span>                .merge(<span class=\"kw-2\">&amp;mut </span>cx.root_mut().unwrap().<span class=\"number\">1</span>, <span class=\"kw-2\">&amp;mut </span>cy.root_mut().unwrap().<span class=\"number\">1</span>);\n<span data-nosnippet>418</span>        }\n<span data-nosnippet>419</span>        <span class=\"kw-2\">*</span><span class=\"self\">self</span>.root_info_mut(rx).unwrap() =\n<span data-nosnippet>420</span>            U::unite(<span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.root_info(rx).unwrap(), <span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>.root_info(ry).unwrap());\n<span data-nosnippet>421</span>        <span class=\"self\">self</span>.cells[ry] = UfCell::Child((rx, P::operate(<span class=\"kw-2\">&amp;</span>potx, <span class=\"kw-2\">&amp;</span>potential)));\n<span data-nosnippet>422</span>        <span class=\"bool-val\">true\n<span data-nosnippet>423</span>    </span>}</code></pre></div></div><details class=\"toggle more-examples-toggle\"><summary class=\"hideme\"><span>More examples</span></summary><div class=\"hide-more\">Hide additional examples</div><div class=\"more-scraped-examples\"><div class=\"toggle-line\"><div class=\"toggle-line-inner\"></div></div><div class=\"scraped-example\" data-locs=\"[[[25,25],&#34;src/competitive/algorithm/solve_01_on_tree.rs.html#67&#34;,&#34;line 67&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/algorithm/solve_01_on_tree.rs (<a href=\"src/competitive/algorithm/solve_01_on_tree.rs.html#67\">line 67</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>42</span><span class=\"kw\">pub fn </span>solve_01_on_tree(\n<span data-nosnippet>43</span>    n: usize,\n<span data-nosnippet>44</span>    c01: <span class=\"kw\">impl </span>Fn(usize) -&gt; (usize, usize),\n<span data-nosnippet>45</span>    root: usize,\n<span data-nosnippet>46</span>    parent: <span class=\"kw\">impl </span>Fn(usize) -&gt; usize,\n<span data-nosnippet>47</span>) -&gt; (usize, Vec&lt;usize&gt;) {\n<span data-nosnippet>48</span>    <span class=\"kw\">pub type </span>UF&lt;T, M&gt; =\n<span data-nosnippet>49</span>        UnionFindBase&lt;(), union_find::PathCompression, union_find::FnMerger&lt;T, M&gt;, (), ()&gt;;\n<span data-nosnippet>50</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>cost = <span class=\"number\">0usize</span>;\n<span data-nosnippet>51</span>    <span class=\"kw\">let </span>c01 = |u| {\n<span data-nosnippet>52</span>        <span class=\"kw\">let </span>c = c01(u);\n<span data-nosnippet>53</span>        Count01::new(c.<span class=\"number\">0</span>, c.<span class=\"number\">1</span>)\n<span data-nosnippet>54</span>    };\n<span data-nosnippet>55</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = UF::new_with_merger(n, <span class=\"kw-2\">&amp;</span>c01, |x, y| {\n<span data-nosnippet>56</span>        cost += x.cnt1 * y.cnt0;\n<span data-nosnippet>57</span>        <span class=\"kw-2\">*</span>x += <span class=\"kw-2\">*</span>y;\n<span data-nosnippet>58</span>    });\n<span data-nosnippet>59</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>label = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; n];\n<span data-nosnippet>60</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>heap = BinaryHeap::from_iter((<span class=\"number\">0</span>..n).filter(|<span class=\"kw-2\">&amp;</span>u| <span class=\"macro\">u !</span>= root).map(|u| (c01(u), u, <span class=\"number\">0</span>)));\n<span data-nosnippet>61</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>next: Vec&lt;<span class=\"kw\">_</span>&gt; = (<span class=\"number\">0</span>..n).collect();\n<span data-nosnippet>62</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ord = <a href=\"https://doc.rust-lang.org/nightly/core/ops/arith/trait.Add.html\">Vec</a>::with_capacity(n);\n<span data-nosnippet>63</span>    <span class=\"kw\">while let </span><span class=\"prelude-val\">Some</span>((_c, u, l)) = heap.pop() {\n<span data-nosnippet>64</span>        <span class=\"kw\">if </span>label[u] != l {\n<span data-nosnippet>65</span>            <span class=\"kw\">continue</span>;\n<span data-nosnippet>66</span>        }\n<span data-nosnippet>67</span>        <span class=\"kw\">let </span>p = uf.<span class=\"highlight focus\">find_root</span>(parent(u));\n<span data-nosnippet>68</span>        uf.unite(u, p);\n<span data-nosnippet>69</span>        <span class=\"macro\">if !</span>uf.same(p, root) {\n<span data-nosnippet>70</span>            label[p] += <span class=\"number\">1</span>;\n<span data-nosnippet>71</span>            heap.push((<span class=\"kw-2\">*</span>uf.merge_data(p), p, label[p]));\n<span data-nosnippet>72</span>        }\n<span data-nosnippet>73</span>        next.swap(u, p);\n<span data-nosnippet>74</span>    }\n<span data-nosnippet>75</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>u = next[root];\n<span data-nosnippet>76</span>    ord.push(u);\n<span data-nosnippet>77</span>    <span class=\"kw\">while </span><span class=\"macro\">u !</span>= root {\n<span data-nosnippet>78</span>        u = next[u];\n<span data-nosnippet>79</span>        ord.push(u);\n<span data-nosnippet>80</span>    }\n<span data-nosnippet>81</span>    ord.reverse();\n<span data-nosnippet>82</span>    (cost, ord)\n<span data-nosnippet>83</span>}</code></pre></div></div><div class=\"scraped-example\" data-locs=\"[[[68,68],&#34;src/competitive/graph/minimum_spanning_arborescence.rs.html#73&#34;,&#34;line 73&#34;],[[76,76],&#34;src/competitive/graph/minimum_spanning_arborescence.rs.html#81&#34;,&#34;line 81&#34;],[[78,78],&#34;src/competitive/graph/minimum_spanning_arborescence.rs.html#83&#34;,&#34;line 83&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/graph/minimum_spanning_arborescence.rs (<a href=\"src/competitive/graph/minimum_spanning_arborescence.rs.html#73\">line 73</a>)</div><div class=\"example-wrap digits-3\"><pre class=\"rust\"><code><span data-nosnippet>5</span>    <span class=\"kw\">pub fn </span>minimum_spanning_arborescence&lt;G, F&gt;(\n<span data-nosnippet>6</span>        <span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>,\n<span data-nosnippet>7</span>        root: usize,\n<span data-nosnippet>8</span>        weight: F,\n<span data-nosnippet>9</span>    ) -&gt; <span class=\"prelude-ty\">Option</span>&lt;(G::T, Vec&lt;usize&gt;)&gt;\n<span data-nosnippet>10</span>    <span class=\"kw\">where\n<span data-nosnippet>11</span>        </span>G: Group&lt;T: Ord&gt;,\n<span data-nosnippet>12</span>        F: Fn(usize) -&gt; G::T,\n<span data-nosnippet>13</span>    {\n<span data-nosnippet>14</span>        <span class=\"kw\">struct </span>WeightAct&lt;G&gt;(std::marker::PhantomData&lt;<span class=\"kw\">fn</span>() -&gt; G&gt;);\n<span data-nosnippet>15</span>        <span class=\"kw\">impl</span>&lt;G&gt; MonoidAct <span class=\"kw\">for </span>WeightAct&lt;G&gt;\n<span data-nosnippet>16</span>        <span class=\"kw\">where\n<span data-nosnippet>17</span>            </span>G: Group,\n<span data-nosnippet>18</span>        {\n<span data-nosnippet>19</span>            <span class=\"kw\">type </span>Key = (G::T, usize);\n<span data-nosnippet>20</span>            <span class=\"kw\">type </span>Act = G::T;\n<span data-nosnippet>21</span>            <span class=\"kw\">type </span>ActMonoid = G;\n<span data-nosnippet>22</span>\n<span data-nosnippet>23</span>            <span class=\"kw\">fn </span>act(x: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Key, a: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Act) -&gt; <span class=\"self\">Self</span>::Key {\n<span data-nosnippet>24</span>                (G::operate(<span class=\"kw-2\">&amp;</span>x.<span class=\"number\">0</span>, a), x.<span class=\"number\">1</span>)\n<span data-nosnippet>25</span>            }\n<span data-nosnippet>26</span>\n<span data-nosnippet>27</span>            <span class=\"kw\">fn </span>act_assign(x: <span class=\"kw-2\">&amp;mut </span><span class=\"self\">Self</span>::Key, a: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Act) {\n<span data-nosnippet>28</span>                x.<span class=\"number\">0 </span>= G::operate(<span class=\"kw-2\">&amp;</span>x.<span class=\"number\">0</span>, a);\n<span data-nosnippet>29</span>            }\n<span data-nosnippet>30</span>        }\n<span data-nosnippet>31</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = MergingUnionFind::new_with_merger(\n<span data-nosnippet>32</span>            <span class=\"self\">self</span>.vertices_size(),\n<span data-nosnippet>33</span>            |<span class=\"kw\">_</span>| PairingHeap::&lt;(G::T, usize), Less, WeightAct&lt;G&gt;&gt;::default(),\n<span data-nosnippet>34</span>            |x, y| x.append(y),\n<span data-nosnippet>35</span>        );\n<span data-nosnippet>36</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>state = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; <span class=\"self\">self</span>.vertices_size()]; <span class=\"comment\">// 0: unprocessed, 1: in process, 2: completed\n<span data-nosnippet>37</span>        </span>state[root] = <span class=\"number\">2</span>;\n<span data-nosnippet>38</span>        <span class=\"kw\">for </span>(id, <span class=\"kw-2\">&amp;</span>(<span class=\"kw\">_</span>, to)) <span class=\"kw\">in </span><span class=\"self\">self</span>.edges().enumerate() {\n<span data-nosnippet>39</span>            uf.merge_data_mut(to).push((weight(id), id));\n<span data-nosnippet>40</span>        }\n<span data-nosnippet>41</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>paredge = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; <span class=\"self\">self</span>.edges_size()];\n<span data-nosnippet>42</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ord = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>43</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>leaf = <span class=\"macro\">vec!</span>[<span class=\"self\">self</span>.edges_size(); <span class=\"self\">self</span>.vertices_size()];\n<span data-nosnippet>44</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>cycle = <span class=\"number\">0usize</span>;\n<span data-nosnippet>45</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>acc = G::unit();\n<span data-nosnippet>46</span>        <span class=\"kw\">for </span><span class=\"kw-2\">mut </span>cur <span class=\"kw\">in </span><span class=\"self\">self</span>.vertices() {\n<span data-nosnippet>47</span>            <span class=\"kw\">if </span>state[cur] != <span class=\"number\">0 </span>{\n<span data-nosnippet>48</span>                <span class=\"kw\">continue</span>;\n<span data-nosnippet>49</span>            }\n<span data-nosnippet>50</span>            <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>path = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>51</span>            <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ch = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>52</span>            <span class=\"kw\">while </span>state[cur] != <span class=\"number\">2 </span>{\n<span data-nosnippet>53</span>                path.push(cur);\n<span data-nosnippet>54</span>                state[cur] = <span class=\"number\">1</span>;\n<span data-nosnippet>55</span>                <span class=\"kw\">let </span>(w, eid) = {\n<span data-nosnippet>56</span>                    <span class=\"kw\">match </span>uf.merge_data_mut(cur).pop() {\n<span data-nosnippet>57</span>                        <span class=\"prelude-val\">Some</span>((w, eid)) =&gt; (w, eid),\n<span data-nosnippet>58</span>                        <span class=\"prelude-val\">None </span>=&gt; <span class=\"kw\">return </span><span class=\"prelude-val\">None</span>,\n<span data-nosnippet>59</span>                    }\n<span data-nosnippet>60</span>                };\n<span data-nosnippet>61</span>                uf.merge_data_mut(cur).apply_all(G::inverse(<span class=\"kw-2\">&amp;</span>w));\n<span data-nosnippet>62</span>                acc = G::operate(<span class=\"kw-2\">&amp;</span>acc, <span class=\"kw-2\">&amp;</span>w);\n<span data-nosnippet>63</span>                ord.push(eid);\n<span data-nosnippet>64</span>                <span class=\"kw\">let </span>(u, v) = <span class=\"self\">self</span>[eid];\n<span data-nosnippet>65</span>                <span class=\"kw\">if </span>leaf[v] &gt;= <span class=\"self\">self</span>.edges_size() {\n<span data-nosnippet>66</span>                    leaf[v] = eid;\n<span data-nosnippet>67</span>                }\n<span data-nosnippet>68</span>                <span class=\"kw\">while </span>cycle &gt; <span class=\"number\">0 </span>{\n<span data-nosnippet>69</span>                    paredge[ch.pop().unwrap()] = eid;\n<span data-nosnippet>70</span>                    cycle -= <span class=\"number\">1</span>;\n<span data-nosnippet>71</span>                }\n<span data-nosnippet>72</span>                ch.push(eid);\n<span data-nosnippet>73</span>                <span class=\"kw\">if </span>state[uf.<span class=\"highlight focus\">find_root</span>(u)] == <span class=\"number\">1 </span>{\n<span data-nosnippet>74</span>                    <span class=\"kw\">while let </span><span class=\"prelude-val\">Some</span>(t) = path.pop() {\n<span data-nosnippet>75</span>                        state[t] = <span class=\"number\">2</span>;\n<span data-nosnippet>76</span>                        cycle += <span class=\"number\">1</span>;\n<span data-nosnippet>77</span>                        <span class=\"macro\">if !</span>uf.unite(u, t) {\n<span data-nosnippet>78</span>                            <span class=\"kw\">break</span>;\n<span data-nosnippet>79</span>                        }\n<span data-nosnippet>80</span>                    }\n<span data-nosnippet>81</span>                    state[uf.<span class=\"highlight\">find_root</span>(u)] = <span class=\"number\">1</span>;\n<span data-nosnippet>82</span>                }\n<span data-nosnippet>83</span>                cur = uf.<span class=\"highlight\">find_root</span>(u);\n<span data-nosnippet>84</span>            }\n<span data-nosnippet>85</span>            <span class=\"kw\">for </span>u <span class=\"kw\">in </span>path.into_iter() {\n<span data-nosnippet>86</span>                state[u] = <span class=\"number\">2</span>;\n<span data-nosnippet>87</span>            }\n<span data-nosnippet>88</span>        }\n<span data-nosnippet>89</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>tree = <span class=\"macro\">vec!</span>[root; <span class=\"self\">self</span>.vertices_size()];\n<span data-nosnippet>90</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>used = <span class=\"macro\">vec!</span>[<span class=\"bool-val\">false</span>; <span class=\"self\">self</span>.edges_size()];\n<span data-nosnippet>91</span>        <span class=\"kw\">for </span>eid <span class=\"kw\">in </span>ord.into_iter().rev() {\n<span data-nosnippet>92</span>            <span class=\"macro\">if !</span>used[eid] {\n<span data-nosnippet>93</span>                <span class=\"kw\">let </span>(u, v) = <span class=\"self\">self</span>[eid];\n<span data-nosnippet>94</span>                tree[v] = u;\n<span data-nosnippet>95</span>                <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>x = leaf[v];\n<span data-nosnippet>96</span>                <span class=\"kw\">while </span><span class=\"macro\">x !</span>= eid {\n<span data-nosnippet>97</span>                    used[x] = <span class=\"bool-val\">true</span>;\n<span data-nosnippet>98</span>                    x = paredge[x];\n<span data-nosnippet>99</span>                }\n<span data-nosnippet>100</span>            }\n<span data-nosnippet>101</span>        }\n<span data-nosnippet>102</span>        <span class=\"prelude-val\">Some</span>((acc, tree))\n<span data-nosnippet>103</span>    }</code></pre></div></div></div></details></div></details><section id=\"method.unite_noninv\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#406-423\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.unite_noninv\" class=\"fn\">unite_noninv</a>(&amp;mut self, x: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>, y: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>, potential: P::<a class=\"associatedtype\" href=\"competitive/algebra/trait.Magma.html#associatedtype.T\" title=\"type competitive::algebra::Magma::T\">T</a>) -&gt; <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.bool.html\">bool</a></h4></section></div></details>",0,"competitive::data_structure::union_find::UnionFind","competitive::data_structure::union_find::MergingUnionFind","competitive::data_structure::union_find::PotentializedUnionFind","competitive::data_structure::union_find::UndoableUnionFind"],["<details class=\"toggle implementors-toggle\" open><summary><section id=\"impl-UnionFindBase%3CU,+F,+M,+P,+H%3E\" class=\"impl\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#426-477\">Source</a><a href=\"#impl-UnionFindBase%3CU,+F,+M,+P,+H%3E\" class=\"anchor\">§</a><h3 class=\"code-header\">impl&lt;U, F, M, P, H&gt; <a class=\"struct\" href=\"competitive/data_structure/union_find/struct.UnionFindBase.html\" title=\"struct competitive::data_structure::union_find::UnionFindBase\">UnionFindBase</a>&lt;U, F, M, P, H&gt;<div class=\"where\">where\n    U: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UnionStrategy.html\" title=\"trait competitive::data_structure::union_find::UnionStrategy\">UnionStrategy</a>,\n    F: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.FindStrategy.html\" title=\"trait competitive::data_structure::union_find::FindStrategy\">FindStrategy</a>,\n    M: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UfMergeSpec.html\" title=\"trait competitive::data_structure::union_find::UfMergeSpec\">UfMergeSpec</a>,\n    P: <a class=\"trait\" href=\"competitive/algebra/trait.Group.html\" title=\"trait competitive::algebra::Group\">Group</a>,\n    H: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UndoStrategy.html\" title=\"trait competitive::data_structure::union_find::UndoStrategy\">UndoStrategy</a>&lt;<a class=\"enum\" href=\"competitive/data_structure/union_find/enum.UfCell.html\" title=\"enum competitive::data_structure::union_find::UfCell\">UfCell</a>&lt;U, M, P&gt;&gt;,</div></h3></section></summary><div class=\"impl-items\"><details class=\"toggle method-toggle\" open><summary><section id=\"method.difference\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#434-442\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.difference\" class=\"fn\">difference</a>(&amp;mut self, x: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>, y: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>) -&gt; <a class=\"enum\" href=\"https://doc.rust-lang.org/nightly/core/option/enum.Option.html\" title=\"enum core::option::Option\">Option</a>&lt;P::<a class=\"associatedtype\" href=\"competitive/algebra/trait.Magma.html#associatedtype.T\" title=\"type competitive::algebra::Magma::T\">T</a>&gt;</h4></section></summary><div class=\"docblock scraped-example-list\"><span></span><h5 id=\"scraped-examples\"><a href=\"#scraped-examples\">Examples found in repository</a><a class=\"scrape-help\" href=\"scrape-examples-help.html\">?</a></h5><div class=\"scraped-example\" data-locs=\"[[[10,10],&#34;src/aizu_online_judge/dsl/dsl_1_b.rs.html#16&#34;,&#34;line 16&#34;]]\"><div class=\"scraped-example-title\">crates/aizu_online_judge/src/dsl/dsl_1_b.rs (<a href=\"src/aizu_online_judge/dsl/dsl_1_b.rs.html#16\">line 16</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>6</span><span class=\"kw\">pub fn </span>dsl_1_b(reader: <span class=\"kw\">impl </span>Read, <span class=\"kw-2\">mut </span>writer: <span class=\"kw\">impl </span>Write) {\n<span data-nosnippet>7</span>    <span class=\"kw\">let </span>s = read_all_unchecked(reader);\n<span data-nosnippet>8</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>scanner = Scanner::new(<span class=\"kw-2\">&amp;</span>s);\n<span data-nosnippet>9</span>    <span class=\"macro\">scan!</span>(scanner, n, q);\n<span data-nosnippet>10</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = PotentializedUnionFind::&lt;AdditiveOperation&lt;<span class=\"kw\">_</span>&gt;&gt;::new(n);\n<span data-nosnippet>11</span>    <span class=\"kw\">for _ in </span><span class=\"number\">0</span>..q {\n<span data-nosnippet>12</span>        <span class=\"macro\">scan!</span>(scanner, ty, x, y);\n<span data-nosnippet>13</span>        <span class=\"kw\">if </span>ty == <span class=\"number\">0 </span>{\n<span data-nosnippet>14</span>            <span class=\"macro\">scan!</span>(scanner, w: i64);\n<span data-nosnippet>15</span>            uf.unite_with(x, y, w);\n<span data-nosnippet>16</span>        } <span class=\"kw\">else if let </span><span class=\"prelude-val\">Some</span>(w) = uf.<span class=\"highlight focus\">difference</span>(x, y) {\n<span data-nosnippet>17</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"{}\"</span>, w).ok();\n<span data-nosnippet>18</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>19</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"?\"</span>).ok();\n<span data-nosnippet>20</span>        }\n<span data-nosnippet>21</span>    }\n<span data-nosnippet>22</span>}</code></pre></div></div></div></details><details class=\"toggle method-toggle\" open><summary><section id=\"method.unite_with\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#444-472\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.unite_with\" class=\"fn\">unite_with</a>(&amp;mut self, x: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>, y: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>, potential: P::<a class=\"associatedtype\" href=\"competitive/algebra/trait.Magma.html#associatedtype.T\" title=\"type competitive::algebra::Magma::T\">T</a>) -&gt; <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.bool.html\">bool</a></h4></section></summary><div class=\"docblock scraped-example-list\"><span></span><h5 id=\"scraped-examples-1\"><a href=\"#scraped-examples-1\">Examples found in repository</a><a class=\"scrape-help\" href=\"scrape-examples-help.html\">?</a></h5><div class=\"scraped-example expanded\" data-locs=\"[[[1,1],&#34;src/competitive/data_structure/union_find.rs.html#475&#34;,&#34;line 475&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/data_structure/union_find.rs (<a href=\"src/competitive/data_structure/union_find.rs.html#475\">line 475</a>)</div><div class=\"example-wrap digits-3\"><pre class=\"rust\"><code><span data-nosnippet>474</span>    <span class=\"kw\">pub fn </span>unite(<span class=\"kw-2\">&amp;mut </span><span class=\"self\">self</span>, x: usize, y: usize) -&gt; bool {\n<span data-nosnippet>475</span>        <span class=\"self\">self</span>.<span class=\"highlight focus\">unite_with</span>(x, y, P::unit())\n<span data-nosnippet>476</span>    }</code></pre></div></div><details class=\"toggle more-examples-toggle\"><summary class=\"hideme\"><span>More examples</span></summary><div class=\"hide-more\">Hide additional examples</div><div class=\"more-scraped-examples\"><div class=\"toggle-line\"><div class=\"toggle-line-inner\"></div></div><div class=\"scraped-example\" data-locs=\"[[[9,9],&#34;src/aizu_online_judge/dsl/dsl_1_b.rs.html#15&#34;,&#34;line 15&#34;]]\"><div class=\"scraped-example-title\">crates/aizu_online_judge/src/dsl/dsl_1_b.rs (<a href=\"src/aizu_online_judge/dsl/dsl_1_b.rs.html#15\">line 15</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>6</span><span class=\"kw\">pub fn </span>dsl_1_b(reader: <span class=\"kw\">impl </span>Read, <span class=\"kw-2\">mut </span>writer: <span class=\"kw\">impl </span>Write) {\n<span data-nosnippet>7</span>    <span class=\"kw\">let </span>s = read_all_unchecked(reader);\n<span data-nosnippet>8</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>scanner = Scanner::new(<span class=\"kw-2\">&amp;</span>s);\n<span data-nosnippet>9</span>    <span class=\"macro\">scan!</span>(scanner, n, q);\n<span data-nosnippet>10</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = PotentializedUnionFind::&lt;AdditiveOperation&lt;<span class=\"kw\">_</span>&gt;&gt;::new(n);\n<span data-nosnippet>11</span>    <span class=\"kw\">for _ in </span><span class=\"number\">0</span>..q {\n<span data-nosnippet>12</span>        <span class=\"macro\">scan!</span>(scanner, ty, x, y);\n<span data-nosnippet>13</span>        <span class=\"kw\">if </span>ty == <span class=\"number\">0 </span>{\n<span data-nosnippet>14</span>            <span class=\"macro\">scan!</span>(scanner, w: i64);\n<span data-nosnippet>15</span>            uf.<span class=\"highlight focus\">unite_with</span>(x, y, w);\n<span data-nosnippet>16</span>        } <span class=\"kw\">else if let </span><span class=\"prelude-val\">Some</span>(w) = uf.difference(x, y) {\n<span data-nosnippet>17</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"{}\"</span>, w).ok();\n<span data-nosnippet>18</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>19</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"?\"</span>).ok();\n<span data-nosnippet>20</span>        }\n<span data-nosnippet>21</span>    }\n<span data-nosnippet>22</span>}</code></pre></div></div></div></details></div></details><details class=\"toggle method-toggle\" open><summary><section id=\"method.unite\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#474-476\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.unite\" class=\"fn\">unite</a>(&amp;mut self, x: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>, y: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>) -&gt; <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.bool.html\">bool</a></h4></section></summary><div class=\"docblock scraped-example-list\"><span></span><h5 id=\"scraped-examples-2\"><a href=\"#scraped-examples-2\">Examples found in repository</a><a class=\"scrape-help\" href=\"scrape-examples-help.html\">?</a></h5><div class=\"scraped-example\" data-locs=\"[[[8,8],&#34;src/aizu_online_judge/dsl/dsl_1_a.rs.html#14&#34;,&#34;line 14&#34;]]\"><div class=\"scraped-example-title\">crates/aizu_online_judge/src/dsl/dsl_1_a.rs (<a href=\"src/aizu_online_judge/dsl/dsl_1_a.rs.html#14\">line 14</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>6</span><span class=\"kw\">pub fn </span>dsl_1_a(reader: <span class=\"kw\">impl </span>Read, <span class=\"kw-2\">mut </span>writer: <span class=\"kw\">impl </span>Write) {\n<span data-nosnippet>7</span>    <span class=\"kw\">let </span>s = read_all_unchecked(reader);\n<span data-nosnippet>8</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>scanner = Scanner::new(<span class=\"kw-2\">&amp;</span>s);\n<span data-nosnippet>9</span>    <span class=\"macro\">scan!</span>(scanner, n, q);\n<span data-nosnippet>10</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = UnionFind::new(n);\n<span data-nosnippet>11</span>    <span class=\"kw\">for _ in </span><span class=\"number\">0</span>..q {\n<span data-nosnippet>12</span>        <span class=\"macro\">scan!</span>(scanner, ty, x, y);\n<span data-nosnippet>13</span>        <span class=\"kw\">if </span>ty == <span class=\"number\">0 </span>{\n<span data-nosnippet>14</span>            uf.<span class=\"highlight focus\">unite</span>(x, y);\n<span data-nosnippet>15</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>16</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"{}\"</span>, (uf.same(x, y) <span class=\"kw\">as </span>usize)).ok();\n<span data-nosnippet>17</span>        }\n<span data-nosnippet>18</span>    }\n<span data-nosnippet>19</span>}</code></pre></div></div><details class=\"toggle more-examples-toggle\"><summary class=\"hideme\"><span>More examples</span></summary><div class=\"hide-more\">Hide additional examples</div><div class=\"more-scraped-examples\"><div class=\"toggle-line\"><div class=\"toggle-line-inner\"></div></div><div class=\"scraped-example\" data-locs=\"[[[8,8],&#34;src/library_checker/data_structure/unionfind.rs.html#14&#34;,&#34;line 14&#34;]]\"><div class=\"scraped-example-title\">crates/library_checker/src/data_structure/unionfind.rs (<a href=\"src/library_checker/data_structure/unionfind.rs.html#14\">line 14</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>6</span><span class=\"kw\">pub fn </span>unionfind(reader: <span class=\"kw\">impl </span>Read, <span class=\"kw-2\">mut </span>writer: <span class=\"kw\">impl </span>Write) {\n<span data-nosnippet>7</span>    <span class=\"kw\">let </span>s = read_all_unchecked(reader);\n<span data-nosnippet>8</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>scanner = Scanner::new(<span class=\"kw-2\">&amp;</span>s);\n<span data-nosnippet>9</span>    <span class=\"macro\">scan!</span>(scanner, n, q);\n<span data-nosnippet>10</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = UnionFind::new(n);\n<span data-nosnippet>11</span>    <span class=\"kw\">for _ in </span><span class=\"number\">0</span>..q {\n<span data-nosnippet>12</span>        <span class=\"macro\">scan!</span>(scanner, ty, u, v);\n<span data-nosnippet>13</span>        <span class=\"kw\">if </span>ty == <span class=\"number\">0 </span>{\n<span data-nosnippet>14</span>            uf.<span class=\"highlight focus\">unite</span>(u, v);\n<span data-nosnippet>15</span>        } <span class=\"kw\">else </span>{\n<span data-nosnippet>16</span>            <span class=\"macro\">writeln!</span>(writer, <span class=\"string\">\"{}\"</span>, uf.same(u, v) <span class=\"kw\">as </span>usize).ok();\n<span data-nosnippet>17</span>        }\n<span data-nosnippet>18</span>    }\n<span data-nosnippet>19</span>}</code></pre></div></div><div class=\"scraped-example\" data-locs=\"[[[10,10],&#34;src/competitive/graph/minimum_spanning_tree.rs.html#14&#34;,&#34;line 14&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/graph/minimum_spanning_tree.rs (<a href=\"src/competitive/graph/minimum_spanning_tree.rs.html#14\">line 14</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>4</span>    <span class=\"kw\">pub fn </span>minimum_spanning_tree&lt;T&gt;(<span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>, weight: <span class=\"kw\">impl </span>Fn(<span class=\"kw-2\">&amp;</span>usize) -&gt; T) -&gt; Vec&lt;bool&gt;\n<span data-nosnippet>5</span>    <span class=\"kw\">where\n<span data-nosnippet>6</span>        </span>T: Ord,\n<span data-nosnippet>7</span>    {\n<span data-nosnippet>8</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>idx: Vec&lt;<span class=\"kw\">_</span>&gt; = (<span class=\"number\">0</span>..<span class=\"self\">self</span>.edges_size()).collect();\n<span data-nosnippet>9</span>        idx.sort_by_key(weight);\n<span data-nosnippet>10</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = UnionFind::new(<span class=\"self\">self</span>.vertices_size());\n<span data-nosnippet>11</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>res = <span class=\"macro\">vec!</span>[<span class=\"bool-val\">false</span>; <span class=\"self\">self</span>.edges_size()];\n<span data-nosnippet>12</span>        <span class=\"kw\">for </span>eid <span class=\"kw\">in </span>idx.into_iter() {\n<span data-nosnippet>13</span>            <span class=\"kw\">let </span>(u, v) = <span class=\"self\">self</span>[eid];\n<span data-nosnippet>14</span>            res[eid] = uf.<span class=\"highlight focus\">unite</span>(u, v);\n<span data-nosnippet>15</span>        }\n<span data-nosnippet>16</span>        res\n<span data-nosnippet>17</span>    }</code></pre></div></div><div class=\"scraped-example\" data-locs=\"[[[26,26],&#34;src/competitive/algorithm/solve_01_on_tree.rs.html#68&#34;,&#34;line 68&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/algorithm/solve_01_on_tree.rs (<a href=\"src/competitive/algorithm/solve_01_on_tree.rs.html#68\">line 68</a>)</div><div class=\"example-wrap digits-2\"><pre class=\"rust\"><code><span data-nosnippet>42</span><span class=\"kw\">pub fn </span>solve_01_on_tree(\n<span data-nosnippet>43</span>    n: usize,\n<span data-nosnippet>44</span>    c01: <span class=\"kw\">impl </span>Fn(usize) -&gt; (usize, usize),\n<span data-nosnippet>45</span>    root: usize,\n<span data-nosnippet>46</span>    parent: <span class=\"kw\">impl </span>Fn(usize) -&gt; usize,\n<span data-nosnippet>47</span>) -&gt; (usize, Vec&lt;usize&gt;) {\n<span data-nosnippet>48</span>    <span class=\"kw\">pub type </span>UF&lt;T, M&gt; =\n<span data-nosnippet>49</span>        UnionFindBase&lt;(), union_find::PathCompression, union_find::FnMerger&lt;T, M&gt;, (), ()&gt;;\n<span data-nosnippet>50</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>cost = <span class=\"number\">0usize</span>;\n<span data-nosnippet>51</span>    <span class=\"kw\">let </span>c01 = |u| {\n<span data-nosnippet>52</span>        <span class=\"kw\">let </span>c = c01(u);\n<span data-nosnippet>53</span>        Count01::new(c.<span class=\"number\">0</span>, c.<span class=\"number\">1</span>)\n<span data-nosnippet>54</span>    };\n<span data-nosnippet>55</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = UF::new_with_merger(n, <span class=\"kw-2\">&amp;</span>c01, |x, y| {\n<span data-nosnippet>56</span>        cost += x.cnt1 * y.cnt0;\n<span data-nosnippet>57</span>        <span class=\"kw-2\">*</span>x += <span class=\"kw-2\">*</span>y;\n<span data-nosnippet>58</span>    });\n<span data-nosnippet>59</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>label = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; n];\n<span data-nosnippet>60</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>heap = BinaryHeap::from_iter((<span class=\"number\">0</span>..n).filter(|<span class=\"kw-2\">&amp;</span>u| <span class=\"macro\">u !</span>= root).map(|u| (c01(u), u, <span class=\"number\">0</span>)));\n<span data-nosnippet>61</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>next: Vec&lt;<span class=\"kw\">_</span>&gt; = (<span class=\"number\">0</span>..n).collect();\n<span data-nosnippet>62</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ord = <a href=\"https://doc.rust-lang.org/nightly/core/ops/arith/trait.Add.html\">Vec</a>::with_capacity(n);\n<span data-nosnippet>63</span>    <span class=\"kw\">while let </span><span class=\"prelude-val\">Some</span>((_c, u, l)) = heap.pop() {\n<span data-nosnippet>64</span>        <span class=\"kw\">if </span>label[u] != l {\n<span data-nosnippet>65</span>            <span class=\"kw\">continue</span>;\n<span data-nosnippet>66</span>        }\n<span data-nosnippet>67</span>        <span class=\"kw\">let </span>p = uf.find_root(parent(u));\n<span data-nosnippet>68</span>        uf.<span class=\"highlight focus\">unite</span>(u, p);\n<span data-nosnippet>69</span>        <span class=\"macro\">if !</span>uf.same(p, root) {\n<span data-nosnippet>70</span>            label[p] += <span class=\"number\">1</span>;\n<span data-nosnippet>71</span>            heap.push((<span class=\"kw-2\">*</span>uf.merge_data(p), p, label[p]));\n<span data-nosnippet>72</span>        }\n<span data-nosnippet>73</span>        next.swap(u, p);\n<span data-nosnippet>74</span>    }\n<span data-nosnippet>75</span>    <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>u = next[root];\n<span data-nosnippet>76</span>    ord.push(u);\n<span data-nosnippet>77</span>    <span class=\"kw\">while </span><span class=\"macro\">u !</span>= root {\n<span data-nosnippet>78</span>        u = next[u];\n<span data-nosnippet>79</span>        ord.push(u);\n<span data-nosnippet>80</span>    }\n<span data-nosnippet>81</span>    ord.reverse();\n<span data-nosnippet>82</span>    (cost, ord)\n<span data-nosnippet>83</span>}</code></pre></div></div><div class=\"scraped-example\" data-locs=\"[[[72,72],&#34;src/competitive/graph/minimum_spanning_arborescence.rs.html#77&#34;,&#34;line 77&#34;]]\"><div class=\"scraped-example-title\">crates/competitive/src/graph/minimum_spanning_arborescence.rs (<a href=\"src/competitive/graph/minimum_spanning_arborescence.rs.html#77\">line 77</a>)</div><div class=\"example-wrap digits-3\"><pre class=\"rust\"><code><span data-nosnippet>5</span>    <span class=\"kw\">pub fn </span>minimum_spanning_arborescence&lt;G, F&gt;(\n<span data-nosnippet>6</span>        <span class=\"kw-2\">&amp;</span><span class=\"self\">self</span>,\n<span data-nosnippet>7</span>        root: usize,\n<span data-nosnippet>8</span>        weight: F,\n<span data-nosnippet>9</span>    ) -&gt; <span class=\"prelude-ty\">Option</span>&lt;(G::T, Vec&lt;usize&gt;)&gt;\n<span data-nosnippet>10</span>    <span class=\"kw\">where\n<span data-nosnippet>11</span>        </span>G: Group&lt;T: Ord&gt;,\n<span data-nosnippet>12</span>        F: Fn(usize) -&gt; G::T,\n<span data-nosnippet>13</span>    {\n<span data-nosnippet>14</span>        <span class=\"kw\">struct </span>WeightAct&lt;G&gt;(std::marker::PhantomData&lt;<span class=\"kw\">fn</span>() -&gt; G&gt;);\n<span data-nosnippet>15</span>        <span class=\"kw\">impl</span>&lt;G&gt; MonoidAct <span class=\"kw\">for </span>WeightAct&lt;G&gt;\n<span data-nosnippet>16</span>        <span class=\"kw\">where\n<span data-nosnippet>17</span>            </span>G: Group,\n<span data-nosnippet>18</span>        {\n<span data-nosnippet>19</span>            <span class=\"kw\">type </span>Key = (G::T, usize);\n<span data-nosnippet>20</span>            <span class=\"kw\">type </span>Act = G::T;\n<span data-nosnippet>21</span>            <span class=\"kw\">type </span>ActMonoid = G;\n<span data-nosnippet>22</span>\n<span data-nosnippet>23</span>            <span class=\"kw\">fn </span>act(x: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Key, a: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Act) -&gt; <span class=\"self\">Self</span>::Key {\n<span data-nosnippet>24</span>                (G::operate(<span class=\"kw-2\">&amp;</span>x.<span class=\"number\">0</span>, a), x.<span class=\"number\">1</span>)\n<span data-nosnippet>25</span>            }\n<span data-nosnippet>26</span>\n<span data-nosnippet>27</span>            <span class=\"kw\">fn </span>act_assign(x: <span class=\"kw-2\">&amp;mut </span><span class=\"self\">Self</span>::Key, a: <span class=\"kw-2\">&amp;</span><span class=\"self\">Self</span>::Act) {\n<span data-nosnippet>28</span>                x.<span class=\"number\">0 </span>= G::operate(<span class=\"kw-2\">&amp;</span>x.<span class=\"number\">0</span>, a);\n<span data-nosnippet>29</span>            }\n<span data-nosnippet>30</span>        }\n<span data-nosnippet>31</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>uf = MergingUnionFind::new_with_merger(\n<span data-nosnippet>32</span>            <span class=\"self\">self</span>.vertices_size(),\n<span data-nosnippet>33</span>            |<span class=\"kw\">_</span>| PairingHeap::&lt;(G::T, usize), Less, WeightAct&lt;G&gt;&gt;::default(),\n<span data-nosnippet>34</span>            |x, y| x.append(y),\n<span data-nosnippet>35</span>        );\n<span data-nosnippet>36</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>state = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; <span class=\"self\">self</span>.vertices_size()]; <span class=\"comment\">// 0: unprocessed, 1: in process, 2: completed\n<span data-nosnippet>37</span>        </span>state[root] = <span class=\"number\">2</span>;\n<span data-nosnippet>38</span>        <span class=\"kw\">for </span>(id, <span class=\"kw-2\">&amp;</span>(<span class=\"kw\">_</span>, to)) <span class=\"kw\">in </span><span class=\"self\">self</span>.edges().enumerate() {\n<span data-nosnippet>39</span>            uf.merge_data_mut(to).push((weight(id), id));\n<span data-nosnippet>40</span>        }\n<span data-nosnippet>41</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>paredge = <span class=\"macro\">vec!</span>[<span class=\"number\">0</span>; <span class=\"self\">self</span>.edges_size()];\n<span data-nosnippet>42</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ord = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>43</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>leaf = <span class=\"macro\">vec!</span>[<span class=\"self\">self</span>.edges_size(); <span class=\"self\">self</span>.vertices_size()];\n<span data-nosnippet>44</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>cycle = <span class=\"number\">0usize</span>;\n<span data-nosnippet>45</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>acc = G::unit();\n<span data-nosnippet>46</span>        <span class=\"kw\">for </span><span class=\"kw-2\">mut </span>cur <span class=\"kw\">in </span><span class=\"self\">self</span>.vertices() {\n<span data-nosnippet>47</span>            <span class=\"kw\">if </span>state[cur] != <span class=\"number\">0 </span>{\n<span data-nosnippet>48</span>                <span class=\"kw\">continue</span>;\n<span data-nosnippet>49</span>            }\n<span data-nosnippet>50</span>            <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>path = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>51</span>            <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>ch = <span class=\"macro\">vec!</span>[];\n<span data-nosnippet>52</span>            <span class=\"kw\">while </span>state[cur] != <span class=\"number\">2 </span>{\n<span data-nosnippet>53</span>                path.push(cur);\n<span data-nosnippet>54</span>                state[cur] = <span class=\"number\">1</span>;\n<span data-nosnippet>55</span>                <span class=\"kw\">let </span>(w, eid) = {\n<span data-nosnippet>56</span>                    <span class=\"kw\">match </span>uf.merge_data_mut(cur).pop() {\n<span data-nosnippet>57</span>                        <span class=\"prelude-val\">Some</span>((w, eid)) =&gt; (w, eid),\n<span data-nosnippet>58</span>                        <span class=\"prelude-val\">None </span>=&gt; <span class=\"kw\">return </span><span class=\"prelude-val\">None</span>,\n<span data-nosnippet>59</span>                    }\n<span data-nosnippet>60</span>                };\n<span data-nosnippet>61</span>                uf.merge_data_mut(cur).apply_all(G::inverse(<span class=\"kw-2\">&amp;</span>w));\n<span data-nosnippet>62</span>                acc = G::operate(<span class=\"kw-2\">&amp;</span>acc, <span class=\"kw-2\">&amp;</span>w);\n<span data-nosnippet>63</span>                ord.push(eid);\n<span data-nosnippet>64</span>                <span class=\"kw\">let </span>(u, v) = <span class=\"self\">self</span>[eid];\n<span data-nosnippet>65</span>                <span class=\"kw\">if </span>leaf[v] &gt;= <span class=\"self\">self</span>.edges_size() {\n<span data-nosnippet>66</span>                    leaf[v] = eid;\n<span data-nosnippet>67</span>                }\n<span data-nosnippet>68</span>                <span class=\"kw\">while </span>cycle &gt; <span class=\"number\">0 </span>{\n<span data-nosnippet>69</span>                    paredge[ch.pop().unwrap()] = eid;\n<span data-nosnippet>70</span>                    cycle -= <span class=\"number\">1</span>;\n<span data-nosnippet>71</span>                }\n<span data-nosnippet>72</span>                ch.push(eid);\n<span data-nosnippet>73</span>                <span class=\"kw\">if </span>state[uf.find_root(u)] == <span class=\"number\">1 </span>{\n<span data-nosnippet>74</span>                    <span class=\"kw\">while let </span><span class=\"prelude-val\">Some</span>(t) = path.pop() {\n<span data-nosnippet>75</span>                        state[t] = <span class=\"number\">2</span>;\n<span data-nosnippet>76</span>                        cycle += <span class=\"number\">1</span>;\n<span data-nosnippet>77</span>                        <span class=\"macro\">if !</span>uf.<span class=\"highlight focus\">unite</span>(u, t) {\n<span data-nosnippet>78</span>                            <span class=\"kw\">break</span>;\n<span data-nosnippet>79</span>                        }\n<span data-nosnippet>80</span>                    }\n<span data-nosnippet>81</span>                    state[uf.find_root(u)] = <span class=\"number\">1</span>;\n<span data-nosnippet>82</span>                }\n<span data-nosnippet>83</span>                cur = uf.find_root(u);\n<span data-nosnippet>84</span>            }\n<span data-nosnippet>85</span>            <span class=\"kw\">for </span>u <span class=\"kw\">in </span>path.into_iter() {\n<span data-nosnippet>86</span>                state[u] = <span class=\"number\">2</span>;\n<span data-nosnippet>87</span>            }\n<span data-nosnippet>88</span>        }\n<span data-nosnippet>89</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>tree = <span class=\"macro\">vec!</span>[root; <span class=\"self\">self</span>.vertices_size()];\n<span data-nosnippet>90</span>        <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>used = <span class=\"macro\">vec!</span>[<span class=\"bool-val\">false</span>; <span class=\"self\">self</span>.edges_size()];\n<span data-nosnippet>91</span>        <span class=\"kw\">for </span>eid <span class=\"kw\">in </span>ord.into_iter().rev() {\n<span data-nosnippet>92</span>            <span class=\"macro\">if !</span>used[eid] {\n<span data-nosnippet>93</span>                <span class=\"kw\">let </span>(u, v) = <span class=\"self\">self</span>[eid];\n<span data-nosnippet>94</span>                tree[v] = u;\n<span data-nosnippet>95</span>                <span class=\"kw\">let </span><span class=\"kw-2\">mut </span>x = leaf[v];\n<span data-nosnippet>96</span>                <span class=\"kw\">while </span><span class=\"macro\">x !</span>= eid {\n<span data-nosnippet>97</span>                    used[x] = <span class=\"bool-val\">true</span>;\n<span data-nosnippet>98</span>                    x = paredge[x];\n<span data-nosnippet>99</span>                }\n<span data-nosnippet>100</span>            }\n<span data-nosnippet>101</span>        }\n<span data-nosnippet>102</span>        <span class=\"prelude-val\">Some</span>((acc, tree))\n<span data-nosnippet>103</span>    }</code></pre></div></div></div></details></div></details></div></details>",0,"competitive::data_structure::union_find::UnionFind","competitive::data_structure::union_find::MergingUnionFind","competitive::data_structure::union_find::PotentializedUnionFind","competitive::data_structure::union_find::UndoableUnionFind"],["<details class=\"toggle implementors-toggle\" open><summary><section id=\"impl-UnionFindBase%3CUnionBySize,+F,+M,+P,+H%3E\" class=\"impl\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#303-314\">Source</a><a href=\"#impl-UnionFindBase%3CUnionBySize,+F,+M,+P,+H%3E\" class=\"anchor\">§</a><h3 class=\"code-header\">impl&lt;F, M, P, H&gt; <a class=\"struct\" href=\"competitive/data_structure/union_find/struct.UnionFindBase.html\" title=\"struct competitive::data_structure::union_find::UnionFindBase\">UnionFindBase</a>&lt;<a class=\"enum\" href=\"competitive/data_structure/union_find/enum.UnionBySize.html\" title=\"enum competitive::data_structure::union_find::UnionBySize\">UnionBySize</a>, F, M, P, H&gt;<div class=\"where\">where\n    F: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.FindStrategy.html\" title=\"trait competitive::data_structure::union_find::FindStrategy\">FindStrategy</a>,\n    M: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UfMergeSpec.html\" title=\"trait competitive::data_structure::union_find::UfMergeSpec\">UfMergeSpec</a>,\n    P: <a class=\"trait\" href=\"competitive/algebra/trait.Monoid.html\" title=\"trait competitive::algebra::Monoid\">Monoid</a>,\n    H: <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UndoStrategy.html\" title=\"trait competitive::data_structure::union_find::UndoStrategy\">UndoStrategy</a>&lt;<a class=\"enum\" href=\"competitive/data_structure/union_find/enum.UfCell.html\" title=\"enum competitive::data_structure::union_find::UfCell\">UfCell</a>&lt;<a class=\"enum\" href=\"competitive/data_structure/union_find/enum.UnionBySize.html\" title=\"enum competitive::data_structure::union_find::UnionBySize\">UnionBySize</a>, M, P&gt;&gt;,</div></h3></section></summary><div class=\"impl-items\"><section id=\"method.size\" class=\"method\"><a class=\"src rightside\" href=\"src/competitive/data_structure/union_find.rs.html#310-313\">Source</a><h4 class=\"code-header\">pub fn <a href=\"competitive/data_structure/union_find/struct.UnionFindBase.html#tymethod.size\" class=\"fn\">size</a>(&amp;mut self, x: <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a>) -&gt; &lt;<a class=\"enum\" href=\"competitive/data_structure/union_find/enum.UnionBySize.html\" title=\"enum competitive::data_structure::union_find::UnionBySize\">UnionBySize</a> as <a class=\"trait\" href=\"competitive/data_structure/union_find/trait.UnionStrategy.html\" title=\"trait competitive::data_structure::union_find::UnionStrategy\">UnionStrategy</a>&gt;::<a class=\"associatedtype\" href=\"competitive/data_structure/union_find/trait.UnionStrategy.html#associatedtype.Info\" title=\"type competitive::data_structure::union_find::UnionStrategy::Info\">Info</a></h4></section></div></details>",0,"competitive::data_structure::union_find::UnionFind","competitive::data_structure::union_find::MergingUnionFind","competitive::data_structure::union_find::PotentializedUnionFind","competitive::data_structure::union_find::UndoableUnionFind"]]]]);
    if (window.register_type_impls) {
        window.register_type_impls(type_impls);
    } else {
        window.pending_type_impls = type_impls;
    }
})()
//{"start":55,"fragment_lengths":[148311]}